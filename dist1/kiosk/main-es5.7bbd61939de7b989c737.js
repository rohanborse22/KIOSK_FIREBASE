(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("q/0M"),a=n("mrSG"),s=n("x7I3"),u=n("zVF4"),l=i.SDK_VERSION,c=new o.Logger("@firebase/firestore"),h=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function f(){return c.logLevel===o.LogLevel.DEBUG?h.DEBUG:c.logLevel===o.LogLevel.SILENT?h.SILENT:h.ERROR}function p(t){switch(t){case h.DEBUG:c.logLevel=o.LogLevel.DEBUG;break;case h.ERROR:c.logLevel=o.LogLevel.ERROR;break;case h.SILENT:c.logLevel=o.LogLevel.SILENT;break;default:c.error("Firestore ("+l+"): Invalid value passed to `setLogLevel`")}}function d(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(c.logLevel<=o.LogLevel.DEBUG){var i=n.map(m);c.debug.apply(c,["Firestore ("+l+") ["+t+"]: "+e].concat(i))}}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(c.logLevel<=o.LogLevel.ERROR){var r=e.map(m);c.error.apply(c,["Firestore ("+l+"): "+t].concat(r))}}function m(t){if("string"==typeof t)return t;var e=b.getPlatform();try{return e.formatJSON(t)}catch(n){return t}}function g(t){var e="FIRESTORE ("+l+") INTERNAL ASSERTION FAILED: "+t;throw y(e),new Error(e)}function v(t,e){t||g(e)}var b=function(){function t(){}return t.setPlatform=function(e){t.platform&&g("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||g("Platform not set"),t.platform},t}();function w(){return b.getPlatform().emptyByteString}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},S=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(e,t),e}(Error);function E(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new S(_.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){return void 0!==t?t:e}function I(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function k(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function x(t){for(var e in v(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e){if(0!==e.length)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+H(e.length,"argument")+".")}function A(t,e,n){if(e.length!==n)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function N(t,e,n){if(e.length<n)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires at least "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function O(t,e,n,r){if(e.length<n||e.length>r)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+H(e.length,"argument")+".")}function P(t,e,n,r){U(t,e,W(n)+" argument",r)}function R(t,e,n,r){void 0!==r&&P(t,e,n,r)}function M(t,e,n,r){U(t,e,n+" option",r)}function L(t,e,n,r){void 0!==r&&M(t,e,n,r)}function F(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(j(u))}var l=j(r);throw new S(_.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function U(t,e,n,r){if(!("object"===e?V(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=j(r);throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function V(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function j(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g("Unknown wrong type: "+typeof t)}function B(t,e,n){if(void 0===n)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+W(e)+" argument, but it was undefined.")}function q(t,e,n){k(e,function(e,r){if(n.indexOf(e)<0)throw new S(_.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function z(t,e,n,r){var i=j(r);return new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+W(n)+" argument to be a "+e+", but it was: "+i)}function W(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function H(t,e){return t+" "+e+(1===t?"":"s")}var Q=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return v(20===e.length,"Invalid auto ID: "+e),e},t}();function K(t,e){return t<e?-1:t>e?1:0}function G(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Y(t){return t+"\0"}function Z(){if("undefined"==typeof Uint8Array)throw new S(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function J(){if(!b.getPlatform().base64Available)throw new S(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var X=function(){function t(t){J(),this._binaryString=t}return t.fromBase64String=function(e){A("Blob.fromBase64String",arguments,1),P("Blob.fromBase64String","string",1,e),J();try{return new t(b.getPlatform().atob(e))}catch(n){throw new S(_.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+n)}},t.fromUint8Array=function(e){if(A("Blob.fromUint8Array",arguments,1),Z(),!(e instanceof Uint8Array))throw z("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return A("Blob.toBase64",arguments,0),J(),b.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){A("Blob.toUint8Array",arguments,0),Z();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return K(this._binaryString,t._binaryString)},t}(),$=E(X,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),tt=function(){function t(t,e){if(A("GeoPoint",arguments,2),P("GeoPoint","number",1,t),P("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new S(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new S(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return K(this._lat,t._lat)||K(this._long,t._long)},t}(),et=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new S(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new S(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new S(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new S(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?K(this.nanoseconds,t.nanoseconds):K(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),nt=function(){return function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),rt="(default)",it=function(){function t(t,e){this.projectId=t,this.database=e||rt}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===rt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return K(this.projectId,t.projectId)||K(this.database,t.database)},t}(),ot=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&g("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&g("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):g("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return v(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return v(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new S(_.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(ot),st=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.isValidIdentifier=function(t){return st.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new S(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new S(_.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new S(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new S(_.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(ot),lt=function(){function t(e){this.path=e,v(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===at.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return at.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new at(e.slice()))},t.fromPathString=function(e){return new t(at.fromString(e))},t.EMPTY=new t(new at([])),t}(),ct=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return lt.comparator(t.key,e.key)},t}(),ht=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return a.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):g("Trying to compare documents on fields that don't exist")},e}(ct),ft=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ct),pt=function(t){function e(e,n){return t.call(this,e,n)||this}return a.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ct),dt=function(){function t(t,e){this.comparator=t,this.root=e||mt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new yt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new yt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new yt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new yt(this.root,t,this.comparator,!0)},t}(),yt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),mt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw g("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw g("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),gt=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new mt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();mt.EMPTY=new gt;var vt=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),bt=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),wt=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(bt.Estimate,n);case"previous":return new t(bt.Previous,n);case"none":case void 0:return new t(bt.Default,n);default:return g("fromSnapshotOptions() called with invalid options.")}},t}(),_t=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return v(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),K(this.typeOrder,t.typeOrder)},t}(),St=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=vt.NullValue,e.internalValue=null,e}return a.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(_t),Et=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vt.BooleanValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(_t),Ct=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vt.NumberValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(_t);function Tt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var It=function(t){function e(e){return t.call(this,e)||this}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Tt(this.internalValue,t.internalValue)},e}(Ct),kt=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Tt(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Ct),xt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vt.StringValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(_t),Dt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vt.TimestampValue,n}return a.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof At?-1:this.defaultCompareTo(t)},e}(_t),At=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=vt.TimestampValue,r}return a.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===bt.Estimate?new Dt(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===bt.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Dt?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(_t),Nt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vt.BlobValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(_t),Ot=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=vt.RefValue,r}return a.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:lt.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(_t),Pt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vt.GeoPointValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(_t),Rt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vt.ObjectValue,n}return a.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=K(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return K(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(v(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(v(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){v(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new dt(K)),e}(_t),Mt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=vt.ArrayValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return K(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return"["+this.internalValue.map(function(t){return t.toString()}).join(",")+"]"},e}(_t),Lt=Number,Ft=Lt.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Ut=Lt.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Vt=Lt.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function jt(t){return null==t}function Bt(t){return Vt(t)&&t<=Ut&&t>=Ft}var qt=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[Jt]:[new Zt(t),Jt];else{v(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Gt.ASCENDING)===Gt.ASCENDING?Jt:Xt)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){v(null==this.getInequalityFilterField()||!(e instanceof Ht)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";jt(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),jt(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!jt(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Ht&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof Ht&&t.op===Wt.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return lt.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):lt.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){v(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),zt=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(St.INSTANCE)){if(e!==Wt.EQUAL)throw new S(_.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Qt(t)}if(n.isEqual(kt.NAN)){if(e!==Wt.EQUAL)throw new S(_.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Kt(t)}return new Ht(t,e,n)},t}(),Wt=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return g("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),Ht=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return a.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){v(this.value instanceof Ot,"Comparing on key, but filter value not a RefValue"),v(this.op!==Wt.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=lt.comparator(t.key,this.value.key);return this.matchesComparison(e)}var n=t.field(this.field);return void 0!==n&&this.matchesValue(n)},e.prototype.matchesValue=function(t){var e=this;return this.op===Wt.ARRAY_CONTAINS?t instanceof Mt&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Wt.LESS_THAN:return t<0;case Wt.LESS_THAN_OR_EQUAL:return t<=0;case Wt.EQUAL:return 0===t;case Wt.GREATER_THAN:return t>0;case Wt.GREATER_THAN_OR_EQUAL:return t>=0;default:return g("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==Wt.EQUAL&&this.op!==Wt.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(zt),Qt=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(zt),Kt=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(zt),Gt=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Yt=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){v(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof Ot,"Bound has a non-key value where the key path is being used."),n=lt.comparator(o.key,e.key);else{var a=e.field(i.field);v(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Gt.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)return this.position[e].isEqual(t.position[e]);return!0},t}(),Zt=function(){function t(t,e){this.field=t,void 0===e&&(e=Gt.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?ht.compareByKey(t,e):ht.compareByField(this.field,t,e);switch(this.dir){case Gt.ASCENDING:return n;case Gt.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Jt=new Zt(ut.keyField(),Gt.ASCENDING),Xt=new Zt(ut.keyField(),Gt.DESCENDING),$t=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new et(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new et(0,0)),t}(),te=function(t){return t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution",t}({}),ee=function(){function t(t,e,n,r,i,o){void 0===i&&(i=$t.MIN),void 0===o&&(o=w()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),ne=function(){function t(t){this.comparator=t,this.data=new dt(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new re(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new re(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),re=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ie=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new ne(ut.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.applyTo=function(t){var e=Rt.EMPTY;return this.fields.forEach(function(n){if(n.isEmpty())return t;var r=t.field(n);void 0!==r&&(e=e.set(n,r))}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),oe=function(){function t(t,e){this.field=t,this.transform=e}return Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return this.transform.isIdempotent},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),ae=function(){return function(t,e){this.version=t,this.transformResults=e}}(),se=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),ue=function(){function t(t,e){this.updateTime=t,this.exists=e,v(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof ht&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof ht:(v(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!=(e=this.updateTime)?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),le=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&v(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof ht?t.version:$t.MIN},t}(),ce=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=se.Set,i}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by SetMutation."),new ht(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=le.getPostMutationVersion(t);return new ht(this.key,r,this.value,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(le),he=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=se.Patch,o}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new pt(this.key,e.version);var n=this.patchDocument(t);return new ht(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=le.getPostMutationVersion(t),i=this.patchDocument(t);return new ht(this.key,r,i,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof ht?t.data:Rt.EMPTY)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=void 0!==r?t.set(n,r):t.delete(n)}}),t},e}(le),fe=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=se.Transform,r.precondition=ue.exists(!0),r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new pt(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new ht(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new ht(this.key,r.version,o,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){for(var t=0,e=this.fieldTransforms;t<e.length;t++)if(!e[t].isIdempotent)return!1;return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMask",{get:function(){var t=new ne(ut.comparator);return this.fieldTransforms.forEach(function(e){return t=t.add(e.field)}),new ie(t)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&G(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){v(t instanceof ht,"Unknown MaybeDocument type "+t);var e=t;return v(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];v(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof ht&&(a=t.field(i.field)||null),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;e instanceof ht&&(s=e.field(o.field)||null),n.push(a.applyToLocalView(s,t))}return n},e.prototype.transformObject=function(t,e){v(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},e}(le),pe=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=se.Delete,r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by DeleteMutation."),new ft(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&v(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new ft(this.key,$t.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),e}(le),de=function(){function t(){this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return new At(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ye=function(){function t(t){this.elements=t,this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ve(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Mt(e)},t.prototype.isEqual=function(e){return e instanceof t&&G(e.elements,this.elements)},t}(),me=function(){function t(t){this.elements=t,this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ve(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Mt(e)},t.prototype.isEqual=function(e){return e instanceof t&&G(e.elements,this.elements)},t}(),ge=function(){function t(t){this.operand=t,this.isIdempotent=!1}return t.prototype.applyToLocalView=function(t,e){return t instanceof It&&this.operand instanceof It?new It(t.internalValue+this.operand.internalValue):t instanceof Ct?new kt(t.internalValue+this.operand.internalValue):this.operand},t.prototype.applyToRemoteDocument=function(t,e){return v(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function ve(t){return t instanceof Mt?t.internalValue.slice():[]}var be=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),we=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}({});function _e(t){switch(t){case _.OK:return g("Treated status OK as error");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return g("Unknown status code: "+t)}}function Se(t){if(void 0===t)return y("GRPC error has no .code"),_.UNKNOWN;switch(t){case we.OK:return _.OK;case we.CANCELLED:return _.CANCELLED;case we.UNKNOWN:return _.UNKNOWN;case we.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case we.INTERNAL:return _.INTERNAL;case we.UNAVAILABLE:return _.UNAVAILABLE;case we.UNAUTHENTICATED:return _.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case we.NOT_FOUND:return _.NOT_FOUND;case we.ALREADY_EXISTS:return _.ALREADY_EXISTS;case we.PERMISSION_DENIED:return _.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case we.ABORTED:return _.ABORTED;case we.OUT_OF_RANGE:return _.OUT_OF_RANGE;case we.UNIMPLEMENTED:return _.UNIMPLEMENTED;case we.DATA_LOSS:return _.DATA_LOSS;default:return g("Unknown status code: "+t)}}function Ee(t){if(void 0===t)return we.OK;switch(t){case _.OK:return we.OK;case _.CANCELLED:return we.CANCELLED;case _.UNKNOWN:return we.UNKNOWN;case _.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case _.INTERNAL:return we.INTERNAL;case _.UNAVAILABLE:return we.UNAVAILABLE;case _.UNAUTHENTICATED:return we.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case _.NOT_FOUND:return we.NOT_FOUND;case _.ALREADY_EXISTS:return we.ALREADY_EXISTS;case _.PERMISSION_DENIED:return we.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case _.ABORTED:return we.ABORTED;case _.OUT_OF_RANGE:return we.OUT_OF_RANGE;case _.UNIMPLEMENTED:return we.UNIMPLEMENTED;case _.DATA_LOSS:return we.DATA_LOSS;default:return g("Unknown status code: "+t)}}var Ce=new dt(lt.comparator);function Te(){return Ce}function Ie(){return Te()}var ke=new dt(lt.comparator);function xe(){return ke}var De=new dt(lt.comparator);function Ae(){return De}var Ne=new ne(lt.comparator);function Oe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ne,r=0,i=t;r<i.length;r++)n=n.add(i[r]);return n}var Pe=new ne(K);function Re(){return Pe}var Me=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||lt.comparator(e.key,n.key)}:function(t,e){return lt.comparator(t.key,e.key)},this.keyedMap=xe(),this.sortedSet=new dt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Le=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),Fe=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),Ue=function(){function t(){this.changeMap=new dt(lt.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Le.Added&&n.type===Le.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Le.Metadata&&n.type!==Le.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Le.Modified&&n.type===Le.Modified?this.changeMap=this.changeMap.insert(e,{type:Le.Modified,doc:t.doc}):t.type===Le.Modified&&n.type===Le.Added?this.changeMap=this.changeMap.insert(e,{type:Le.Added,doc:t.doc}):t.type===Le.Removed&&n.type===Le.Added?this.changeMap=this.changeMap.remove(e):t.type===Le.Removed&&n.type===Le.Modified?this.changeMap=this.changeMap.insert(e,{type:Le.Removed,doc:n.doc}):t.type===Le.Added&&n.type===Le.Removed?this.changeMap=this.changeMap.insert(e,{type:Le.Modified,doc:t.doc}):g("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Ve=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Le.Added,doc:t})}),new t(e,n,Me.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),je=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Be.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t($t.MIN,i,Re(),Te(),Oe())},t}(),Be=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(w(),n,Oe(),Oe(),Oe())},t}(),qe=function(){return function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}}(),ze=function(){return function(t,e){this.targetId=t,this.existenceFilter=e}}(),We=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),He=function(){return function(t,e,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),Qe=function(){function t(){this.pendingResponses=0,this.documentChanges=Ye(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Oe(),e=Oe(),n=Oe();return this.documentChanges.forEach(function(r,i){switch(i){case Le.Added:t=t.add(r);break;case Le.Modified:e=e.add(r);break;case Le.Removed:n=n.add(r);break;default:g("Encountered invalid change type: "+i)}}),new Be(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Ye()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Ke=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Te(),this.pendingDocumentTargetMapping=Ge(),this.pendingTargetResets=new ne(K)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof ht?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof ft&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case We.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case We.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case We.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),v(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case We.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case We.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:g("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):I(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new lt(i.path);this.removeDocumentFromTarget(e,o,new ft(o,$t.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};I(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new lt(o.query.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new ft(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Oe();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===te.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new je(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Te(),this.pendingDocumentTargetMapping=Ge(),this.pendingTargetResets=new ne(K),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Le.Modified:Le.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Le.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Qe),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new ne(K),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;v(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Qe,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Ge(){return new dt(lt.comparator)}function Ye(){return new dt(lt.comparator)}var Ze,Je,Xe=((Ze={})[Gt.ASCENDING.name]="ASCENDING",Ze[Gt.DESCENDING.name]="DESCENDING",Ze),$e=((Je={})[Wt.LESS_THAN.name]="LESS_THAN",Je[Wt.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Je[Wt.GREATER_THAN.name]="GREATER_THAN",Je[Wt.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Je[Wt.EQUAL.name]="EQUAL",Je[Wt.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Je),tn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(t,e){v(!jt(t),e+" is missing")}function nn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):g("can't parse "+t)}var rn=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?_.UNKNOWN:Se(t.code);return new S(e,t.message||"")},t.prototype.toInt32Value=function(t){return jt(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return jt(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);v(!!t,"Cannot deserialize null or undefined timestamp.");var e=nn(t.seconds||"0");return new et(e,t.nanos||0)},t.prototype.fromIso8601String=function(t){var e=0,n=tn.exec(t);if(v(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new et(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),X.fromBase64String(t)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),X.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return v(!!t,"Trying to deserialize version that isn't set"),$t.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=at.fromString(t);return v(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return v(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),v(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new lt(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?at.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new at(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new at(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return v(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof St)return{nullValue:"NULL_VALUE"};if(t instanceof Et)return{booleanValue:t.value()};if(t instanceof It)return{integerValue:""+t.value()};if(t instanceof kt){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof xt?{stringValue:t.value()}:t instanceof Rt?{mapValue:this.toMapValue(t)}:t instanceof Mt?{arrayValue:this.toArrayValue(t)}:t instanceof Dt?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Pt?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Nt?{bytesValue:this.toBytes(t.value())}:t instanceof Ot?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:g("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return St.INSTANCE;if("booleanValue"in t)return Et.of(t.booleanValue);if("integerValue"in t)return new It(nn(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return kt.NAN;if("Infinity"===t.doubleValue)return kt.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return kt.NEGATIVE_INFINITY}return new kt(t.doubleValue)}if("stringValue"in t)return new xt(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t)return en(t.arrayValue,"arrayValue"),new Mt((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if("timestampValue"in t)return en(t.timestampValue,"timestampValue"),new Dt(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t)return en(t.geoPointValue,"geoPointValue"),new Pt(new tt(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if("bytesValue"in t){en(t.bytesValue,"bytesValue");var n=this.fromBlob(t.bytesValue);return new Nt(n)}if("referenceValue"in t){en(t.referenceValue,"referenceValue");var r=this.fromResourceName(t.referenceValue),i=new it(r.get(1),r.get(3)),o=new lt(this.extractLocalPathFromResourceName(r));return new Ot(i,o)}return g("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return v(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new ht(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=Rt.EMPTY;return k(t,function(t,r){n=n.set(new ut([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){v(!!t.found,"Tried to deserialize a found document from a missing document."),en(t.found.name,"doc.found.name"),en(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new ht(e,n,r,{},t.found)},t.prototype.fromMissing=function(t){v(!!t.missing,"Tried to deserialize a missing document from a found document."),v(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new ft(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):g("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case We.Added:return"ADD";case We.Current:return"CURRENT";case We.NoChange:return"NO_CHANGE";case We.Removed:return"REMOVE";case We.Reset:return"RESET";default:return g("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof ze)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof qe){var e;if(t.newDoc instanceof ht)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof ft)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof He){var n=void 0;return t.cause&&(n={code:Ee(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e;if("targetChange"in t){en(t.targetChange,"targetChange");var n=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=t.targetChange.resumeToken||this.emptyByteString(),o=t.targetChange.cause,a=o&&this.fromRpcStatus(o);e=new He(n,r,i,a||null)}else if("documentChange"in t){en(t.documentChange,"documentChange"),en(t.documentChange.document,"documentChange.name"),en(t.documentChange.document.name,"documentChange.document.name"),en(t.documentChange.document.updateTime,"documentChange.document.updateTime");var s=t.documentChange,u=this.fromName(s.document.name),l=this.fromVersion(s.document.updateTime),c=this.fromFields(s.document.fields||{}),h=new ht(u,l,c,{},s.document);e=new qe(s.targetIds||[],s.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){en(t.documentDelete,"documentDelete"),en(t.documentDelete.document,"documentDelete.document");var f=t.documentDelete;u=this.fromName(f.document),l=f.readTime?this.fromVersion(f.readTime):$t.forDeletedDoc(),h=new ft(u,l),e=new qe([],f.removedTargetIds||[],h.key,h)}else if("documentRemove"in t){en(t.documentRemove,"documentRemove"),en(t.documentRemove.document,"documentRemove");var p=t.documentRemove;u=this.fromName(p.document),e=new qe([],p.removedTargetIds||[],u,null)}else{if(!("filter"in t))return g("Unknown change type "+JSON.stringify(t));en(t.filter,"filter"),en(t.filter.targetId,"filter.targetId");var d=t.filter,y=new be(d.count||0);e=new ze(d.targetId,y)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?We.NoChange:"ADD"===t?We.Added:"REMOVE"===t?We.Removed:"CURRENT"===t?We.Current:"RESET"===t?We.Reset:g("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return $t.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?$t.MIN:e.readTime?this.fromVersion(e.readTime):$t.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof ce)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof pe)e={delete:this.toName(t.key)};else if(t instanceof he)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof fe))return g("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ue.NONE;if(t.update){en(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new he(r,i,o,n)}return new ce(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new pe(r,n);if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new fe(r,a)}return g("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return v(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ue.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ue.exists(t.exists):ue.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new ae(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(v(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof de)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ye)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof me)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ge)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw g("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)v("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=de.instance;else if("appendMissingElements"in t)n=new ye((t.appendMissingElements.values||[]).map(function(t){return e.fromValue(t)}));else if("removeAllFromArray"in t)n=new me((t.removeAllFromArray.values||[]).map(function(t){return e.fromValue(t)}));else if("increment"in t){var r=this.fromValue(t.increment);v(r instanceof Ct,"NUMERIC_ADD transform requires a NumberValue"),n=new ge(r)}else g("Unknown transform proto: "+JSON.stringify(t));var i=ut.fromServerFormat(t.fieldPath);return new oe(i,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return v(1===e,"DocumentsTarget contained other than 1 document: "+e),qt.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(v(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(v(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var l=null;n.startAt&&(l=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new qt(e,i,s,a,u,l,c)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case te.Listen:return null;case te.ExistenceFilterMismatch:return"existence-filter-mismatch";case te.LimboResolution:return"limbo-document";default:return g("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Ht?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):g("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Yt(r,n)},t.prototype.toDirection=function(t){return Xe[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Gt.ASCENDING;case"DESCENDING":return Gt.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return $e[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Wt.EQUAL;case"GREATER_THAN":return Wt.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Wt.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Wt.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Wt.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Wt.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return g("Unspecified relation");default:return g("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ut.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Zt(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof Ht?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:g("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new Ht(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Kt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof Qt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:g("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Kt(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Qt(n);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return ut.fromServerFormat(t)});return ie.fromArray(e)},t}(),on=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),an=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},t.prototype.onNetworkUnavailable=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},t}(),sn=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),un="Connection",ln={BatchGetDocuments:"batchGet",Commit:"commit"},cn="gl-js/ fire/"+l,hn=function(){function t(t){this.databaseId=t.databaseId,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=cn},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,a){var u=new s.XhrIo;u.listenOnce(s.EventType.COMPLETE,function(){try{switch(u.getLastErrorCode()){case s.ErrorCode.NO_ERROR:var e=u.getResponseJson();d(un,"XHR received:",JSON.stringify(e)),o(e);break;case s.ErrorCode.TIMEOUT:d(un,'RPC "'+t+'" timed out'),a(new S(_.DEADLINE_EXCEEDED,"Request time out"));break;case s.ErrorCode.HTTP_ERROR:var n=u.getStatus();d(un,'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0?a(new S(function(t){switch(t){case 200:return _.OK;case 400:return _.INVALID_ARGUMENT;case 401:return _.UNAUTHENTICATED;case 403:return _.PERMISSION_DENIED;case 404:return _.NOT_FOUND;case 409:return _.ABORTED;case 416:return _.OUT_OF_RANGE;case 429:return _.RESOURCE_EXHAUSTED;case 499:return _.CANCELLED;case 500:return _.UNKNOWN;case 501:return _.UNIMPLEMENTED;case 503:return _.UNAVAILABLE;case 504:return _.DEADLINE_EXCEEDED;default:return t>=200&&t<300?_.OK:t>=400&&t<500?_.FAILED_PRECONDITION:t>=500&&t<600?_.INTERNAL:_.UNKNOWN}}(n),"Server responded with status "+u.getStatusText())):(d(un,'RPC "'+t+'" failed'),a(new S(_.UNAVAILABLE,"Connection failed.")));break;default:g('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{d(un,'RPC "'+t+'" completed.')}});var l=JSON.stringify(e);d(un,"XHR sending: ",i+" "+l);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),u.send(i,"POST",l,c,15)})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=s.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),u.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d(un,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),l=!1,c=!1,h=new sn({sendFn:function(t){c?d(un,"Not sending because WebChannel is closed:",t):(l||(d(un,"Opening WebChannel transport."),a.open(),l=!0),d(un,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),f=function(t,e){a.listen(t,function(t){try{e(t)}catch(n){setTimeout(function(){throw n},0)}})};return f(s.WebChannel.EventType.OPEN,function(){c||d(un,"WebChannel transport opened.")}),f(s.WebChannel.EventType.CLOSE,function(){c||(c=!0,d(un,"WebChannel transport closed"),h.callOnClose())}),f(s.WebChannel.EventType.ERROR,function(t){c||(c=!0,d(un,"WebChannel transport errored:",t),h.callOnClose(new S(_.UNAVAILABLE,"The operation could not be completed")))}),f(s.WebChannel.EventType.MESSAGE,function(t){if(!c){var e=t.data[0];v(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){d(un,"WebChannel received error:",n);var r=n.status,i=function(t){var e=we[r];if(void 0!==e)return Se(e)}(),o=n.message;void 0===i&&(i=_.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),c=!0,h.callOnClose(new S(i,o)),a.close()}else d(un,"WebChannel received:",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},t.prototype.makeUrl=function(t){var e=ln[t];v(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();b.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new hn(t))},t.prototype.newConnectivityMonitor=function(){return this.window?new an:new on},t.prototype.newSerializer=function(t){return new rn(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}()));var fn,pn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),dn=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}();!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection"}(fn||(fn={}));var yn=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new S(_.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),mn=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw y("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),v(e>=0,"Attempted to schedule an operation with a negative delay of "+e),v(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=yn.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&g("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){v(t===fn.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==fn.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);v(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),gn="\x01",vn="\x01",bn="\x10",wn="\x11";function _n(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=En(e)),e=Sn(t.get(n),e);return En(e)}function Sn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=gn+bn;break;case gn:n+=gn+wn;break;default:n+=o}}return n}function En(t){return t+gn+vn}function Cn(t){var e=t.length;if(v(e>=2,"Invalid path "+t),2===e)return v(t.charAt(0)===gn&&t.charAt(1)===vn,"Non-empty path "+t+" had length 2"),at.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(gn,o);switch((a<0||a>n)&&g('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case vn:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case bn:i+=t.substring(o,a),i+="\0";break;case wn:i+=t.substring(o,a+1);break;default:g('Invalid encoded resource path: "'+t+'"')}o=a+2}return new at(r)}var Tn=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,v(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&v(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&v(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=s.applyToLocalView(e,e,this.localWriteTime));for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.applyToLocalView(e,i,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Oe())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&G(this.mutations,t.mutations)&&G(this.baseMutations,t.baseMutations)},t}(),In=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){v(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Ae(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),kn=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&g("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),xn=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return v(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return On(t).iterate({index:hr.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=Nn(n),Rn(t).put(e)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=Nn(e),Rn(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Pn(t),a=On(t);return a.add({}).next(function(s){v("number"==typeof s,"Auto-generated key is not a number");var u=new Tn(s,e,n,r),l=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var c=[],h=0,f=r;h<f.length;h++){var p=f[h],d=fr.key(i.userId,p.key.path,s);c.push(a.put(l)),c.push(o.put(d,fr.PLACEHOLDER)),c.push(i.indexManager.addToCollectionParentIndex(t,p.key.path.popLast()))}return kn.waitFor(c).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return On(t).get(e).next(function(t){return t?(v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?kn.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this;return this.getMutationQueueMetadata(t).next(function(r){var i=e+1,o=IDBKeyRange.lowerBound([n.userId,i]),a=null;return On(t).iterate({index:hr.userMutationsIndex,range:o},function(t,e,r){e.userId===n.userId&&(v(e.batchId>=i,"Should have found mutation after "+i),a=n.serializer.fromDbMutationBatch(e)),r.done()}).next(function(){return a})})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return On(t).loadAll(hr.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=fr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Pn(t).iterate({range:i},function(r,i,a){var s=r[0],u=r[2],l=Cn(r[1]);if(s===n.userId&&e.path.isEqual(l))return On(t).get(u).next(function(t){if(!t)throw g("Dangling document-mutation reference found: "+r+" which points to "+u);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(t))});a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ne(K),i=[];return e.forEach(function(e){var o=fr.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Pn(t).iterate({range:a},function(t,i,o){var a=t[0],s=t[2],u=Cn(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()});i.push(s)}),kn.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;v(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=fr.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ne(K);return Pn(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[2],l=Cn(t[1]);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(u)):o.done()}).next(function(){return n.lookupMutationBatches(t,s)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(On(t).get(e).next(function(t){if(null===t)throw g("Dangling document-mutation reference found, which points to "+e);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),kn.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return An(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),kn.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return kn.resolve();var r=IDBKeyRange.lowerBound(fr.prefixForUser(e.userId)),i=[];return Pn(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=Cn(t[1]);i.push(o)}else r.done()}).next(function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return Dn(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return Rn(t).get(this.userId).next(function(t){return t||new cr(e.userId,-1,"")})},t}();function Dn(t,e,n){var r=fr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Pn(t).iterate({range:o,keysOnly:!0},function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()}).next(function(){return a})}function An(t,e,n){var r=t.store(hr.store),i=t.store(fr.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){v(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var f=h[c],p=fr.key(e,f.key.path,n.batchId);o.push(i.delete(p)),l.push(f.key)}return kn.waitFor(o).next(function(){return l})}function Nn(t){return t instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function On(t){return Vr.getStore(t,hr.store)}function Pn(t){return Vr.getStore(t,fr.store)}function Rn(t){return Vr.getStore(t,cr.store)}var Mn=1,Ln=function(t){return t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine",t}({}),Fn=function(){function t(t,e){this.generatorId=t,v((t&Mn)===t,"Generator ID "+t+" contains more than "+Mn+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<Mn,t},t.prototype.after=function(t){return this.seek(t+(1<<Mn)),this.next()},t.prototype.seek=function(t){v((t&Mn)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(Ln.QueryCache,2)},t.forSyncEngine=function(){return new t(Ln.SyncEngine)},t}(),Un=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return v(t.isAvailable(),"IndexedDB not supported in current environment."),d("SimpleDb","Opening database:",e),new kn(function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){i(new t(e.target.result))},a.onblocked=function(){o(new S(_.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new S(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},a.onupgradeneeded=function(t){d("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new jn(a.transaction);r.createOrUpgrade(n,i,t.oldVersion,ar).next(function(){d("SimpleDb","Database upgrade to version "+ar+" complete")})}}).toPromise()},t.delete=function(t){return d("SimpleDb","Removing database:",t),qn(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var e=window.navigator.userAgent,n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.getStore=function(t,e){return t.store(e)},t.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_")[0]:"-1";return Number(n)},t.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){var r=jn.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),kn.reject(t)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),Vn=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return qn(this.dbCursor.delete())},t}(),jn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new dn,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return v(!!e,"Object store not part of transaction: "+t),new Bn(e)},t}(),Bn=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),qn(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),qn(this.store.add(t))},t.prototype.get=function(t){var e=this;return qn(this.store.get(t)).next(function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),qn(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),qn(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new kn(function(n,r){e.onerror=function(t){r(t.target.error)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new kn(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Vn(i),a=e(i.primaryKey,i.value,o);if(a instanceof kn){var s=a.catch(function(t){return o.done(),kn.reject(t)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return kn.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(v(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function qn(t){return new kn(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.error)}})}var zn=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Fn.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return $t.fromTimestamp(new et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return Qn(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Wn(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return v(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Wn(t).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return kn.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return Wn(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return Hn(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,Vr.getStore(n,br.store)).put(br.key,e);var n},t.prototype.saveQueryData=function(t,e){return Wn(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Wn(t).iterate({range:i,index:gr.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Kn(t);return e.forEach(function(e){var a=_n(e.path);i.push(o.put(new vr(n,a))),i.push(r.referenceDelegate.addReference(t,e))}),kn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Kn(t);return kn.forEach(e,function(e){var o=_n(e.path);return kn.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Kn(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Kn(t),i=Oe();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=Cn(t[1]),o=new lt(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=_n(e.path),r=IDBKeyRange.bound([n],[Y(n)],!1,!0),i=0;return Kn(t).iterate({index:vr.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return Wn(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function Wn(t){return Vr.getStore(t,gr.store)}function Hn(t){return Un.getStore(t,br.store).get(br.key).next(function(t){return v(null!==t,"Missing metadata row."),t})}function Qn(t){return Hn(t).next(function(t){return t.highestListenSequenceNumber})}function Kn(t){return Vr.getStore(t,vr.store)}var Gn=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(o[0].isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){k(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return x(this.inner)},t}(),Yn=function(){function t(){this.changes=Te(),this.documentSizes=new Gn(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges().get(e);return r?kn.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.getEntries=function(t,e){var n=this;return this.getAllFromCache(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return v(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Zn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Jn=function(){function t(t,e,n){this.serializer=t,this.indexManager=e,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=Un.getStore(t,Sr.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(e.length>0){for(var i=tr(t),o=Oe(),a=0,s=e;a<s.length;a++){var u=s[a],l=u.key,c=u.doc;r.push(i.put(nr(l),c)),o=o.add(l),r.push(this.indexManager.addToCollectionParentIndex(t,l.path.popLast()))}this.keepDocumentChangeLog&&r.push(er(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return kn.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=tr(t),r=nr(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return rr(t)}):kn.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return tr(t).get(nr(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return tr(t).get(nr(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:rr(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Ie();return this.forEachDbEntry(t,e,function(t,e){r=r.insert(t,e?n.serializer.fromDbRemoteDocument(e):null)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=Ie(),i=new dt(lt.comparator);return this.forEachDbEntry(t,e,function(t,e){e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i=i.insert(t,rr(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return kn.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return tr(t).iterate({range:r},function(t,e,r){for(var a=lt.fromSegments(t);o&&lt.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this;v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=xe(),i=e.path.length+1,o=e.path.toArray(),a=IDBKeyRange.lowerBound(o);return tr(t).iterate({range:a},function(t,o,a){if(t.length===i){var s=n.serializer.fromDbRemoteDocument(o);e.path.isPrefixOf(s.key.path)?s instanceof ht&&e.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;v(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Oe(),r=Te(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=er(t);return a.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(a).next(function(){return kn.reject(new S(_.DATA_LOSS,Zn))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new ft(n,$t.forDeletedDoc());r=r.insert(n,e)}))}),kn.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return er(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new $n(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Xn(t).get(mr.key).next(function(t){return v(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return Xn(t).put(mr.key,e)},t.prototype.updateSize=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},t}();function Xn(t){return Vr.getStore(t,mr.store)}var $n=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentCache.serializer.toDbRemoteDocument(n),a=e.documentSizes.get(t);v(void 0!==a,"Attempting to change document "+t.toString()+" without having read it first");var s=rr(o);r+=s-a,i.push({key:t,doc:o})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(Yn);function tr(t){return Vr.getStore(t,yr.store)}function er(t){return Vr.getStore(t,Sr.store)}function nr(t){return t.path.toArray()}function rr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var ir=function(){function t(){this.collectionParentIndex=new or}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),kn.resolve()},t.prototype.getCollectionParents=function(t,e){return kn.resolve(this.collectionParentIndex.getEntries(e))},t}(),or=function(){function t(){this.index={}}return t.prototype.add=function(t){v(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ne(at.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.getEntries=function(t){return(this.index[t]||new ne(at.comparator)).toArray()},t}(),ar=8,sr=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;v(n<r&&n>=0&&r<=ar,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(lr.store)}(t),function(t){t.createObjectStore(cr.store,{keyPath:cr.keyPath}),t.createObjectStore(hr.store,{keyPath:hr.keyPath,autoIncrement:!0}).createIndex(hr.userMutationsIndex,hr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(fr.store)}(t),_r(t),function(t){t.createObjectStore(yr.store)}(t));var o=kn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(vr.store),t.deleteObjectStore(gr.store),t.deleteObjectStore(br.store)}(t),_r(t)),o=o.next(function(){return function(t){var e=t.store(br.store),n=new br(0,0,$t.MIN.toTimestamp(),0);return e.put(br.key,n)}(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(hr.store).loadAll().next(function(n){t.deleteObjectStore(hr.store),t.createObjectStore(hr.store,{keyPath:hr.keyPath,autoIncrement:!0}).createIndex(hr.userMutationsIndex,hr.userMutationsKeyPath,{unique:!0});var r=e.store(hr.store),i=n.map(function(t){return r.put(t)});return kn.waitFor(i)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore(Er.store,{keyPath:Er.keyPath})}(t),function(t){t.createObjectStore(Sr.store,{keyPath:"id",autoIncrement:!0})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(mr.store)}(t),i.addDocumentGlobal(e)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(t,e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(yr.store).iterate(function(t,n){e+=rr(n)}).next(function(){var n=new mr(e);return t.store(mr.store).put(mr.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(cr.store),r=t.store(hr.store);return n.loadAll().next(function(n){return kn.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(hr.userMutationsIndex,i).next(function(r){return kn.forEach(r,function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return An(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(vr.store),n=t.store(yr.store);return Qn(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new at(n),a=function(t){return[0,_n(t)]}(o);r.push(e.get(a).next(function(n){return n?kn.resolve():function(n){return e.put(new vr(0,_n(n),t))}(o)}))}).next(function(){return kn.waitFor(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(wr.store,{keyPath:wr.keyPath});var n=e.store(wr.store),r=new or,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:_n(i)})}};return e.store(yr.store).iterate({keysOnly:!0},function(t,e){var n=new at(t);return i(n.popLast())}).next(function(){return e.store(fr.store).iterate({keysOnly:!0},function(t,e){var n=Cn(t[1]);return i(n.popLast())})})},t}(),ur=function(){return function(t,e){this.seconds=t,this.nanoseconds=e}}(),lr=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),cr=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),hr=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),fr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,_n(e)]},t.key=function(t,e,n){return[t,_n(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),pr=function(){return function(t,e){this.path=t,this.readTime=e}}(),dr=function(){return function(t,e){this.path=t,this.version=e}}(),yr=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),mr=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),gr=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),vr=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,v(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),br=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),wr=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function _r(t){t.createObjectStore(vr.store,{keyPath:vr.keyPath}).createIndex(vr.documentTargetsIndex,vr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(gr.store,{keyPath:gr.keyPath}).createIndex(gr.queryTargetsIndexName,gr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(br.store)}var Sr=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}(),Er=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}(),Cr=[cr.store,hr.store,fr.store,yr.store,gr.store,lr.store,br.store,vr.store].concat([Er.store,Sr.store]).concat([mr.store]).concat([wr.store]),Tr=function(){function t(){this.collectionParentsCache=new or}return t.prototype.addToCollectionParentIndex=function(t,e){if(v(e.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(e)){v(e.length>=1,"Invalid collection path.");var n=e.lastSegment(),r=e.popLast();return Ir(t).put({collectionId:n,parent:_n(r)})}return kn.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Y(e),""],!1,!0);return Ir(t).loadAll(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Cn(o.parent))}return n})},t}();function Ir(t){return Vr.getStore(t,wr.store)}var kr=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=lt.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new ft(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=lt.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new pt(e,n)):g("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof ht){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t);return new yr(null,null,e,i=t.hasCommittedMutations)}if(t instanceof ft){var n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),i=t.hasCommittedMutations;return new yr(null,new pr(n,r),null,i)}return t instanceof pt?(n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),new yr(new dr(n,r),null,null,!0)):g("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new ur(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new et(t.seconds,t.nanoseconds);return $t.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new hr(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=et.fromMillis(t.localWriteTimeMs);return new Tn(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(_n(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Oe(),n=0,r=t;n<r.length;n++)e=e.add(new lt(Cn(r[n])));return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new ee(e,t.targetId,te.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){v(te.Listen===t.purpose,"Only queries with purpose "+te.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new gr(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function xr(t,e){var n=t[1],r=e[1],i=K(t[0],e[0]);return 0===i?K(n,r):i}var Dr=function(){function t(t){this.maxElements=t,this.buffer=new ne(xr),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();xr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Ar={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),Or=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Nr.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(fn.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(jr)})},t}(),Pr=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return kn.resolve(pn.INVALID);var r=new Dr(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Nr.COLLECTION_DISABLED?(d("LruGarbageCollector","Garbage collection skipped; disabled"),kn.resolve(Ar)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Ar):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,i,o,a,s,u,l,c=this;return o=Date.now(),this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,u=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return l=Date.now(),f()<=h.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-o)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(l-u)+"ms\nTotal Duration: "+(l-o)+"ms"),kn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Rr="IndexedDbPersistence",Mr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Fr="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Ur=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return a.__extends(e,t),e}(function(){return function(){}}()),Vr=function(){function t(e,n,r,i,o,a,s){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new S(_.UNIMPLEMENTED,Fr);if(this.referenceDelegate=new zr(this,a),this.dbName=e+t.MAIN_DATABASE,this.serializer=new kr(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new zn(this.referenceDelegate,this.serializer),this.indexManager=new Tr,this.remoteDocumentCache=new Jn(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new S(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof Ur)return Un.getStore(t.simpleDbTransaction,e);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o,s){return a.__awaiter(this,void 0,void 0,function(){var u;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(u=new t(e,n,r,i,o,s)).start()];case 1:return a.sent(),[2,u]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,s,u){return a.__awaiter(this,void 0,void 0,function(){var l;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(l=new t(e,n,r,i,o,s,u)).start()];case 1:return a.sent(),[2,l]}})})},t.prototype.start=function(){var t=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),Un.openOrCreate(this.dbName,ar,new sr(this.serializer)).then(function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.startRemoteDocumentCache()}).then(function(){return t.simpleDb.runTransaction("readonly",[br.store],function(e){return Qn(e).next(function(e){t.listenSequence=new pn(e,t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",Cr,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener(function(n){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",Cr,function(e){return qr(e).put(new Er(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return Br(t).get(lr.key).next(function(t){return kn.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return qr(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return a.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,Er.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return kn.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if((e=e.filter(function(t){return t.clientId!==r.clientId})).length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(fn.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Br(t).get(lr.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new S(_.FAILED_PRECONDITION,Lr);return!1}}return!(!e.networkEnabled||!e.inForeground)||qr(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&d(Rr,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[lr.store,Er.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[Er.store],function(e){return qr(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},t.clearPersistence=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return t.isAvailable()?[4,Un.delete(e+t.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),xn.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getQueryCache=function(){return v(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;return d(Rr,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",Cr,function(i){return"readwrite-primary"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw y("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new S(_.FAILED_PRECONDITION,Mr);return n(new Ur(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Ur(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Br(t).get(lr.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new S(_.FAILED_PRECONDITION,Lr)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new lr(this.clientId,this.allowTabSynchronization,Date.now());return Br(t).put(lr.key,e)},t.isAvailable=function(){return Un.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Br(t);return n.get(lr.key).next(function(t){return e.isLocalClient(t)?(d(Rr,"Releasing primary lease."),n.delete(lr.key)):kn.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(y("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return d(Rr,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(n){return y(Rr,"Failed to get zombied client id.",n),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){y("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function jr(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){if(!function(t){return t.code===_.FAILED_PRECONDITION&&t.message===Mr}(t))throw t;return d(Rr,"Unexpectedly lost primary lease"),[2]})})}function Br(t){return t.store(lr.store)}function qr(t){return t.store(Er.store)}var zr=function(){function t(t,e){this.db=t,this.garbageCollector=new Pr(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Wr(t,e)},t.prototype.removeReference=function(t,e){return Wr(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Wr(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?kn.resolve(!0):function(t,e){var n=!1;return Rn(t).iterateSerial(function(r){return Dn(t,r,e).next(function(t){return t&&(n=!0),kn.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(t,function(a,s){if(s<=e){var u=n.isPinned(t,a).next(function(e){if(!e)return r++,n.removeOrphanedDocument(t,a).next(function(t){i+=t})});o.push(u)}}).next(function(){return kn.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(t,-i)}).next(function(){return r})},t.prototype.removeOrphanedDocument=function(t,e){var n,r=0,i=this.db.getRemoteDocumentCache();return kn.waitFor([Kn(t).delete((n=e,[0,_n(n.path)])),i.removeEntry(t,e).next(function(t){r+=t})]).next(function(){return r})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Wr(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=Kn(t),i=pn.INVALID;return r.iterate({index:vr.documentTargetsIndex},function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==pn.INVALID&&e(new lt(Cn(n)),i),i=a,n=o):i=pn.INVALID}).next(function(){i!==pn.INVALID&&e(new lt(Cn(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Wr(t,e){return Kn(t).put(function(t,e){return new vr(0,_n(t.path),e)}(e,t.currentSequenceNumber))}var Hr=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Ie();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=Te();return i.forEach(function(t,e){e||(e=new ft(t,$t.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new lt(e)).next(function(t){var e=xe();return t instanceof ht&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e){var n=this;v(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=e.collectionGroup,i=xe();return this.indexManager.getCollectionParents(t,r).next(function(o){return kn.forEach(o,function(o){var a=e.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(t,a).next(function(t){t.forEach(function(t,e){i=i.insert(t,e)})})}).next(function(){return i})})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],l=u.key;if(e.path.isImmediateParentOf(l.path)){var c=n.get(l),h=u.applyToLocalView(c,c,o.localWriteTime);n=h instanceof ht?n.insert(l,h):n.remove(l)}}}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t}(),Qr=function(){function t(){this.refsByKey=new ne(Kr.compareByKey),this.refsByTarget=new ne(Kr.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Kr(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Kr(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=lt.EMPTY,r=new Kr(n,t),i=new Kr(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=lt.EMPTY,n=new Kr(e,t),r=new Kr(e,t+1),i=Oe();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Kr(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Kr=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return lt.comparator(t.key,e.key)||K(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return K(t.targetOrBatchId,e.targetOrBatchId)||lt.comparator(t.key,e.key)},t}(),Gr=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Qr,this.queryDataByTarget={},v(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Hr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new Hr(e.remoteDocuments,e.mutationQueue,e.persistence.getIndexManager()),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],a=Oe(),s=0,u=r;s<u.length;s++){i.push((p=u[s]).batchId);for(var l=0,c=p.mutations;l<c.length;l++)a=a.add(c[l].key)}for(var h=0,f=t;h<f.length;h++){var p;o.push((p=f[h]).batchId);for(var d=0,y=p.mutations;d<y.length;d++)a=a.add(y[d].key)}return e.localDocuments.getDocuments(n,a).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this,n=et.now(),r=t.reduce(function(t,e){return t.add(e.key)},Oe());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return e.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=t;a<s.length;a++){var u=s[a],l=r.get(u.key);if(!u.isIdempotent){var c=u.fieldMask;if(c){var h=l instanceof ht?c.applyTo(l.data):Rt.EMPTY;o.push(new he(u.key,h,c,ue.exists(!0)))}}}return e.mutationQueue.addMutationBatch(i,n,o,t).next(function(t){var e=t.applyToLocalDocumentSet(r);return{batchId:t.batchId,changes:e}})})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):kn.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return v(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var o=[],a=Oe();I(e.targetChanges,function(r,s){var u=n.queryDataByTarget[r];if(u){s.addedDocuments.forEach(function(t){a=a.add(t)}),s.modifiedDocuments.forEach(function(t){a=a.add(t)}),o.push(n.queryCache.removeMatchingKeys(i,s.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,s.addedDocuments,r)}));var l=s.resumeToken;if(l.length>0){var c=u;u=u.copy({resumeToken:l,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[r]=u,t.shouldPersistQueryData(c,u,s)&&o.push(n.queryCache.updateQueryData(i,u))}}});var s=Te(),u=Oe();e.documentUpdates.forEach(function(t,e){u=u.add(t)}),o.push(r.getEntries(i,u).next(function(t){e.documentUpdates.forEach(function(u,l){var c=t.get(u);null==c||l.version.isEqual($t.MIN)||a.has(l.key)&&!c.hasPendingWrites||l.version.compareTo(c.version)>=0?(r.addEntry(l),s=s.insert(u,l)):d("LocalStore","Ignoring outdated watch update for ",u,". Current version:",c.version," Watch version:",l.version),e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))})}));var l=e.snapshotVersion;if(!l.isEqual($t.MIN)){var c=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(t){return v(l.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+l+" < "+t),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,l)});o.push(c)}return kn.waitFor(o).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,s)})})},t.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return kn.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),kn.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,kn.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new ee(t,i,te.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return v(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this;return this.persistence.runTransaction("Release query",e?"readwrite":"readwrite-primary",function(r){return n.queryCache.getQueryData(r,t).next(function(i){v(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?kn.resolve():kn.forEach(s,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=kn.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,a=e.docVersions.get(r);v(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o):v(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Yr=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new ne(Kr.compareByKey)}return t.prototype.checkEmpty=function(t){return kn.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,kn.resolve()},t.prototype.getLastStreamToken=function(t){return kn.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,kn.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){v(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Tn(i,e,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Kr(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return kn.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return kn.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return v(null!=n,"Failed to find local mutation batch."),kn.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.indexOfBatchId(e+1),r=n<0?0:n;return kn.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},t.prototype.getAllMutationBatches=function(t){return kn.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Kr(e,0),i=new Kr(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){v(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),kn.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ne(K);return e.forEach(function(t){var e=new Kr(t,0),i=new Kr(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){v(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),kn.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;lt.isDocumentKey(i)||(i=i.child(""));var o=new Kr(new lt(i),0),a=new ne(K);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),kn.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;v(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return kn.forEach(e.mutations,function(i){var o=new Kr(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Kr(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return kn.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),kn.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return v(n.batchId===t,"If found batch must match"),n},t}(),Zr=function(){function t(t){this.persistence=t,this.queries=new Gn(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=$t.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Qr,this.targetCount=0,this.targetIdGenerator=Fn.forQueryCache()}return t.prototype.getTargetCount=function(t){return kn.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),kn.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return kn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return kn.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,kn.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),kn.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return v(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,kn.resolve()},t.prototype.updateQueryData=function(t,e){return v(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),kn.resolve()},t.prototype.removeQueryData=function(t,e){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,kn.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=e&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),kn.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return kn.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return kn.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return g("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),kn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),kn.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),kn.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return kn.resolve(n)},t.prototype.containsKey=function(t,e){return kn.resolve(this.references.containsKey(e))},t}(),Jr=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new dt(lt.comparator),this.newDocumentChanges=Oe(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i],s=a.maybeDocument.key;this.docs=this.docs.insert(s,a),this.newDocumentChanges=this.newDocumentChanges.add(s),r.push(this.indexManager.addToCollectionParentIndex(t,s.path.popLast()))}return this.size+=n,kn.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,kn.resolve(n.size)):kn.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return kn.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return kn.resolve(this.docs.get(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ie();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),kn.resolve(r)},t.prototype.getSizedEntries=function(t,e){var n=this,r=Ie(),i=new dt(lt.comparator);return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null),i=i.insert(t,e?e.size:0)}),kn.resolve({maybeDocuments:r,sizeMap:i})},t.prototype.getDocumentsMatchingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=xe(),r=new lt(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.value.maybeDocument;if(!e.path.isPrefixOf(o.key.path))break;a instanceof ht&&e.matches(a)&&(n=n.insert(a.key,a))}return kn.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return kn.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=Te();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new ft(t,$t.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=Oe(),kn.resolve(n)},t.prototype.newChangeBuffer=function(){return new Xr(this.sizer,this)},t.prototype.getSize=function(t){return kn.resolve(this.size)},t}(),Xr=function(t){function e(e,n){var r=t.call(this)||this;return r.sizer=e,r.documentCache=n,r}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentSizes.get(t);v(void 0!==o,"Attempting to change document "+t.toString()+" without having read it first");var a=e.sizer(n);r+=a-o,i.push({maybeDocument:n,size:a})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(Yn),$r=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new pn(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Zr(this),this.indexManager=new ir,this.remoteDocumentCache=new Jr(this.indexManager,function(t){return n.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new ni(t,new kr(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new ei(t)})},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Yr(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new ti(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return kn.or((n=this.mutationQueues,r=[],k(n,function(t,e){return r.push(e)}),r).map(function(n){return function(){return n.containsKey(t,e)}}));var n,r},t}(),ti=function(){return function(t){this.currentSequenceNumber=t}}(),ei=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),kn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),kn.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),kn.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return kn.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(e){return e?kn.resolve():n.removeEntry(t,r).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return kn.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return kn.resolve(n.inMemoryPins.containsKey(e))}])},t}(),ni=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new Gn(function(t){return _n(t.path)}),this.garbageCollector=new Pr(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return kn.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return kn.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?kn.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?kn.resolve():(r++,i.removeEntry(t,o).next())})}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),kn.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),kn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),kn.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),kn.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw g("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return kn.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return kn.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return kn.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),ri=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),ii=function(t){return t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t}({}),oi=1e3,ai=6e4,si=1.5,ui=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=ii.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new ri(t,e,oi,si,ai)}return t.prototype.isStarted=function(){return this.state===ii.Starting||this.state===ii.Open||this.state===ii.Backoff},t.prototype.isOpen=function(){return this.state===ii.Open},t.prototype.start=function(){this.state!==ii.Error?(v(this.state===ii.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(ii.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=ii.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.isOpen()?[2,this.close(ii.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(t===ii.Error||jt(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==ii.Error?this.backoff.reset():e&&e.code===_.RESOURCE_EXHAUSTED?(y(e.toString()),y("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;v(this.state===ii.Initial,"Must be in initial state to auth"),this.state=ii.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new S(_.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;v(this.state===ii.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return v(e.state===ii.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=ii.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;v(this.state===ii.Error,"Should only perform backoff when in Error state"),this.state=ii.Backoff,this.backoff.backoffAndRun(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return v(this.state===ii.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=ii.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return v(this.isStarted(),"Can't handle server close on non-started stream"),d("PersistentStream","close with error: "+t),this.stream=null,this.close(ii.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),li=function(t){function e(e,n,r,i,o){var a=t.call(this,e,fn.ListenStreamConnectionBackoff,fn.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(ui),ci=function(t){function e(e,n,r,i,o){var a=t.call(this,e,fn.WriteStreamConnectionBackoff,fn.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return a.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(v(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return v(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(ui),hi=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new ci(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new li(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Te();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);v(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),fi=function(){function t(t){this.datastore=t,this.readVersions=Ae(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof ht)e=t.version;else{if(!(t instanceof ft))throw g("Document in a transaction was a "+t.constructor.name);e=$t.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new S(_.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof ft||t instanceof ht?e.recordVersion(t):g("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new S(_.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?ue.updateTime(e):ue.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual($t.forDeletedDoc()))throw new S(_.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?ue.updateTime(e):ue.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new pe(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,$t.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}(),pi=function(t){return t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline",t}({}),di=function(t){return t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState",t}({}),yi=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=pi.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(pi.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(fn.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,v(t.state===pi.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(pi.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===pi.Online?(this.setAndBroadcast(pi.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(pi.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===pi.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(y(e),this.shouldWarnClientIsOffline=!1):d("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),mi="RemoteStore",gi=function(){function t(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(t){n.enqueueAndForget(function(){return a.__awaiter(o,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(d(mi,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new yi(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(pi.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(pi.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(d(mi,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return d(mi,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(pi.Unknown),[2]}})})},t.prototype.listen=function(t){v(!C(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){v(C(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),x(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(pi.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Ke(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!x(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(e){return I(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return void 0===t&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(pi.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(pi.Online),t instanceof He&&t.state===We.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof qe?this.watchChangeAggregator.handleDocumentChange(t):t instanceof ze?this.watchChangeAggregator.handleExistenceFilter(t):(v(t instanceof He,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual($t.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;v(!t.isEqual($t.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return I(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:w()}),e.sendUnwatchRequest(t);var r=new ee(n.query,t,te.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;v(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return C(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)}).catch(jr)},t.prototype.onMutationResult=function(t,e){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=In.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(n){return void 0===t&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},t.prototype.handleHandshakeError=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return _e(t.code)?(d(mi,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(jr)]):[2]})})},t.prototype.handleWriteError=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(r){return _e(i=t.code)&&i!==_.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2];var i})})},t.prototype.createTransaction=function(){return new fi(this.datastore)},t.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(pi.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},t.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(d(mi,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(pi.Unknown),e.label=4;case 4:return[2]}})})},t}(),vi=function(){return function(){this.listeners=[]}}(),bi=function(){function t(t){this.syncEngine=t,this.queries=new Gn(function(t){return t.canonicalId()}),this.onlineState=pi.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new vi,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return a.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,a=i.listeners;o<a.length;o++)a[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),wi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=pi.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(v(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Le.Metadata&&e.push(i)}t=new Ve(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==pi.Offline?(v(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===pi.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Ve.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),_i=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=Oe(),i=Oe(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Le.Added:r=r.add(s.doc.key);break;case Le.Removed:i=i.add(s.doc.key)}}return new t(e,r,i)},t}(),Si=function(){return function(t){this.key=t}}(),Ei=function(){return function(t){this.key=t}}(),Ci=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Oe(),this.mutatedKeys=Oe(),this.documentSet=new Me(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Ue,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),c=e instanceof ht?e:null;c&&(v(t.isEqual(c.key),"Mismatching keys found in document changes: "+t+" != "+c.key),c=n.query.matches(c)?c:null);var h=!!l&&n.mutatedKeys.has(l.key),f=!!c&&(c.hasLocalMutations||n.mutatedKeys.has(c.key)&&c.hasCommittedMutations),p=!1;l&&c?l.data.isEqual(c.data)?h!==f&&(r.track({type:Le.Metadata,doc:c}),p=!0):n.shouldWaitForSyncedDocument(l,c)||(r.track({type:Le.Modified,doc:c}),p=!0,u&&n.query.docComparator(c,u)>0&&(s=!0)):!l&&c?(r.track({type:Le.Added,doc:c}),p=!0):l&&!c&&(r.track({type:Le.Removed,doc:l}),p=!0,u&&(s=!0)),p&&(c?(a=a.add(c),o=f?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var l=a.last();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Le.Removed,doc:l})}return v(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;v(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Le.Added:return 1;case Le.Modified:case Le.Metadata:return 2;case Le.Removed:return 0;default:return g("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Fe.Synced:Fe.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Ve(this.query,t.documentSet,i,o,t.mutatedKeys,s===Fe.Local,u,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===pi.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Ue,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return v(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Oe(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new Ei(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new Si(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=Oe();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Ve.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Fe.Local)},t}(),Ti=function(){return function(t,e,n){this.query=t,this.targetId=e,this.view=n}}(),Ii=function(){return function(t){this.key=t}}(),ki=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Gn(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new dt(lt.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Qr,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Fn.forSyncEngine(),this.isPrimary=void 0,this.onlineState=pi.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){v(null!==t,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,r=t.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var a=new Ci(r,o),s=a.computeDocChanges(i),u=Be.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==pi.Offline),l=a.applyChanges(s,!0===n.isPrimary,u);v(0===l.limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!l.snapshot,"applyChanges for new view should always return a snapshot");var c=new Ti(r,t.targetId,a);return n.queryViewsByQuery.set(r,c),n.queryViewsByTarget[t.targetId]=c,l.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(r){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(i){return e=t.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(t.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(jr)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),v(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!jt(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(i){return Promise.reject(n.wrapUpdateFunctionError(i))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return k(t.targetChanges,function(t,n){var r=e.limboResolutionsByTarget[t];r&&(v(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(jr)},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===di.RemoteStore||!this.isPrimary&&e===di.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);v(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,l=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),(r=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new dt(lt.comparator)).insert(r,new ft(r,$t.forDeletedDoc())),o=Oe().add(r),s=new je($t.MIN,{},new ne(K),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return v(!!(u=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return l.removeAndCleanupQuery(u)}).catch(jr)];case 2:a.sent(),this.syncEngineListener.onWatchError(u.query,e),a.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(d("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):g("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(jr)},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(r){return n.sharedClientState.updateMutationState(t,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(jr)},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new dt(K)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(v(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Si?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof Ei?(d("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):g("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){d("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=qt.atPath(e.path);this.limboResolutionsByTarget[n]=new Ii(e),this.remoteStore.listen(new ee(r,n,te.LimboResolution,pn.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return a.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query).then(function(t){return s.view.computeDocChanges(t,e)}):e}).then(function(t){var i=s.view.applyChanges(t,!0===o.isPrimary,e&&e.targetChanges[s.targetId]);if(o.updateTrackedLimbos(s.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var a=_i.fromSnapshot(s.targetId,i.snapshot);r.push(a)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){v(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n;return a.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,u=this;return a.__generator(this,function(a){switch(a.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],s=Promise.resolve(),I(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?o.push(t):s=s.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,s]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;I(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new dt(lt.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),r=[],i=[],o=function(t){n=n.then(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,o,s;return a.__generator(this,function(a){switch(a.label){case 0:return(n=this.queryViewsByTarget[t])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return a.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(o=a.sent()).snapshot&&i.push(o.snapshot),[3,8];case 4:return v(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(t)];case 5:return v(!!(s=a.sent()),"Query data for target "+t+" not found"),[4,this.localStore.allocateQuery(s)];case 6:return e=a.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:a.sent(),a.label=8;case 8:return r.push(e),[2]}})})})},s=0,u=t;s<u.length;s++)o(u[s]);return n.then(function(){return e.syncEngineListener.onWatchChange(i),r})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var r,i=this;return a.__generator(this,function(o){switch(o.label){case 0:if(this.isPrimary)return d("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,5];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return a.__awaiter(i,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return r=je.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(t){return a.__awaiter(i,void 0,void 0,function(){var e;return a.__generator(this,function(n){switch(n.label){case 0:return function(t){return t.code===_.DATA_LOSS&&t.message===Zn}(t)?(e=[],I(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return this.removeAndCleanupQuery(r=this.queryViewsByTarget[t]),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:g("Unexpected target state: "+e),o.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,l,c,h,f=this;return a.__generator(this,function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(v(!this.queryViewsByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return v(!!(i=p.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=p.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:p.sent(),this.remoteStore.listen(o),p.label=5;case 5:return n++,[3,1];case 6:s=function(t){var e;return a.__generator(this,function(n){switch(n.label){case 0:return(e=u.queryViewsByTarget[t])?[4,u.localStore.releaseQuery(e.query,!1).then(function(){f.remoteStore.unlisten(t),f.removeAndCleanupQuery(e)}).catch(jr)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,l=0,c=e,p.label=7;case 7:return l<c.length?[5,s(h=c[l])]:[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?Oe().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:Oe()},t}(),xi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Di="SharedClientState",Ai="firestore_clients",Ni="firestore_mutations",Oi="firestore_targets",Pi="firestore_online_state",Ri="firestore_sequence_number",Mi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,v(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new S(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(y(Di,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Li=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,v(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new S(r.error.code,r.error.message)),i?new t(e,r.state,o):(y(Di,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Re(),a=0;i&&a<r.activeTargetIds.length;++a)i=Bt(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(y(Di,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ui=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&void 0!==pi[n.onlineState]&&"string"==typeof n.clientId?new t(n.clientId,pi[n.onlineState]):(y(Di,"Failed to parse online state: "+e),null)},t}(),Vi=function(){function t(){this.activeTargetIds=Re()}return t.prototype.addQueryTarget=function(t){v(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ji=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new S(_.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Ri+"_"+r,this.activeClients[this.localClientId]=new Vi,this.clientStateKeyRe=new RegExp("^"+Ai+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Ni+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Oi+"_"+a+"_(\\d+)$"),this.onlineStateKey=Pi+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return a.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,s,u,l,c,h=this;return a.__generator(this,function(a){switch(a.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Fi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),l=0,c=this.earlyEvents;l<c.length;l++)this.handleWebStorageEvent(c[l]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Re();return k(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Li.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d(Di,"READ",t,e),e},t.prototype.setItem=function(t,e){d(Di,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d(Di,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(d(Di,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void y("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,s;return a.__generator(this,function(a){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(t){var e=pn.INVALID;if(null!=t)try{var n=JSON.parse(t);v("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(r){y(Di,"Failed to read sequence number from WebStorage",r)}return e}(t.newValue))!==pn.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Mi(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:pi[t]}))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Li(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return v(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Ai+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Oi+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=Ni+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return v(null!==n,"Cannot parse client state key '"+t+"'"),Fi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);v(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return Mi.fromWebStorageEntry(new xi(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);v(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Li.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return Ui.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(d(Di,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return i.has(t)||s.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,s)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),Bi=function(){function t(){this.localState=new Vi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Vi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),qi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return Nr.withCacheSize(this.cacheSizeBytes)},t}(),zi=function(){return function(){}}(),Wi=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=Q.newId(),this._clientShutdown=!1}return t.prototype.start=function(t){var e=this;this.verifyNotShutdown();var n=new dn,r=new dn,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof qi?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof S?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.verifyNotShutdown=function(){if(this._clientShutdown)throw new S(_.FAILED_PRECONDITION,"The client has already been shutdown.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=Vr.buildStoragePrefix(this.databaseInfo),i=new rn(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return a.__awaiter(n,void 0,void 0,function(){var n,o;return a.__generator(this,function(a){switch(a.label){case 0:if(e.synchronizeTabs&&!ji.isAvailable(this.platform))throw new S(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=e.lruParams(),e.synchronizeTabs?(this.sharedClientState=new ji(this.asyncQueue,this.platform,r,this.clientId,t),[4,Vr.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new Bi,[4,Vr.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=$r.createEagerPersistence(this.clientId),this.sharedClientState=new Bi,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return d("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return a.__awaiter(n,void 0,void 0,function(){var n,i,o,s,u=this;return a.__generator(this,function(l){switch(l.label){case 0:return this.localStore=new Gr(this.persistence,t),e&&(this.lruScheduler=new Or(e,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),o=new hi(this.asyncQueue,r,this.credentials,i),s=function(t){return u.syncEngine.applyOnlineStateChange(t,di.SharedClientState)},this.remoteStore=new gi(this.localStore,o,this.asyncQueue,function(t){return u.syncEngine.applyOnlineStateChange(t,di.RemoteStore)},n),this.syncEngine=new ki(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=s,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new bi(this.syncEngine),[4,this.sharedClientState.start()];case 1:return l.sent(),[4,this.remoteStore.start()];case 2:return l.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return a.__awaiter(u,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return l.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return a.__awaiter(u,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.shutdown()];case 1:return t.sent(),[2]}})})})];case 4:return l.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(){var t=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this._clientShutdown?[3,4]:(this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()]);case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:t.sent(),this.credentials.removeChangeListener(),this._clientShutdown=!0,t.label=4;case 4:return[2]}})})})},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotShutdown();var i=new wi(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.verifyNotShutdown(),this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof ht)return t;if(t instanceof ft)return null;throw new S(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=Oe(),r=new Ci(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this;this.verifyNotShutdown();var n=new dn;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(t.prototype,"clientShutdown",{get:function(){return this._clientShutdown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Hi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Qi=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new S(_.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+H(1,"element")+".")}();for(var n=0;n<t.length;++n)if(P("FieldPath","string",n,t[n]),0===t[n].length)throw new S(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(ut.keyField().canonicalString()),t}(),Ki=new RegExp("[~\\*/\\[\\]]"),Gi=function(){return function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}}(),Yi=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(xi.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Zi=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new S(_.ABORTED,"getToken aborted due to token change.");return n?(v("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Gi(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return v(null===t||"string"==typeof t,"Received invalid UID: "+t),new xi(t)},t}(),Ji=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=xi.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Xi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Ji(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(xi.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function $i(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var to=function(){function t(t){this._methodName=t}return t.delete=function(){return D("FieldValue.delete",arguments),eo.instance},t.serverTimestamp=function(){return D("FieldValue.serverTimestamp",arguments),no.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("FieldValue.arrayUnion",arguments,1),new ro(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("FieldValue.arrayRemove",arguments,1),new io(t)},t.increment=function(t){return P("FieldValue.increment","number",1,t),A("FieldValue.increment",arguments,1),new oo(t)},t.prototype.isEqual=function(t){return this===t},t}(),eo=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return a.__extends(e,t),e.instance=new e,e}(to),no=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(e,t),e.instance=new e,e}(to),ro=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return a.__extends(e,t),e}(to),io=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return a.__extends(e,t),e}(to),oo=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return a.__extends(e,t),e}(to),ao=E(to,"Use FieldValue.<field>() instead."),so=/^__.*__$/,uo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new he(t,this.data,this.fieldMask,e):new ce(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new fe(t,this.fieldTransforms)),n},t}(),lo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new he(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new fe(t,this.fieldTransforms)),n},t}(),co=function(t){return t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t}({});function ho(t){switch(t){case co.Set:case co.MergeSet:case co.Update:return!0;case co.Argument:return!1;default:throw g("Unexpected case for UserDataSource: "+t)}}var fo=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new S(_.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(ho(this.dataSource)&&so.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),po=function(){return function(t,e){this.databaseId=t,this.key=e}}(),yo=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new fo(co.Set,t,ut.EMPTY_PATH);go("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new uo(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new fo(co.MergeSet,t,ut.EMPTY_PATH);go("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new ne(ut.comparator),u=0,l=n;u<l.length;u++){var c=l[u],h=void 0;if(c instanceof Qi)h=c._internalPath;else{if("string"!=typeof c)throw g("Expected stringOrFieldPath to be a string or a FieldPath");h=bo(t,c)}if(!r.contains(h))throw new S(_.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=ie.fromSet(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=ie.fromArray(r.fieldMask),o=r.fieldTransforms;return new uo(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new fo(co.Update,t,ut.EMPTY_PATH);go("Data must be an object, but it was:",r,e);var i=new ne(ut.comparator),o=Rt.EMPTY;k(e,function(e,a){var s=bo(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof eo)i=i.add(s);else{var l=n.parseData(a,u);null!=l&&(i=i.add(s),o=o.set(s,l))}});var a=ie.fromSet(i);return new lo(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new fo(co.Update,t,ut.EMPTY_PATH),o=[vo(t,e)],a=[n];if(r.length%2!=0)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(vo(t,r[s])),a.push(r[s+1]);var u=new ne(ut.comparator),l=Rt.EMPTY;for(s=0;s<o.length;++s){var c=o[s],h=i.childContextForFieldPath(c),f=this.runPreConverter(a[s],h);if(f instanceof eo)u=u.add(c);else{var p=this.parseData(f,h);null!=p&&(u=u.add(c),l=l.set(c,p))}}var d=ie.fromSet(u);return new lo(l,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new fo(co.Argument,t,ut.EMPTY_PATH),r=this.parseData(e,n);return v(null!=r,"Parsed data should not be null."),v(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(r){var n=wo(r);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(mo(t=this.runPreConverter(t,e)))return go("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof to)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new dt(K);return x(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):k(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new Rt(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=this.parseData(o[i],e.childContextForArray(r));null==a&&(a=St.INSTANCE),n.push(a),r++}return new Mt(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!ho(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof eo){if(e.dataSource!==co.MergeSet)throw e.dataSource===co.Update?(v(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof no)e.fieldTransforms.push(new oe(e.path,de.instance));else if(t instanceof ro){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ye(n);e.fieldTransforms.push(new oe(e.path,r))}else if(t instanceof io){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new me(n);e.fieldTransforms.push(new oe(e.path,i))}else if(t instanceof oo){var o=this.parseQueryValue("FieldValue.increment",t._operand),a=new ge(o);e.fieldTransforms.push(new oe(e.path,a))}else g("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return St.INSTANCE;if("number"==typeof t)return Bt(t)?new It(t):new kt(t);if("boolean"==typeof t)return Et.of(t);if("string"==typeof t)return new xt(t);if(t instanceof Date)return new Dt(et.fromDate(t));if(t instanceof et)return new Dt(new et(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof tt)return new Pt(t);if(t instanceof X)return new Nt(t);if(t instanceof po)return new Ot(t.databaseId,t.key);throw e.createError("Unsupported field value: "+j(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new fo(co.Argument,t,ut.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function mo(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof et||t instanceof tt||t instanceof X||t instanceof po||t instanceof to)}function go(t,e,n){if(!mo(n)||!V(n)){var r=j(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function vo(t,e){if(e instanceof Qi)return e._internalPath;if("string"==typeof e)return bo(t,e);throw new S(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function bo(t,e){try{return function(t){if(t.search(Ki)>=0)throw new S(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Qi.bind.apply(Qi,[void 0].concat(t.split("."))))}catch(e){throw new S(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(r){var n=wo(r);throw new S(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function wo(t){return t instanceof Error?t.message:t.toString()}var _o="firestore.googleapis.com",So=!0,Eo=!0,Co=!1,To=Nr.COLLECTION_DISABLED,Io=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new S(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_o,this.ssl=So}else M("settings","non-empty string","host",t.host),this.host=t.host,L("settings","boolean","ssl",t.ssl),this.ssl=T(t.ssl,So);if(q("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),L("settings","object","credentials",t.credentials),this.credentials=t.credentials,L("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?y("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&y("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=T(t.timestampsInSnapshots,Eo),L("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Nr.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==To&&t.cacheSizeBytes<Nr.MINIMUM_CACHE_SIZE_BYTES)throw new S(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Nr.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}L("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0===t.experimentalForceLongPolling?Co:t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),ko=function(){return function(){}}(),xo=function(){function t(e){var n=this;this._queue=new mn,this.INTERNAL={delete:function(){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.shutdown()];case 1:return t.sent(),[2]}})})}};var r=new ko;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Zi(i)}else{var o=e;if(!o.projectId)throw new S(_.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new it(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Yi}r.settings=new Io({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(A("Firestore.settings",arguments,1),P("Firestore.settings","object",1,t),C(t,"persistence"))throw new S(_.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Io(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new S(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new Yi;switch(t.type){case"gapi":var e=t.client;return v(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Xi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new S(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new S(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&y("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=T(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new qi(this._config.settings.cacheSizeBytes,e))},t.prototype._clearPersistence=function(){var t=this,e=Vr.buildStoragePrefix(this.makeDatabaseInfo()),n=new dn;return this._queue.enqueueAndForget(function(){return a.__awaiter(t,void 0,void 0,function(){var t;return a.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientShutdown)throw new S(_.FAILED_PRECONDITION,"Persistence cannot be cleared while this firestore instance is running.");return[4,Vr.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}})})}),n.promise},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new zi),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new nt(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl,this._config.settings.forceLongPolling)},t.prototype.configureClient=function(t){var e=this;v(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),v(!this._firestoreClient,"configureClient() called multiple times");var n=this.makeDatabaseInfo();return this._dataConverter=new yo(function(t){if(t instanceof No){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new S(_.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new po(e._config.databaseId,t._key)}return t}),this._firestoreClient=new Wi(b.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!C(e,"projectId"))throw new S(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new S(_.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new it(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new S(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return A("Firestore.collection",arguments,1),P("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Fo(at.fromString(t),this)},t.prototype.doc=function(t){return A("Firestore.doc",arguments,1),P("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),No.forPath(at.fromString(t),this)},t.prototype.collectionGroup=function(t){if(A("Firestore.collectionGroup",arguments,1),P("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new S(_.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Mo(new qt(at.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return A("Firestore.runTransaction",arguments,1),P("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new Do(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new Ao(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(f()){case h.DEBUG:return"debug";case h.ERROR:return"error";case h.SILENT:return"silent";default:return g("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(A("Firestore.setLogLevel",arguments,1),P("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":p(h.DEBUG);break;case"error":p(h.ERROR);break;case"silent":p(h.SILENT);break;default:throw new S(_.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),Do=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;A("Transaction.get",arguments,1);var n=Bo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return g("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof ft)return new Po(e._firestore,n._key,null,!1,!1);if(r instanceof ht)return new Po(e._firestore,n._key,r,!1,!1);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){O("Transaction.set",arguments,2,3);var r=Bo("Transaction.set",t,this._firestore),i=(n=Uo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof Qi?(N("Transaction.update",arguments,3),r=Bo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(A("Transaction.update",arguments,2),r=Bo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){A("Transaction.delete",arguments,1);var e=Bo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Ao=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){O("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Bo("WriteBatch.set",t,this._firestore),i=(n=Uo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,ue.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Qi?(N("WriteBatch.update",arguments,3),r=Bo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(A("WriteBatch.update",arguments,2),r=Bo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,ue.exists(!0))),this},t.prototype.delete=function(t){A("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Bo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new pe(e._key,ue.NONE)),this},t.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new S(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),No=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new S(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new lt(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Fo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(A("DocumentReference.collection",arguments,1),P("DocumentReference.collection","non-empty string",1,t),!t)throw new S(_.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=at.fromString(t);return new Fo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){O("DocumentReference.set",arguments,1,2);var n=(e=Uo("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,ue.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Qi?(N("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(A("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ue.exists(!0)))},t.prototype.delete=function(){return A("DocumentReference.delete",arguments,0),this._firestoreClient.write([new pe(this._key,ue.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];O("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||$i(t[i])||(q("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),L("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return $i(t[i])?n=t[i]:(P("DocumentReference.onSnapshot","function",i,t[i]),R("DocumentReference.onSnapshot","function",i+1,t[i+1]),R("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Hi({next:function(t){if(e.next){v(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Po(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(qt.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return O("DocumentReference.get",arguments,0,1),jo("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new Po(e.firestore,e._key,t,!0,t instanceof ht&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new S(_.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new S(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),Oo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Po=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return O("DocumentSnapshot.data",arguments,0,1),t=Vo("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,wt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(O("DocumentSnapshot.get",arguments,1,2),e=Vo("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(vo("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,wt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new No(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Oo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof Rt)return this.convertObject(t,e);if(t instanceof Mt)return this.convertArray(t,e);if(t instanceof Ot){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||y("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new No(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Ro=function(t){function e(e,n,r,i,o){return t.call(this,e,n,r,i,o)||this}return a.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return v("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Po),Mo=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){var i;A("Query.where",arguments,3),B("Query.where",3,r),function(t,e,n,r){if(!e.some(function(t){return t===r}))throw new S(_.INVALID_ARGUMENT,"Invalid value "+j(r)+" provided to function Query.where() for its "+W(2)+" argument. Acceptable values: "+e.join(", "))}(0,["<","<=","==",">=",">","array-contains"],0,n);var o=vo("Query.where",e),a=Wt.fromString(n);if(o.isKeyField()){if(a===Wt.ARRAY_CONTAINS)throw new S(_.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(""===r)throw new S(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==r.indexOf("/"))throw new S(_.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection by FieldPath.documentId(), the value provided must be a plain document ID, but '"+r+"' contains a slash.");var s=this._query.path.child(at.fromString(r));if(!lt.isDocumentKey(s))throw new S(_.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+s+"' is not because it has an odd number of segments ("+s.length+").");i=new Ot(this.firestore._databaseId,new lt(s))}else{if(!(r instanceof No))throw new S(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+j(r)+".");i=new Ot(this.firestore._databaseId,r._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var u=zt.create(o,a,i);return this.validateNewFilter(u),new t(this._query.addFilter(u),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(O("Query.orderBy",arguments,1,2),R("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Gt.ASCENDING;else{if("desc"!==n)throw new S(_.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Gt.DESCENDING}if(null!==this._query.startAt)throw new S(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new S(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=vo("Query.orderBy",e),o=new Zt(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(A("Query.limit",arguments,1),P("Query.limit","number",1,e),e<=0)throw new S(_.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(B(t,1,e),e instanceof Po){if(n.length>0)throw new S(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new S(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Ot(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof At)throw new S(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===s){var u=a.field.canonicalString();throw new S(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Yt(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new S(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new S(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new S(_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(at.fromString(a));if(!lt.isDocumentKey(s))throw new S(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new lt(s);i.push(new Ot(this.firestore._databaseId,u))}else{var l=this.firestore._dataConverter.parseQueryValue(t,a);i.push(l)}}return new Yt(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];O("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||$i(t[i])||(q("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),L("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),$i(t[i])?n=t[i]:(P("Query.onSnapshot","function",i,t[i]),R("Query.onSnapshot","function",i+1,t[i+1]),R("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Hi({next:function(t){e.next&&e.next(new Lo(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(t){var e=this;return O("Query.get",arguments,0,1),jo("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new Lo(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new S(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof Ht)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new S(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===Wt.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new S(_.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new S(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Lo=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Oo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;O("QuerySnapshot.forEach",arguments,1,2),P("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new Mo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(q("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),L("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new S(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new Ro(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return v(e.type===Le.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Le.Metadata}).map(function(e){var r=new Ro(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,a=-1;return e.type!==Le.Added&&(v((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Le.Removed&&(a=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:qo(e.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Ro(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(Lo.prototype.docChanges,t,{get:function(){return function(){throw new S(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var Fo=function(t){function e(e,n){var r=t.call(this,qt.atPath(e),n)||this;if(e.length%2!=1)throw new S(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return a.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new No(new lt(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(O("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Q.newId()),P("CollectionReference.doc","non-empty string",1,t),""===t)throw new S(_.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=at.fromString(t);return No.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){A("CollectionReference.add",arguments,1),P("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Mo);function Uo(t,e){if(void 0===e)return{merge:!1};if(q(t,e,["merge","mergeFields"]),L(t,"boolean","merge",e.merge),"mergeFields","a string or a FieldPath",void 0!==(n=e.mergeFields)&&function(t,e,n,r,i){if(!(r instanceof Array))throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its mergeFields option to be an array, but it was: "+j(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+j(r[o]))}(t,0,0,n,function(t){return"string"==typeof t||t instanceof Qi}),void 0!==e.mergeFields&&void 0!==e.merge)throw new S(_.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function Vo(t,e){return void 0===e?{}:(q(t,e,["serverTimestamps"]),F(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function jo(t,e){R(t,"object",1,e),e&&(q(t,e,["source"]),F(t,0,"source",e.source,["default","server","cache"]))}function Bo(t,e,n){if(e instanceof No){if(e.firestore!==n)throw new S(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw z(t,"DocumentReference",1,e)}function qo(t){switch(t){case Le.Added:return"added";case Le.Modified:case Le.Metadata:return"modified";case Le.Removed:return"removed";default:return g("Unknown change type: "+t)}}var zo=E(xo,"Use firebase.firestore() instead."),Wo=E(Do,"Use firebase.firestore().runTransaction() instead."),Ho=E(Ao,"Use firebase.firestore().batch() instead."),Qo=E(No,"Use firebase.firestore().doc() instead."),Ko=E(Po),Go=E(Ro),Yo=E(Mo),Zo=E(Lo),Jo=E(Fo,"Use firebase.firestore().collection() instead."),Xo={Firestore:zo,GeoPoint:tt,Timestamp:et,Blob:$,Transaction:Wo,WriteBatch:Ho,DocumentReference:Qo,DocumentSnapshot:Ko,Query:Yo,QueryDocumentSnapshot:Go,QuerySnapshot:Zo,CollectionReference:Jo,FieldPath:Qi,FieldValue:ao,setLogLevel:xo.setLogLevel,CACHE_SIZE_UNLIMITED:To};function $o(t){t.INTERNAL.registerService("firestore",function(t){return new xo(t)},function(t){v(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Xo))}$o(i),e.registerFirestore=$o},"C+d3":function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(t,e){"use strict";function n(t,e){t&&e&&Object.keys(e).forEach(function(n){t[n]=e[n]})}function r(t){var e={};return n(e,c),n(e,t),Object.keys(c).forEach(function(t){var r=c[t];if("object"===(void 0===r?"undefined":l(r))){var i={};n(i,r),n(i,e[t]),e[t]=i}}),e}function i(t,e){var n=/^(-{0,1}\.{0,1}\d+(\.\d+)?)[\s|\.]*(\w*)$/;if(t&&n.test(t)){var r=n.exec(t);return{value:1*r[1],units:r[3]||"px",original:t}}return e?i(e):{original:e}}function o(t,e){if(t){for(;t.firstChild;)t.removeChild(t.firstChild);e&&("string"==typeof e?t.innerHTML=e:t.appendChild(e))}}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}function s(t){if(null!=t&&google){if(t instanceof google.maps.LatLng)return t;if(void 0!==t.lat&&void 0!==t.lng)return new google.maps.LatLng(t)}return null}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c={placement:"top",pointer:!0,openOnMarkerClick:!0,closeOnMapClick:!0,closeWhenOthersOpen:!1,showCloseButton:!0,panOnOpen:!0,edgeOffset:{top:20,right:20,bottom:20,left:20}},h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n._html=null,n._opts=r(t),n._callbacks=n._opts.callbacks||{},n._marker=n._opts.marker,n._map=n._opts.map,n._position=s(n._opts.position),n._isOpen=!1,n._listeners=[],google&&n._marker&&n._opts.openOnMarkerClick&&n.trackListener(google.maps.event.addListener(n._marker,"click",function(){n.getMap()||n.open()}),!0),n._position&&!n._opts.offset&&(n._opts.offset={top:"0px",left:"0px"});var i=t.placement||n._opts.position;return("string"==typeof i||i instanceof String)&&(i=i.toLowerCase()),n._opts.placement="top"!==i&&"bottom"!==i&&"left"!==i&&"right"!==i?c.placement:i,null==(i=n._opts.position)||"string"==typeof i||i instanceof String||(n._opts.position=i),void 0!==n._opts.border&&!0!==n._opts.border||(n._opts.border={}),void 0===n._opts.pointer&&(n._opts.pointer=c.pointer),void 0!==n._opts.shadow&&!0!==n._opts.shadow||(n._opts.shadow={}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,google.maps.OverlayView),u(e,[{key:"activateCallback",value:function(t){var e=this._callbacks[t];return e?e.apply(this):void 0}},{key:"trackListener",value:function(t,e){this._listeners.push({listener:t,persistent:e})}},{key:"clearListeners",value:function(t){google&&this._listeners&&(this._listeners.forEach(function(e){!t&&e.persistent||(google.maps.event.removeListener(e.listener),e.listener=null)}),this._listeners=this._listeners.filter(function(t){return null!=t.listener}))}},{key:"isOpen",value:function(){return this._isOpen}},{key:"open",value:function(){var t=this.activateCallback("beforeOpen");(void 0===t||t)&&(this._marker?this.setMap(this._marker.getMap()):this._map&&this._position&&this.setMap(this._map))}},{key:"close",value:function(){var t=this.activateCallback("beforeClose");(void 0===t||t)&&(this.clearListeners(),this.setMap(null))}},{key:"destroy",value:function(){this.getMap()&&this.setMap(null),this.clearListeners(!0)}},{key:"setContent",value:function(t){this._opts.content=t,this._html&&this._html.content&&o(this._html.content,t)}},{key:"setPosition",value:function(t){this._position=s(t),this._isOpen&&this._position&&(this.draw(),this.resize(),this.reposition())}},{key:"getWrapper",value:function(){return this._html?this._html.wrapper:null}},{key:"draw",value:function(){if(this.getMap()&&this._html&&(this._marker||this._position)){var t=this._opts.offset;t&&(t.left&&(this._html.wrapper.style.marginLeft=t.left),t.top&&(this._html.wrapper.style.marginTop=t.top));var e=this._opts.backgroundColor;if(e&&(this._html.contentWrapper.style.backgroundColor=e,this._opts.pointer&&(this._html.pointerBg.style["border"+a(this._opts.placement)+"Color"]=e)),this._opts.padding&&(this._html.contentWrapper.style.padding=this._opts.padding,this._opts.shadow&&(this._html.shadowFrame.style.padding=this._opts.padding)),this._opts.borderRadius&&(this._html.contentWrapper.style.borderRadius=this._opts.borderRadius,this._opts.shadow&&(this._html.shadowFrame.style.borderRadius=this._opts.borderRadius)),this._opts.fontSize&&(this._html.wrapper.style.fontSize=this._opts.fontSize),this._opts.fontColor&&(this._html.contentWrapper.style.color=this._opts.fontColor),this._opts.pointer&&!0!==this._opts.pointer&&(this._opts.shadow&&(this._html.shadowPointer.style.width=this._opts.pointer,this._html.shadowPointer.style.height=this._opts.pointer),this._html.pointerBorder&&(this._html.pointerBorder.style.borderWidth=this._opts.pointer),this._html.pointerBg.style.borderWidth=this._opts.pointer),this._opts.border){var n=0;if(void 0!==this._opts.border.width&&(n=i(this._opts.border.width,"0px"),this._html.contentWrapper.style.borderWidth=n.value+n.units),n=i((n=Math.round((this._html.contentWrapper.offsetWidth-this._html.contentWrapper.clientWidth)/2))+"px","0px"),this._opts.pointer){var r=Math.min(this._html.pointerBorder.offsetHeight,this._html.pointerBorder.offsetWidth);r=i(r+"px","0px");var o=Math.round(n.value*(1.41421356237-1));o=Math.min(o,r.value),this._html.pointerBg.style.borderWidth=r.value-o+r.units;var s=a(function(t){return"top"===t?"bottom":"bottom"===t?"top":"left"===t?"right":"right"===t?"left":t}(this._opts.placement));this._html.pointerBg.style["margin"+s]=o+n.units,this._html.pointerBg.style[this._opts.placement]=-n.value+n.units}var u=this._opts.border.color;u&&(this._html.contentWrapper.style.borderColor=u,this._html.pointerBorder&&(this._html.pointerBorder.style["border"+a(this._opts.placement)+"Color"]=u))}if(this._opts.shadow){var l=this._opts.shadow,c=function(t){var e=l[t];return void 0!==e&&null!=e};if(c("h")||c("v")||c("blur")||c("spread")||c("color")){var h=i(l.h,"0px"),f=i(l.v,"3px"),p=i(l.blur,"6px"),d=i(l.spread,"0px"),y=l.color||"#000",m=function(t,e){return t+" "+e+" "+p.original+" "+d.original+" "+y};this._html.shadowFrame.style.boxShadow=m(h.original,f.original),this._html.shadowPointerInner.style.boxShadow=m(.7071067811865474*(h.value-f.value)+h.units,.7071067811865474*(h.value+f.value)+f.units)}this._opts.shadow.opacity&&(this._html.shadowWrapper.style.opacity=this._opts.shadow.opacity)}var g=this.getProjection().fromLatLngToDivPixel(this._position||this._marker.position);g&&(this._html.floatWrapper.style.top=Math.floor(g.y)+"px",this._html.floatWrapper.style.left=Math.floor(g.x)+"px"),this._isOpen||(this._isOpen=!0,this.resize(),this.reposition(),this.activateCallback("afterOpen"),google&&google.maps.event.trigger(this.getMap(),"snazzy-info-window-opened",this))}}},{key:"onAdd",value:function(){var t=this;if(!this._html){var e=function(t,e){if(t&&e)for(var n=0;n<e.length;n++){var r=e[n];r&&(t.className&&(t.className+=" "),t.className+="si-"+r)}},n=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=document.createElement("div");return e(i,n),i};if(this._html={},this._html.wrapper=n("wrapper-"+this._opts.placement),this._opts.wrapperClass&&(this._html.wrapper.className+=" "+this._opts.wrapperClass),this._opts.border&&e(this._html.wrapper,["has-border"]),this._opts.shadow&&(this._html.shadowWrapper=n("shadow-wrapper-"+this._opts.placement),this._html.shadowFrame=n("frame","shadow-frame"),this._html.shadowWrapper.appendChild(this._html.shadowFrame),this._opts.pointer&&(this._html.shadowPointer=n("shadow-pointer-"+this._opts.placement),this._html.shadowPointerInner=n("shadow-inner-pointer-"+this._opts.placement),this._html.shadowPointer.appendChild(this._html.shadowPointerInner),this._html.shadowWrapper.appendChild(this._html.shadowPointer)),this._html.wrapper.appendChild(this._html.shadowWrapper)),this._html.contentWrapper=n("frame","content-wrapper"),this._html.content=n("content"),this._opts.content&&o(this._html.content,this._opts.content),this._opts.showCloseButton){if(this._opts.closeButtonMarkup){var r=document.createElement("div");o(r,this._opts.closeButtonMarkup),this._html.closeButton=r.firstChild}else this._html.closeButton=document.createElement("button"),this._html.closeButton.setAttribute("type","button"),this._html.closeButton.innerHTML="&#215;",e(this._html.closeButton,["close-button"]);this._html.contentWrapper.appendChild(this._html.closeButton)}this._html.contentWrapper.appendChild(this._html.content),this._html.wrapper.appendChild(this._html.contentWrapper),this._opts.pointer&&(this._opts.border&&(this._html.pointerBorder=n("pointer-"+this._opts.placement,"pointer-border-"+this._opts.placement),this._html.wrapper.appendChild(this._html.pointerBorder)),this._html.pointerBg=n("pointer-"+this._opts.placement,"pointer-bg-"+this._opts.placement),this._html.wrapper.appendChild(this._html.pointerBg)),this._html.floatWrapper=n("float-wrapper"),this._html.floatWrapper.appendChild(this._html.wrapper),this.getPanes().floatPane.appendChild(this._html.floatWrapper);var i=this.getMap();this.clearListeners(),this._opts.closeOnMapClick&&this.trackListener(google.maps.event.addListener(i,"click",function(){t.close()})),this._opts.closeWhenOthersOpen&&this.trackListener(google.maps.event.addListener(i,"snazzy-info-window-opened",function(e){t!==e&&t.close()})),google&&(this._previousWidth=null,this._previousHeight=null,this.trackListener(google.maps.event.addListener(i,"bounds_changed",function(){var e=i.getDiv(),n=e.offsetWidth,r=e.offsetHeight,o=t._previousWidth,a=t._previousHeight;null!==o&&null!==a&&o===n&&a===r||(t._previousWidth=n,t._previousHeight=r,t.resize())})),this._marker&&this.trackListener(google.maps.event.addListener(this._marker,"position_changed",function(){t.draw()})),this._opts.showCloseButton&&!this._opts.closeButtonMarkup&&this.trackListener(google.maps.event.addDomListener(this._html.closeButton,"click",function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),t.close()})),["click","dblclick","rightclick","contextmenu","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup","touchstart","touchend","touchmove","wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"].forEach(function(e){t.trackListener(google.maps.event.addDomListener(t._html.wrapper,e,function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}))})),this.activateCallback("open")}}},{key:"onRemove",value:function(){if(this.activateCallback("close"),this._html){var t=this._html.floatWrapper.parentElement;t&&t.removeChild(this._html.floatWrapper),this._html=null}this._isOpen=!1,this.activateCallback("afterClose")}},{key:"getMapInnerBounds",value:function(){var t=this.getMap().getDiv().getBoundingClientRect(),e={top:t.top+this._opts.edgeOffset.top,right:t.right-this._opts.edgeOffset.right,bottom:t.bottom-this._opts.edgeOffset.bottom,left:t.left+this._opts.edgeOffset.left};return e.width=e.right-e.left,e.height=e.bottom-e.top,e}},{key:"reposition",value:function(){if(this._opts.panOnOpen&&this._html){var t=this.getMapInnerBounds(),e=this._html.wrapper.getBoundingClientRect(),n=0,r=0;t.left>=e.left?n=e.left-t.left:t.right<=e.right&&(n=e.left-(t.right-e.width)),t.top>=e.top?r=e.top-t.top:t.bottom<=e.bottom&&(r=e.top-(t.bottom-e.height)),0===n&&0===r||this.getMap().panBy(n,r)}}},{key:"resize",value:function(){if(this._html){var t=this.getMapInnerBounds(),e=t.width;void 0!==this._opts.maxWidth&&(e=Math.min(e,this._opts.maxWidth)),this._html.content.style.maxWidth=(e-=this._html.wrapper.offsetWidth-this._html.content.offsetWidth)+"px";var n=t.height;void 0!==this._opts.maxHeight&&(n=Math.min(n,this._opts.maxHeight)),this._html.content.style.maxHeight=(n-=this._html.wrapper.offsetHeight-this._html.content.offsetHeight)+"px"}}}]),e}();e.default=h,t.exports=e.default})?r.apply(e,[t,e]):r)||(t.exports=i)},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=i},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return l}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return y}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return _}),n.d(e,"__importDefault",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}},"q/0M":function(t,e,n){"use strict";n.r(e),n.d(e,"LogLevel",function(){return i}),n.d(e,"Logger",function(){return s}),n.d(e,"setLogLevel",function(){return u});var r=[],i=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),o=i.INFO,a=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function u(t){r.forEach(function(e){e.logLevel=t})}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("mrSG"),o=n("zVF4"),a=n("q/0M"),s=((r={})["no-app"]="No Firebase App '{$name}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$name}",r["duplicate-app"]="Firebase App named '{$name}' already exists",r["app-deleted"]="Firebase App named '{$name}' already deleted",r["duplicate-service"]="Firebase service named '{$name}' already registered",r["invalid-app-argument"]="firebase.{$name}() takes either no argument or a Firebase App instance.",r),u=new o.ErrorFactory("app","Firebase",s),l="[DEFAULT]",c=[],h=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){c.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){c=c.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);for(var e=[],n=0,r=Object.keys(t.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(t.services_[i]);o<a.length;o++)e.push(t.services_[i][a[o]]);return Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=l),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==l?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;o.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(c.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),c=[])},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create("app-deleted",{name:this.name_})},t}();function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}h.prototype.name&&h.prototype.options||h.prototype.delete||console.log("dc");var p=new a.Logger("@firebase/app");if(o.isBrowser()&&"firebase"in self){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var d=self.firebase.SDK_VERSION;d&&d.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=function t(){var e=function(t){var e={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),("object"!=typeof r||null===r)&&(r={name:r});var o=r;void 0===o.name&&(o.name=l);var a=o.name;if("string"!=typeof a||!a)throw u.create("bad-app-name",{name:String(a)});if(f(e,a))throw u.create("duplicate-app",{name:a});var s=new t(n,o,i);return e[a]=s,c(s,"create"),s},app:a,apps:null,SDK_VERSION:"6.0.4",INTERNAL:{registerService:function(e,l,c,h,f){if(void 0===f&&(f=!1),n[e])throw u.create("duplicate-service",{name:e});function p(t){if(void 0===t&&(t=a()),"function"!=typeof t[e])throw u.create("invalid-app-argument",{name:e});return t[e]()}return n[e]=l,h&&(r[e]=h,s().forEach(function(t){h("create",t)})),void 0!==c&&o.deepExtend(p,c),i[e]=p,t.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,e).apply(this,f?t:[])},p},removeApp:function(t){c(e[t],"delete"),delete e[t]},factories:n,useAsService:h}};function a(t){if(!f(e,t=t||l))throw u.create("no-app",{name:t});return e[t]}function s(){return Object.keys(e).map(function(t){return e[t]})}function c(t,e){for(var i=0,o=Object.keys(n);i<o.length;i++){var a=h(0,o[i]);if(null===a)return;r[a]&&r[a](e,t)}}function h(t,e){return"serverAuth"===e?null:e}return o.patchProperty(i,"default",i),Object.defineProperty(i,"apps",{get:s}),o.patchProperty(a,"App",t),i}(h);return e.INTERNAL=i.__assign({},e.INTERNAL,{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),m=y.initializeApp;y.initializeApp=function(){return o.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\n      to false and "main" to true:\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),m.apply(void 0,arguments)};var g=y;e.default=g,e.firebase=g},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",function(){return sr}),n.d(e,"EventType",function(){return ur}),n.d(e,"WebChannel",function(){return lr}),n.d(e,"XhrIo",function(){return cr}),n.d(e,"createWebChannelTransport",function(){return ar});var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(t){return"string"==typeof t}function u(t){return"number"==typeof t}function l(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function f(t){return"array"==h(t)}function p(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var y="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function S(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function E(){this.j=this.j,this.i=this.i}E.prototype.j=!1,E.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[y]||(this[y]=++m))},E.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var C=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function I(t){return Array.prototype.concat.apply([],arguments)}function k(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function x(t){return/^[\s\xa0]*$/.test(t)}var D,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function N(t,e){return-1!=t.indexOf(e)}function O(t,e){return t<e?-1:t>e?1:0}t:{var P=a.navigator;if(P){var R=P.userAgent;if(R){D=R;break t}}D=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e,n={};for(e in t)n[e]=t[e];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function V(t){return V[" "](t),t}V[" "]=c;var j,B,q=N(D,"Opera"),z=N(D,"Trident")||N(D,"MSIE"),W=N(D,"Edge"),H=W||z,Q=N(D,"Gecko")&&!(N(D.toLowerCase(),"webkit")&&!N(D,"Edge"))&&!(N(D,"Trident")||N(D,"MSIE"))&&!N(D,"Edge"),K=N(D.toLowerCase(),"webkit")&&!N(D,"Edge");function G(){var t=a.document;return t?t.documentMode:void 0}t:{var Y="",Z=(B=D,Q?/rv:([^\);]+)(\)|;)/.exec(B):W?/Edge\/([\d\.]+)/.exec(B):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(B):K?/WebKit\/(\S+)/.exec(B):q?/(?:Version)[ \/]?(\S+)/.exec(B):void 0);if(Z&&(Y=Z?Z[1]:""),z){var J=G();if(null!=J&&J>parseFloat(Y)){j=String(J);break t}}j=Y}var X,$={};function tt(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=A(String(j)).split("."),r=A(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=O(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||O(0==a[2].length,0==s[2].length)||O(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var et=a.document;X=et&&z?G()||("CSS1Compat"==et.compatMode?parseInt(j,10):5):void 0;var nt=!z||9<=Number(X),rt=z&&!tt("9"),it=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",c,e),a.removeEventListener("test",c,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ja=!0}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Q){t:{try{V(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:st[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ja=!1},S(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut="closure_listenable_"+(1e6*Math.random()|0),lt=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++lt,this.X=this.Z=!1}function ht(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function ft(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=C(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=dt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new ct(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var yt="closure_lm_"+(1e6*Math.random()|0),mt={};function gt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(f(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Ct(r),e&&e[ut]?e.Ba(n,r,d(i)?!!i.capture:!!i,o):vt(e,n,r,!0,i,o)}(t,e,n,r,i);if(f(e)){for(var o=0;o<e.length;o++)gt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.Aa(e,n,d(r)?!!r.capture:!!r,i):vt(t,e,n,!1,r,i)}function vt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i;if(a&&!nt)return null;var s=St(t);if(s||(t[yt]=s=new ft(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=_t,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t){if(!u(t)&&t&&!t.X){var e=t.src;if(e&&e[ut])pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=St(e))?(pt(n,t),0==n.b&&(n.src=null,e[yt]=null)):ht(t)}}}function wt(t){return t in mt?mt[t]:mt[t]="on"+t}function _t(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&bt(t),n.call(r,e)}(t,nt?new at(e,this):e=new at(e||l("window.event"),this))}function St(t){return(t=t[yt])instanceof ft?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(t){return"function"==h(t)?t:(t[Et]||(t[Et]=function(e){return t.handleEvent(e)}),t[Et])}function Tt(){E.call(this),this.c=new ft(this),this.J=this,this.B=null}function It(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&pt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}S(Tt,E),Tt.prototype[ut]=!0,(r=Tt.prototype).addEventListener=function(t,e,n,r){gt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(f(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=d(i)?!!i.capture:!!i,r=Ct(r),e&&e[ut]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=dt(a=e.a[n],r,i,o))&&(ht(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):e&&(e=St(e))&&(n=e.a[n.toString()],e=-1,n&&(e=dt(n,r,i,o)),(r=-1<e?n[e]:null)&&bt(r))}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(s(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var i=t;U(t=new ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=It(a,r,!0,t)&&i}if(i=It(a=t.a=n,r,!0,t)&&i,i=It(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=It(a=t.a=e[o],r,!1,t)&&i;return i},r.G=function(){if(Tt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.B=null},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Ba=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var kt=a.JSON.stringify;function xt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Dt(){this.b=this.a=null}xt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var At,Nt=new xt(function(){return new Pt},function(t){t.reset()});function Ot(){var t=Ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pt(){this.next=this.b=this.a=null}function Rt(t){a.setTimeout(function(){throw t},0)}function Mt(t,e){At||function(){var t=a.Promise.resolve(void 0);At=function(){t.then(Ut)}}(),Lt||(At(),Lt=!0),Ft.add(t,e)}Dt.prototype.add=function(t,e){var n=Nt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pt.prototype.reset=function(){this.next=this.b=this.a=null};var Lt=!1,Ft=new Dt;function Ut(){for(var t;t=Ot();){try{t.a.call(t.b)}catch(n){Rt(n)}var e=Nt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Lt=!1}function Vt(t,e){Tt.call(this),this.b=t||1,this.a=e||a,this.f=b(this.gb,this),this.g=_()}function jt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Bt(t,e,n){if("function"==h(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function qt(t,e,n){E.call(this),this.f=null!=n?b(t,n):t,this.c=e,this.b=b(this.ab,this),this.a=[]}function zt(t){t.U=Bt(t.b,t.c),t.f.apply(null,t.a)}function Wt(t){E.call(this),this.b=t,this.a={}}S(Vt,Tt),(r=Vt.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=_()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(jt(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},r.G=function(){Vt.N.G.call(this),jt(this),delete this.a},S(qt,E),(r=qt.prototype).ea=!1,r.U=null,r.Ua=function(t){this.a=arguments,this.U?this.ea=!0:zt(this)},r.G=function(){qt.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,zt(this))},S(Wt,E);var Ht=[];function Qt(t,e,n,r){f(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var i=0;i<n.length;i++){var o=gt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){M(t.a,function(t,e){this.a.hasOwnProperty(e)&&bt(t)},t),t.a={}}function Gt(){}Wt.prototype.G=function(){Wt.N.G.call(this),Kt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=new Tt;function Zt(t){ot.call(this,"serverreachability",t)}function Jt(t){Yt.dispatchEvent(new Zt(Yt,t))}function Xt(t){ot.call(this,"statevent",t)}function $t(t){Yt.dispatchEvent(new Xt(Yt,t))}function te(t){ot.call(this,"timingevent",t)}function ee(t,e){if("function"!=h(t))throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){t()},e)}S(Zt,ot),S(Xt,ot),S(te,ot);var ne={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},re={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ie(){}function oe(){}ie.prototype.a=null;var ae,se={OPEN:"a",ib:"b",Na:"c",rb:"d"};function ue(){ot.call(this,"d")}function le(){ot.call(this,"c")}function ce(){}function he(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Wt(this),this.O=fe,this.P=new Vt(t=H?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}S(ue,ot),S(le,ot),S(ce,ie),ae=new ce;var fe=45e3,pe={},de={};function ye(t,e,n){t.F=1,t.f=je(Pe(e)),t.l=n,t.H=!0,ge(t,null)}function me(t,e,n,r){t.F=1,t.f=je(Pe(e)),t.l=null,t.H=n,ge(t,r)}function ge(t,e){t.v=_(),we(t),t.D=Pe(t.f),Ve(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new qt(b(t.Ka,t,t.a),t.J)),Qt(t.I,t.a,"readystatechange",t.eb),e=t.h?L(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Jt(1)}function ve(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=be(t,n);if(i==de){4==e&&(t.c=4,$t(14),r=!1);break}if(i==pe){t.c=4,$t(15),r=!1;break}Te(t,i)}4==e&&0==n.length&&(t.c=1,$t(16),r=!1),t.b=t.b&&r,r||(Ce(t),Ee(t))}function be(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?de:(n=Number(e.substring(n,r)),isNaN(n)?pe:(r+=1)+n>e.length?de:(e=e.substr(r,n),t.A=r+n,e))}function we(t){t.R=_()+t.O,_e(t,t.O)}function _e(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ee(b(t.bb,t),e)}function Se(t){t.i&&(a.clearTimeout(t.i),t.i=null)}function Ee(t){t.g.Da()||t.m||t.g.na(t)}function Ce(t){Se(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,jt(t.P),Kt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Te(t,e){try{t.g.Ga(t,e),Jt(4)}catch(n){}}function Ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||s(t))T(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(p(t)||s(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(s(t))return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ke(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ke)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xe(t,e){Ae(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&De(t))}function De(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ae(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ae(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=he.prototype).setTimeout=function(t){this.O=t},r.eb=function(t){t=t.target;var e=this.B;e&&3==Pn(t)?e.Ua():this.Ka(t)},r.Ka=function(t){try{if(t==this.a)t:{var e=Pn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!H&&!this.a.aa())){this.m||4!=e||7==n||Jt(8==n||0>=r?3:2),Se(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Rn(this.a,"X-HTTP-Initial-Response");if(a&&!x(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,$t(12),Ce(this),Ee(this);break t}this.s=!0,Te(this,s)}this.H?(ve(this,e,o),H&&this.b&&3==e&&(Qt(this.I,this.P,"tick",this.cb),this.P.start())):Te(this,o),4==e&&Ce(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,we(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,$t(12)):(this.c=0,$t(13)),Ce(this),Ee(this)}}}catch(u){}},r.cb=function(){if(this.a){var t=Pn(this.a),e=this.a.aa();this.A<e.length&&(Se(this),ve(this,t,e),this.b&&4!=t&&we(this))}},r.cancel=function(){this.m=!0,Ce(this)},r.bb=function(){this.i=null;var t=_();0<=t-this.R?(2!=this.F&&(Jt(3),$t(17)),Ce(this),this.c=2,Ee(this)):_e(this,this.R-t)},(r=ke.prototype).C=function(){De(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return De(this),this.a.concat()},r.get=function(t,e){return Ae(this.b,t)?this.b[t]:e},r.set=function(t,e){Ae(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ne=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Oe(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Oe?(this.h=void 0!==e?e:t.h,Re(this,t.f),this.j=t.j,Me(this,t.b),Le(this,t.i),this.a=t.a,Fe(this,tn(t.c)),this.g=t.g):t&&(n=String(t).match(Ne))?(this.h=!!e,Re(this,n[1]||"",!0),this.j=Be(n[2]||""),Me(this,n[3]||"",!0),Le(this,n[4]),this.a=Be(n[5]||"",!0),Fe(this,n[6]||"",!0),this.g=Be(n[7]||"")):(this.h=!!e,this.c=new Ye(null,this.h))}function Pe(t){return new Oe(t)}function Re(t,e,n){t.f=n?Be(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Me(t,e,n){t.b=n?Be(e,!0):e}function Le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Fe(t,e,n){e instanceof Ye?(t.c=e,function(t,e){e&&!t.f&&(Ze(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Je(this,e),$e(this,n,t))},t)),t.f=e}(t.c,t.h)):(n||(e=qe(e,Ke)),t.c=new Ye(e,t.h))}function Ue(t,e,n){t.c.set(e,n)}function Ve(t,e,n){f(n)||(n=[String(n)]),$e(t.c,e,n)}function je(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function Be(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qe(t,e,n){return s(t)?(t=encodeURI(t).replace(e,ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Oe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qe(e,We,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(qe(e,We,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(qe(n,"/"==n.charAt(0)?Qe:He,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",qe(n,Ge)),t.join("")},Oe.prototype.resolve=function(t){var e=Pe(this),n=!!t.f;n?Re(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Me(e,t.b):n=null!=t.i;var r=t.a;if(n)Le(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(N(i,"./")||N(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Fe(e,tn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var We=/[#\/\?@]/g,He=/[#\?:]/g,Qe=/[#\?]/g,Ke=/[#\?@]/g,Ge=/#/g;function Ye(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ze(t){t.a||(t.a=new ke,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Je(t,e){Ze(t),e=en(t,e),Ae(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xe(t.a,e))}function Xe(t,e){return Ze(t),e=en(t,e),Ae(t.a.b,e)}function $e(t,e,n){Je(t,e),0<n.length&&(t.c=null,t.a.set(en(t,e),k(n)),t.b+=n.length)}function tn(t){var e=new Ye;return e.c=t.c,t.a&&(e.a=new ke(t.a),e.b=t.b),e}function en(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(t){var e=t.a.F.a;if(null!=e)$t(4),e?($t(10),Qn(t.a,t,!1)):($t(11),Qn(t.a,t,!0));else{t.b=new he(t,void 0,void 0),t.b.h=t.h,e=Jn(e=t.a,e.Y()?t.f:null,t.i),$t(4),Ve(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Ue(e,n,r),me(t.b,e,!1,t.f)}}function on(){this.a=this.b=null}function an(){this.a=new ke}function sn(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[y]||(t[y]=++m)):e.charAt(0)+t}function un(t,e){this.b=t,this.a=e}function ln(t){this.g=t||cn,t=a.PerformanceNavigationTiming?0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(a.ka&&a.ka.Ea&&a.ka.Ea()&&a.ka.Ea().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new an),this.b=null,this.c=[]}(r=Ye.prototype).add=function(t,e){Ze(this),this.c=null,t=en(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Ze(this),this.a.forEach(function(n,r){T(n,function(n){t.call(e,n,r,this)},this)},this)},r.K=function(){Ze(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){Ze(this);var e=[];if(s(t))Xe(this,t)&&(e=I(e,this.a.get(en(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=I(e,t[n])}return e},r.set=function(t,e){return Ze(this),this.c=null,Xe(this,t=en(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},S(function(){},function(){}),(r=nn.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Rn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Rn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return(e=this.a).m=this.c,void Yn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Yn(e,2)}else 1==this.M&&(this.g?$t(6):"11111"==e?($t(5),this.g=!0,(!z||10<=Number(X))&&(this.c=200,this.b.cancel(),$t(11),Qn(this.a,this,!0))):($t(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?($t(11),Qn(this.a,this,!0)):($t(10),Qn(this.a,this,!1)));else{0==this.M?$t(8):1==this.M&&$t(9);var t=this.a;t.m=this.c,Yn(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},an.prototype.add=function(t){this.a.set(sn(t),t)},an.prototype.C=function(){return this.a.C()};var cn=10;function hn(t,e){!t.a&&(N(e,"spdy")||N(e,"quic")||N(e,"h2"))&&(t.f=t.g,t.a=new an,t.b&&(yn(t,t.b),t.b=null))}function fn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function pn(t){return t.b?1:t.a?t.a.a.c:0}function dn(t,e){return t.b?t=t.b==e:t.a?(e=sn(e),t=Ae(t.a.a.b,e)):t=!1,t}function yn(t,e){t.a?t.a.add(e):t.b=e}function mn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=sn(e),n=Ae(t.a.a.b,n)),n&&xe(t.a.a,sn(e)))}function gn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return T(t.a.C(),function(t){e=e.concat(t.j)}),e}return k(t.c)}function vn(){}function bn(){this.a=new vn}function wn(t,e,n){var r=n||"";try{Ie(t,function(t,n){var i=t;d(t)&&(i=kt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function _n(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ln.prototype.cancel=function(){var t;this.c=gn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),function(t){t.cancel()}),(t=this.a.a).b={},t.a.length=0,t.c=0)},vn.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return a.JSON.parse(t,void 0)};var Sn=a.JSON.parse;function En(t){Tt.call(this),this.headers=new ke,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Cn,this.D=this.F=!1}S(En,Tt);var Cn="",Tn=/^https?$/i,In=["POST","PUT"];function kn(t){return"content-type"==t.toLowerCase()}function xn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Dn(t),Nn(t)}function Dn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function An(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=Pn(t)||2!=t.T()))if(t.l&&4==Pn(t))Bt(t.Fa,0,t);else if(t.dispatchEvent("readystatechange"),4==Pn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.A).match(Ne)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Tn.test(s?s.toLowerCase():"")}e=i}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.h=6,t.f=t.za()+" ["+t.T()+"]",Dn(t))}finally{Nn(t)}}}function Nn(t,e){if(t.a){On(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function On(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(a.clearTimeout(t.m),t.m=null)}function Pn(t){return t.a?t.a.readyState:0}function Rn(t,e){return t.a?t.a.getResponseHeader(e):null}function Mn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return M(n,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(),s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Ue(t,e,n),t}function Ln(t){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!l("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=l("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Sa=l("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Qa=l("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=l("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.La=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new ln(t&&t.concurrentRequestLimit),this.ja=new bn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(t){if(Un(t),3==t.u){var e=t.P++,n=Pe(t.B);Ue(n,"SID",t.H),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),qn(t,n),(e=new he(t,e,void 0)).F=2,e.f=je(Pe(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.f.toString(),"")),!n&&a.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=_(),we(e)}Zn(t)}function Un(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(a.clearTimeout(t.l),t.l=null),Kn(t),t.b.cancel(),t.h&&(u(t.h)&&a.clearTimeout(t.h),t.h=null)}function Vn(t,e){t.f.push(new un(t.Ra++,e)),3==t.u&&jn(t)}function jn(t){fn(t.b)||t.h||(t.h=!0,Mt(t.Ia,t),t.A=0)}function Bn(t,e){var n;n=e?e.W:t.P++;var r=Pe(t.B);Ue(r,"SID",t.H),Ue(r,"RID",n),Ue(r,"AID",t.O),qn(t,r),t.g&&t.i&&Mn(r,t.g,t.i),n=new he(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=zn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),yn(t.b,n),ye(n,r,e)}function qn(t,e){t.c&&Ie({},function(t,n){Ue(e,n,t)})}function zn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?b(t.c.Ta,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var l=i[u].b,c=i[u].a;if(0>(l-=o))o=Math.max(0,i[u].b-100),s=!1;else try{wn(c,a,"req"+l+"_")}catch(h){r&&r(c)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Wn(t){t.a||t.l||(t.S=1,Mt(t.Ha,t),t.v=0)}function Hn(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ee(b(t.Ha,t),Gn(t,t.v)),t.v++,0))}function Qn(t,e,n){var r=e.l;r&&hn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Jn(t,null,t.ha),jn(t)}function Kn(t){null!=t.s&&(a.clearTimeout(t.s),t.s=null)}function Gn(t,e){var n=t.Oa+Math.floor(Math.random()*t.Sa);return t.ma()||(n*=2),n*e}function Yn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=b(t.fb,t);n||(n=new Oe("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Re(n,"https"),je(n)),function(t,e){var n=new Gt;if(a.Image){var r=new Image;r.onload=w(_n,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(_n,n,r,"TestLoadImage: error",!1,e),r.onabort=w(_n,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(_n,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else $t(2);t.u=0,t.c&&t.c.ta(e),Zn(t),Un(t)}function Zn(t){t.u=0,t.m=-1,t.c&&(0==gn(t.b).length&&0==t.f.length||(t.b.c.length=0,k(t.f),t.f.length=0),t.c.sa())}function Jn(t,e,n){var r=function(t){return t instanceof Oe?Pe(t):new Oe(t,void 0)}(n);if(""!=r.b)e&&Me(r,e+"."+r.b),Le(r,r.i);else{var i=a.location;r=function(t,e,n,r){var i=new Oe(null,void 0);return t&&Re(i,t),e&&Me(i,e),n&&Le(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&M(t.V,function(t,e){Ue(r,e,t)}),n=t.I,(e=t.j)&&n&&Ue(r,e,n),Ue(r,"VER",t.wa),qn(t,r),r}function Xn(){}function $n(){if(z&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function tr(t,e){Tt.call(this),this.a=new Ln(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!x(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!x(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new rr(this)}function er(t){ue.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){le.call(this),this.status=1}function rr(t){this.a=t}(r=En.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ae),this.a.onreadystatechange=b(this.Fa,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void xn(this,o)}t=n||"";var i=new ke(this.headers);r&&Ie(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=kn,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(i.K()),n=a.FormData&&t instanceof a.FormData,!(0<=C(In,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{On(this),0<this.o&&((this.D=function(t){return z&&tt(9)&&u(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ca,this)):this.m=Bt(this.Ca,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){xn(this,o)}},r.Ca=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Nn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Nn(this,!0)),En.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?An(this):this.$a())},r.$a=function(){An(this)},r.T=function(){try{return 2<Pn(this)?this.a.status:-1}catch(B){return-1}},r.za=function(){try{return 2<Pn(this)?this.a.statusText:""}catch(B){return""}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(B){return""}},r.Va=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Sn(e)}},r.ya=function(){return this.h},r.Ya=function(){return s(this.f)?this.f:String(this.f)},(r=Ln.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new he(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?U(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=zn(this,n,e),Ue(i=Pe(this.B),"RID",t),Ue(i,"CVER",22),this.o&&this.j&&Ue(i,"X-HTTP-Session-Id",this.j),qn(this,i),this.g&&r&&Mn(i,this.g,r),yn(this.b,n),this.W?(Ue(i,"$req",e),Ue(i,"SID","null"),n.S=!0,ye(n,i,null)):ye(n,i,e),this.u=2}}else 3==this.u&&(t?Bn(this,t):0==this.f.length||fn(this.b)||Bn(this))},r.Ha=function(){this.l=null,this.a=new he(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Pe(this.pa);Ue(t,"RID","rpc"),Ue(t,"SID",this.H),Ue(t,"CI",this.ia?"0":"1"),Ue(t,"AID",this.O),qn(this,t),Ue(t,"TYPE","xmlhttp"),this.g&&this.i&&Mn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),me(this.a,t,!0,this.ga)},r.Ga=function(t,e){if(0!=this.u&&(this.a==t||dn(this.b,t)))if(this.m=t.o,!t.s&&dn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(f(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Kn(this),this.a.cancel(),this.a=null}Hn(this),$t(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ee(b(this.Za,this),6e3));if(1>=pn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Yn(this,11)}else if((t.s||this.a==t)&&Kn(this),!x(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Rn(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=Rn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ue(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Jn(this,this.Y()?this.ga:null,this.ha),r.s?(mn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Se(r),we(r)),this.a=r):Wn(this),0<this.f.length&&jn(this)}else"stop"!=r[0]&&"close"!=r[0]||Yn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Yn(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Hn(this),$t(19))},r.na=function(t){var e=null;if(this.a==t){Kn(this),this.a=null;var n=2}else{if(!dn(this.b,t))return;e=t.j,mn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=_()-t.v,Yt.dispatchEvent(new te(Yt,t.l?t.l.length:0,e,this.A)),jn(this)):Wn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(pn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Pa?0:t.Qa)||(t.h=ee(b(t.Ia,t,e),Gn(t,t.A)),t.A++,0)))}(this,t)||2==n&&Hn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Yn(this,5);break;case 4:Yn(this,10);break;case 3:Yn(this,6);break;default:Yn(this,2)}}},r.fb=function(t){$t(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new En(this.La)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Xn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},$n.prototype.a=function(t,e){return new tr(t,e)},S(tr,Tt),(r=tr.prototype).addEventListener=function(t,e,n,r){tr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){tr.N.removeEventListener.call(this,t,e,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;$t(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new nn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Mn(e,t.g,t.i)),(t=t.w).i=n,e=Jn(t.a,null,t.i),$t(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,rn(t)):(Ve(e,"MODE","init"),!t.a.o&&t.a.j&&Ve(e,"X-HTTP-Session-Id",t.a.j),t.b=new he(t,void 0,void 0),t.b.h=t.h,me(t.b,e,!1,null),t.M=0)},r.close=function(){Fn(this.a)},r.Xa=function(t){if(s(t)){var e={};e.__data__=t,Vn(this.a,e)}else this.h?((e={}).__data__=kt(t),Vn(this.a,e)):Vn(this.a,t)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,tr.N.G.call(this)},S(er,ue),S(nr,le),S(rr,Xn),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(t){this.a.dispatchEvent(new er(t))},rr.prototype.ta=function(t){this.a.dispatchEvent(new nr(t))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=w(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},$n);$n.prototype.createWebChannel=$n.prototype.a,tr.prototype.send=tr.prototype.Xa,tr.prototype.open=tr.prototype.Wa,tr.prototype.close=tr.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",oe.EventType=se,se.OPEN="a",se.CLOSE="b",se.ERROR="c",se.MESSAGE="d",Tt.prototype.listen=Tt.prototype.Aa,En.prototype.listenOnce=En.prototype.Ba,En.prototype.getLastError=En.prototype.Ya,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.T,En.prototype.getStatusText=En.prototype.za,En.prototype.getResponseJson=En.prototype.Va,En.prototype.getResponseText=En.prototype.aa,En.prototype.send=En.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:ne,EventType:re,WebChannel:oe,XhrIo:En},ar=or.createWebChannelTransport,sr=or.ErrorCode,ur=or.EventType,lr=or.WebChannel,cr=or.XhrIo;e.default=or},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("mrSG"),i=Array.isArray||function(t){return t&&"number"==typeof t.length};function o(t){return null!==t&&"object"==typeof t}function a(t){return"function"==typeof t}function s(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}s.prototype=Object.create(Error.prototype);var u=s,l=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,s=this._unsubscribe,l=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var h=-1,f=r?r.length:0;n;)n.remove(this),n=++h<f&&r[h]||null;if(a(s))try{s.call(this)}catch(d){e=!0,t=d instanceof u?c(d.errors):[d]}if(i(l))for(h=-1,f=l.length;++h<f;){var p=l[h];if(o(p))try{p.unsubscribe()}catch(d){e=!0,t=t||[],d instanceof u?t=t.concat(c(d.errors)):t.push(d)}}if(e)throw new u(t)}},t.prototype.add=function(e){var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((e=new t).closed=!0,e),t}();function c(t){return t.reduce(function(t,e){return t.concat(e instanceof u?e.errors:e)},[])}var h=!1,f={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){h=t},get useDeprecatedSynchronousErrorHandling(){return h}};function p(t){setTimeout(function(){throw t})}var d={closed:!0,next:function(t){},error:function(t){if(f.useDeprecatedSynchronousErrorHandling)throw t;p(t)},complete:function(){}},y="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),m=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=d;break;case 1:if(!n){o.destination=d;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new g(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new g(o,n,r,i)}return o}return r.__extends(e,t),e.prototype[y]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(l),g=function(t){function e(e,n,r,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var u=s;return a(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==d&&(a((u=Object.create(n)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=o,s._error=r,s._complete=i,s}return r.__extends(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;f.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=f.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):p(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;p(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};f.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),f.useDeprecatedSynchronousErrorHandling)throw n;p(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!f.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return f.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(p(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(m),v="function"==typeof Symbol&&Symbol.observable||"@@observable";function b(){}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _(t)}function _(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:b}var S=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof m)return t;if(t[y])return t[y]()}return t||e||n?new m(t,e,n):new m(d)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||f.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),f.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){f.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof m?e:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=E(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[v]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:_(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=E(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function E(t){if(t||(t=f.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function C(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}C.prototype=Object.create(Error.prototype);var T=C,I=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.__extends(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(l),k=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.__extends(e,t),e}(m),x=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.__extends(e,t),e.prototype[y]=function(){return new k(this)},e.prototype.lift=function(t){var e=new D(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new T;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new T;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new T;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new T;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new T;return this.hasError?(t.error(this.thrownError),l.EMPTY):this.isStopped?(t.complete(),l.EMPTY):(this.observers.push(t),new I(this,t))},e.prototype.asObservable=function(){var t=new S;return t.source=this,t},e.create=function(t,e){return new D(t,e)},e}(S),D=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.__extends(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):l.EMPTY},e}(x);function A(t){return t&&"function"==typeof t.schedule}var N=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.__extends(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(m),O=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},P=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,p),e}};function R(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var M=R(),L=function(t){return function(e){for(var n=t[M]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},F=function(t){return function(e){var n=t[v]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},U=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function V(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var j=function(t){if(t instanceof S)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[v])return F(t);if(U(t))return O(t);if(V(t))return P(t);if(t&&"function"==typeof t[M])return L(t);var e=o(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function B(t,e,n,r,i){if(void 0===i&&(i=new N(t,n,r)),!i.closed)return j(e)(i)}var q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(m);function z(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new W(t,e))}}var W=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new H(t,this.project,this.thisArg))},t}(),H=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.__extends(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(m);function Q(t,e){return new S(e?function(n){var r=new l,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:O(t))}function K(t,e){if(!e)return t instanceof S?t:new S(j(t));if(null!=t){if(function(t){return t&&"function"==typeof t[v]}(t))return function(t,e){return new S(e?function(n){var r=new l;return r.add(e.schedule(function(){var i=t[v]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:F(t))}(t,e);if(V(t))return function(t,e){return new S(e?function(n){var r=new l;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:P(t))}(t,e);if(U(t))return Q(t,e);if(function(t){return t&&"function"==typeof t[M]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new S(e?function(n){var r,i=new l;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[M](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:L(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function G(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(G(function(n,r){return K(t(n,r)).pipe(z(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new Y(t,n))})}var Y=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Z(t,this.project,this.concurrent))},t}(),Z=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.__extends(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new N(this,void 0,void 0);this.destination.add(r),B(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(q);function J(t){return t}function X(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),G(J,t)}function $(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return A(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof S?t[0]:X(n)(Q(t,r))}function tt(){return function(t){return t.lift(new et(t))}}var et=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new nt(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),nt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.__extends(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(m),rt=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.__extends(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new l).add(this.source.subscribe(new ot(this.getSubject(),this))),t.closed?(this._connection=null,t=l.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return tt()(this)},e}(S).prototype,it={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:rt._subscribe},_isComplete:{value:rt._isComplete,writable:!0},getSubject:{value:rt.getSubject},connect:{value:rt.connect},refCount:{value:rt.refCount}},ot=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.__extends(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(k);function at(){return new x}function st(){return function(t){return tt()((e=at,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,it);return r.source=t,r.subjectFactory=n,r})(t));var e}}var ut="__parameters__",lt="__prop__metadata__";function ct(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var i=t.apply(void 0,Object(r.__spread)(e));for(var o in i)this[o]=i[o]}}}function ht(t,e,n){var i=ct(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var a=new((t=o).bind.apply(t,Object(r.__spread)([void 0],e)));return s.annotation=a,s;function s(t,e,n){for(var r=t.hasOwnProperty(ut)?t[ut]:Object.defineProperty(t,ut,{value:[]})[ut];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}function ft(t,e,n,i){var o=ct(e);function a(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof a)return o.apply(this,e),this;var s=new((t=a).bind.apply(t,Object(r.__spread)([void 0],e)));return function(t,n){var o=t.constructor,a=o.hasOwnProperty(lt)?o[lt]:Object.defineProperty(o,lt,{value:{}})[lt];a[n]=a.hasOwnProperty(n)&&a[n]||[],a[n].unshift(s),i&&i.apply(void 0,Object(r.__spread)([t,n],e))}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=t,a.annotationCls=a,a}var pt=ht("Inject",function(t){return{token:t}}),dt=ht("Optional"),yt=ht("Self"),mt=ht("SkipSelf"),gt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function vt(t){for(var e in t)if(t[e]===vt)return e;throw Error("Could not find renamed property on target object.")}function bt(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function wt(t){return t&&t.hasOwnProperty(_t)?t[_t]:null}var _t=vt({ngInjectableDef:vt});function St(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(St).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}var Et=vt({__forward_ref__:vt});function Ct(t){return t.__forward_ref__=Ct,t.toString=function(){return St(this())},t}function Tt(t){var e=t;return"function"==typeof e&&e.hasOwnProperty(Et)&&e.__forward_ref__===Ct?e():t}function It(){var t="undefined"!=typeof globalThis&&globalThis,e="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,r="undefined"!=typeof global&&global;return t||r||e||n}var kt,xt=It(),Dt=void 0;function At(t){var e=Dt;return Dt=t,e}function Nt(t,e){return void 0===e&&(e=gt.Default),(kt||function(t,e){if(void 0===e&&(e=gt.Default),void 0===Dt)throw new Error("inject() must be called from an injection context");return null===Dt?function(t,e,n){var r=wt(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&gt.Optional)return null;throw new Error("Injector: NOT_FOUND ["+St(t)+"]")}(t,0,e):Dt.get(t,e&gt.Optional?null:void 0,e)})(t,e)}var Ot=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=bt({providedIn:e.providedIn||"root",factory:e.factory}))}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),Pt="__source",Rt=new Object,Mt=new Ot("INJECTOR",-1),Lt=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=Rt),e===Rt){var n=new Error("NullInjectorError: No provider for "+St(t)+"!");throw n.name="NullInjectorError",n}return e},t}(),Ft=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new Ht(t,e):new Ht(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=Rt,t.NULL=new Lt,t.ngInjectableDef=bt({providedIn:"any",factory:function(){return Nt(Mt)}}),t.__NG_ELEMENT_ID__=-1,t}(),Ut=function(t){return t},Vt=[],jt=Ut,Bt=function(){return Array.prototype.slice.call(arguments)},qt=vt({provide:String,useValue:vt}),zt=/\n/gm,Wt="\u0275",Ht=function(){function t(t,e,n){void 0===e&&(e=Ft.NULL),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(Ft,{token:Ft,fn:Ut,deps:Vt,value:this,useNew:!1}),r.set(Mt,{token:Mt,fn:Ut,deps:Vt,value:this,useNew:!1}),function t(e,n){if(n)if((n=Tt(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Gt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Gt("Unexpected provider",n);var i=Tt(n.provide),o=function(t){var e=function(t){var e=Vt,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=Tt(n[r]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof dt||s==dt?i|=1:s instanceof mt||s==mt?i&=-3:s instanceof yt||s==yt?i&=-5:u=s instanceof pt?s.token:Tt(s)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=Tt(t.useExisting),options:6}]}else if(!(n||qt in t))throw Gt("'deps' required",t);return e}(t),n=Ut,r=Vt,i=!1,o=Tt(t.provide);if(qt in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=Tt(t.useClass);else{if("function"!=typeof o)throw Gt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==Bt)throw Qt(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:Bt,value:Vt});a.deps.push({token:i=n,options:6})}var s=e.get(i);if(s&&s.fn==Bt)throw Qt(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=gt.Default);var i=this._records.get(t);try{return function t(e,n,i,o,a,s){try{return function(e,n,i,o,a,s){var u,l;if(!n||s&gt.SkipSelf)s&gt.Self||(l=o.get(e,a,gt.Default));else{if((l=n.value)==jt)throw Error(Wt+"Circular dependency");if(l===Vt){n.value=jt;var c=n.useNew,h=n.fn,f=n.deps,p=Vt;if(f.length){p=[];for(var d=0;d<f.length;d++){var y=f[d],m=y.options,g=2&m?i.get(y.token):void 0;p.push(t(y.token,g,i,g||4&m?o:Ft.NULL,1&m?null:Ft.THROW_IF_NOT_FOUND,gt.Default))}}n.value=l=c?new((u=h).bind.apply(u,Object(r.__spread)([void 0],p))):h.apply(void 0,p)}}return l}(e,n,i,o,a,s)}catch(u){throw u instanceof Error||(u=new Error(u)),(u.ngTempTokenPath=u.ngTempTokenPath||[]).unshift(e),n&&n.value==jt&&(n.value=Vt),u}}(t,i,this._records,this.parent,e,n)}catch(o){return function(t,e,n,r){var i=t.ngTempTokenPath;throw e[Pt]&&i.unshift(e[Pt]),t.message=Kt("\n"+t.message,i,"StaticInjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,0,this.source)}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(St(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function Qt(t){return Gt("Cannot mix multi providers and regular providers",t)}function Kt(t,e,n,r){void 0===r&&(r=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Wt?t.substr(2):t;var i=St(e);if(e instanceof Array)i=e.map(St).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):St(s)))}i="{"+o.join(", ")+"}"}return n+(r?"("+r+")":"")+"["+i+"]: "+t.replace(zt,"\n  ")}function Gt(t,e){return new Error(Kt(t,e,"StaticInjectorError"))}var Yt="ngDebugContext",Zt="ngOriginalError",Jt="ngErrorLogger",Xt=new Ot("AnalyzeForEntryComponents"),$t=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),te=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(xt)}();function ee(t){return t[Yt]}function ne(t){return t[Zt]}function re(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,Object(r.__spread)(e))}var ie=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[Jt]||re}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?ee(t)?ee(t):this._findContext(ne(t)):null},t.prototype._findOriginalError=function(t){for(var e=ne(t);e&&ne(e);)e=ne(e);return e},t}(),oe=!0,ae=!1;function se(){return ae=!0,oe}var ue=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},t}(),le=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,ce=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function he(t){return(t=String(t)).match(le)||t.match(ce)?t:(se()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function fe(t){var e,n,i={};try{for(var o=Object(r.__values)(t.split(",")),a=o.next();!a.done;a=o.next())i[a.value]=!0}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function pe(){for(var t,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={};try{for(var a=Object(r.__values)(n),s=a.next();!s.done;s=a.next()){var u=s.value;for(var l in u)u.hasOwnProperty(l)&&(o[l]=!0)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o}var de,ye=fe("area,br,col,hr,img,wbr"),me=fe("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ge=fe("rp,rt"),ve=pe(ge,me),be=pe(ye,pe(me,fe("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pe(ge,fe("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ve),we=fe("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_e=fe("srcset"),Se=pe(we,_e,fe("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fe("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ee=fe("script,style,template"),Ce=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e,n=t.nodeName.toLowerCase();if(!be.hasOwnProperty(n))return this.sanitizedSomething=!0,!Ee.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);for(var r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(Se.hasOwnProperty(s)){var u=o.value;we[s]&&(u=he(u)),_e[s]&&(e=u,u=(e=String(e)).split(",").map(function(t){return he(t.trim())}).join(", ")),this.buf.push(" ",a,'="',ke(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();be.hasOwnProperty(e)&&!ye.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(ke(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),Te=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ie=/([^\#-~ |!])/g;function ke(t){return t.replace(/&/g,"&amp;").replace(Te,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Ie,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xe(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var De=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),Ae=function(){return function(){}}(),Ne=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Oe=/^url\(([^)]+)\)$/,Pe=/([A-Z])/g;function Re(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}function Me(t){return!!t&&"function"==typeof t.then}function Le(t){return!!t&&"function"==typeof t.subscribe}var Fe=null;function Ue(){if(!Fe){var t=xt.Symbol;if(t&&t.iterator)Fe=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Fe=r)}}return Fe}function Ve(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function je(t,e){var n=qe(t),r=qe(e);return n&&r?function(t,e,n){for(var r=t[Ue()](),i=e[Ue()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,je):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||Ve(t,e)}var Be=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}();function qe(t){return!!ze(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ue()in t)}function ze(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var We=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}(),He=new Ot("The presence of this token marks an injector as being the root injector."),Qe=function(){return function(){}}(),Ke=function(){return function(){}}();function Ge(t){var e=Error("No component factory found for "+St(t)+". Did you add it to @NgModule.entryComponents?");return e[Ye]=t,e}var Ye="ngComponent",Ze=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw Ge(t)},t}(),Je=function(){function t(){}return t.NULL=new Ze,t}(),Xe=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Ge(t);return new $e(e,this._ngModule)},t}(),$e=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return Object(r.__extends)(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(Ke),tn=function(){return function(){}}(),en=function(){return function(){}}();function nn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}var rn=function(){function t(t){this.nativeElement=t}return t.__NG_ELEMENT_ID__=function(){return on(t)},t}(),on=nn,an=function(){return function(){}}(),sn=function(){return function(){}}(),un=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),ln=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return cn()},t}(),cn=nn,hn=new(function(){return function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}())("8.0.0"),fn=function(){function t(){}return t.prototype.supports=function(t){return qe(t)},t.prototype.create=function(t){return new dn(t)},t}(),pn=function(t,e){return e},dn=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||pn}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<vn(n,r,i)?e:n,a=vn(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,f=h+c;l<=f&&f<u&&(i[c]=h+1)}i[o.previousIndex]=l-u}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!qe(t))throw new Error("Error trying to diff '"+St(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=t[s]),null!==o&&Ve(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Ve(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[Ue()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&Ve(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Ve(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ve(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ve(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new yn(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new gn),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),yn=function(){return function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),mn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ve(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),gn=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new mn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function vn(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var bn=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||ze(t)},t.prototype.create=function(){return new wn},t}(),wn=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||ze(t)))throw new Error("Error trying to diff '"+St(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new _n(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){Ve(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),_n=function(){return function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),Sn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new mt,new dt]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=bt({providedIn:"root",factory:function(){return new t([new fn])}}),t}(),En=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new mt,new dt]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t.ngInjectableDef=bt({providedIn:"root",factory:function(){return new t([new bn])}}),t}(),Cn=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return Tn()},t}(),Tn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},In=[new bn],kn=new Sn([new fn]),xn=new En(In),Dn=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return An(t,rn)},t}(),An=nn,Nn=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return On(t,rn)},t}(),On=nn;function Pn(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Rn(n,e),n}(i,t)}function Rn(t,e){t[Yt]=e,t[Jt]=e.logError.bind(e)}function Mn(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}function Ln(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Fn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Un(t,e){return t.nodes[e]}function Vn(t,e){return t.nodes[e]}function jn(t,e){return t.nodes[e]}function Bn(t,e){return t.nodes[e]}function qn(t,e){return t.nodes[e]}var zn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Wn=function(){},Hn=new Map;function Qn(t){var e=Hn.get(t);return e||(e=St(t)+"_"+Hn.size,Hn.set(t,e)),e}function Kn(t,e,n,r){if(Be.isWrapped(r)){r=Be.unwrap(r);var i=t.def.nodes[e].bindingIndex+n,o=Be.unwrap(t.oldValues[i]);t.oldValues[i]=new Be(o)}return r}var Gn="$$undefined",Yn="$$empty";function Zn(t){return{id:Gn,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Jn=0;function Xn(t,e,n,r){return!(!(2&t.state)&&Ve(t.oldValues[e.bindingIndex+n],r))}function $n(t,e,n,r){return!!Xn(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function tr(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!je(i,r)){var o=e.bindings[n].name;throw Pn(zn.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function er(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function nr(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function rr(t,e,n,r){try{return er(33554432&t.def.nodes[e].flags?Vn(t,e).componentView:t),zn.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function ir(t){return t.parent?Vn(t.parent,t.parentNodeDef.nodeIndex):null}function or(t){return t.parent?t.parentNodeDef.parent:null}function ar(t,e){switch(201347067&e.flags){case 1:return Vn(t,e.nodeIndex).renderElement;case 2:return Un(t,e.nodeIndex).renderText}}function sr(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function ur(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function lr(t){return 1<<t%32}function cr(t){var e={},n=0,i={};return t&&t.forEach(function(t){var o=Object(r.__read)(t,2),a=o[0],s=o[1];"number"==typeof a?(e[a]=s,n|=lr(a)):i[a]=s}),{matchedQueries:e,references:i,matchedQueryIds:n}}function hr(t,e){return t.map(function(t){var n,i,o;return Array.isArray(t)?(o=(n=Object(r.__read)(t,2))[0],i=n[1]):(o=0,i=t),i&&("function"==typeof i||"object"==typeof i)&&e&&Object.defineProperty(i,Pt,{value:e,configurable:!0}),{flags:o,token:i,tokenKey:Qn(i)}})}function fr(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===$t.Native?Vn(t,n.renderParent.nodeIndex).renderElement:void 0:e}var pr=new WeakMap;function dr(t){var e=pr.get(t);return e||((e=t(function(){return Wn})).factory=t,pr.set(t,e)),e}function yr(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(ar(t,t.def.lastRenderRootNode))),mr(t,e,0,t.def.nodes.length-1,n,r,i)}function mr(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&vr(t,u,e,i,o,a),s+=u.childCount}}function gr(t,e,n,r,i,o){for(var a=t;a&&!sr(a);)a=a.parent;for(var s=a.parent,u=or(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=s.def.nodes[c];h.ngContentIndex===e&&vr(s,h,n,r,i,o),c+=h.childCount}if(!s.parent){var f=t.root.projectableNodes[e];if(f)for(c=0;c<f.length;c++)br(t,f[c],n,r,i,o)}}function vr(t,e,n,r,i,o){if(8&e.flags)gr(t,e.ngContent.index,n,r,i,o);else{var a=ar(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&br(t,a,n,r,i,o),32&e.bindingFlags&&br(Vn(t,e.nodeIndex).componentView,a,n,r,i,o)):br(t,a,n,r,i,o),16777216&e.flags)for(var s=Vn(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)yr(s[u],n,r,i,o);1&e.flags&&!e.element.name&&mr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function br(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var wr=/^:([^:]+):(.+)$/;function _r(t){if(":"===t[0]){var e=t.match(wr);return[e[1],e[2]]}return["",t]}function Sr(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}var Er=new Object,Cr=Qn(Ft),Tr=Qn(Mt),Ir=Qn(tn);function kr(t,e,n,r){return n=Tt(n),{index:-1,deps:hr(r,St(e)),flags:t,token:e,value:n}}function xr(t,e,n){void 0===n&&(n=Ft.THROW_IF_NOT_FOUND);var r,i,o=At(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var a=e.tokenKey;switch(a){case Cr:case Tr:case Ir:return t}var s,u=t._def.providersByKey[a];if(u){var l=t._providers[u.index];return void 0===l&&(l=t._providers[u.index]=Dr(t,u)),l===Er?void 0:l}if((s=wt(e.token))&&(r=t,null!=(i=s).providedIn&&(function(t,e){return t._def.modules.indexOf(i.providedIn)>-1}(r)||"root"===i.providedIn&&r._def.isRoot))){var c=t._providers.length;return t._def.providers[c]=t._def.providersByKey[e.tokenKey]={flags:5120,value:s.factory,deps:[],index:c,token:e.token},t._providers[c]=Er,t._providers[c]=Dr(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{At(o)}}function Dr(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(xr(t,n[0]));case 2:return new e(xr(t,n[0]),xr(t,n[1]));case 3:return new e(xr(t,n[0]),xr(t,n[1]),xr(t,n[2]));default:for(var o=new Array(i),a=0;a<i;a++)o[a]=xr(t,n[a]);return new(e.bind.apply(e,Object(r.__spread)([void 0],o)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(xr(t,n[0]));case 2:return e(xr(t,n[0]),xr(t,n[1]));case 3:return e(xr(t,n[0]),xr(t,n[1]),xr(t,n[2]));default:for(var o=Array(i),a=0;a<i;a++)o[a]=xr(t,n[a]);return e.apply(void 0,Object(r.__spread)(o))}}(t,e.value,e.deps);break;case 2048:n=xr(t,e.deps[0]);break;case 256:n=e.value}return n===Er||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Er:n}function Ar(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,Rr(n,e),zn.dirtyParentQueries(r),Or(r),r}function Nr(t,e,n){var r=e?ar(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);yr(n,2,i,o,void 0)}function Or(t){yr(t,3,null,null,void 0)}function Pr(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Rr(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var Mr=new Object;function Lr(t,e,n,r,i,o){return new Fr(t,e,n,r,i,o)}var Fr=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=dr(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=zn.createRootView(t,e||[],n,i,r,Mr),s=jn(a,o).instance;return n&&a.renderer.setAttribute(Vn(a,0).renderElement,"ng-version",hn.full),new Ur(a,new qr(a),s)},e}(Ke),Ur=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new rn(Vn(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Qr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(Qe);function Vr(t,e,n){return new jr(t,e,n)}var jr=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new rn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Qr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=or(t),t=t.parent;return t?new Qr(t,e):new Qr(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Ar(this._data,t);zn.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new qr(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof $e||(i=o.get(tn));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a=t;return o=(n=this._data).viewContainer._embeddedViews,null==(r=e)&&(r=o.length),(i=a._view).viewContainerParent=this._view,Pr(o,r,i),function(t,e){var n=ir(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),zn.dirtyParentQueries(i),Nr(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return i=e,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],Rr(o,r),null==i&&(i=o.length),Pr(o,i,a),zn.dirtyParentQueries(a),Or(a),Nr(n,i>0?o[i-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Ar(this._data,t);e&&zn.destroyView(e)},t.prototype.detach=function(t){var e=Ar(this._data,t);return e?new qr(e):null},t}();function Br(t){return new qr(t)}var qr=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return yr(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){er(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{zn.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){zn.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),zn.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Or(this._view),zn.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function zr(t,e){return new Wr(t,e)}var Wr=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return Object(r.__extends)(e,t),e.prototype.createEmbeddedView=function(t){return new qr(zn.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new rn(Vn(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(Dn);function Hr(t,e){return new Qr(t,e)}var Qr=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=Ft.THROW_IF_NOT_FOUND),zn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Qn(t)},e)},t}();function Kr(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Vn(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Un(t,n.nodeIndex).renderText;if(20240&n.flags)return jn(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function Gr(t){return new Yr(t.renderer)}var Yr=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=Object(r.__read)(_r(e),2),i=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,i),i},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var i=Object(r.__read)(_r(e),2),o=i[0],a=i[1];null!=n?this.delegate.setAttribute(t,a,n,o):this.delegate.removeAttribute(t,a,o)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function Zr(t,e,n,r){return new Jr(t,e,n,r)}var Jr=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Dr(t,i))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=Ft.THROW_IF_NOT_FOUND),void 0===n&&(n=gt.Default);var r=0;return n&gt.SkipSelf?r|=1:n&gt.Self&&(r|=4),xr(this,{token:t,tokenKey:Qn(t),flags:r},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(Je)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+St(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==Er){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),Xr=Qn(an),$r=Qn(ln),ti=Qn(rn),ei=Qn(Nn),ni=Qn(Dn),ri=Qn(Cn),ii=Qn(Ft),oi=Qn(Mt);function ai(t,e,n,i,o,a,s,u){var l=[];if(s)for(var c in s){var h=Object(r.__read)(s[c],2);l[h[0]]={flags:8,name:c,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var f=[];if(u)for(var p in u)f.push({type:1,propName:p,target:null,eventName:u[p]});return li(t,e|=16384,n,i,o,o,a,l,f)}function si(t,e,n){return li(-1,t|=16,null,0,e,e,n)}function ui(t,e,n,r,i){return li(-1,t,e,0,n,r,i)}function li(t,e,n,r,i,o,a,s,u){var l=cr(n),c=l.matchedQueries,h=l.references,f=l.matchedQueryIds;u||(u=[]),s||(s=[]),o=Tt(o);var p=hr(a,St(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:Sr(s),outputs:u,element:null,provider:{token:i,value:o,deps:p},text:null,query:null,ngContent:null}}function ci(t,e){return di(t,e)}function hi(t,e){for(var n=t;n.parent&&!sr(n);)n=n.parent;return yi(n.parent,or(n),!0,e.provider.value,e.provider.deps)}function fi(t,e){var n=yi(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName];if(!Le(o))throw new Error("@Output "+i.propName+" not initialized in '"+n.constructor.name+"'.");var a=o.subscribe(pi(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=a.unsubscribe.bind(a)}return n}function pi(t,e,n){return function(r){return rr(t,e,n,r)}}function di(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return yi(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,o){var a=o.length;switch(a){case 0:return i();case 1:return i(gi(t,e,n,o[0]));case 2:return i(gi(t,e,n,o[0]),gi(t,e,n,o[1]));case 3:return i(gi(t,e,n,o[0]),gi(t,e,n,o[1]),gi(t,e,n,o[2]));default:for(var s=Array(a),u=0;u<a;u++)s[u]=gi(t,e,n,o[u]);return i.apply(void 0,Object(r.__spread)(s))}}(t,e.parent,n,i.value,i.deps);case 2048:return gi(t,e.parent,n,i.deps[0]);case 256:return i.value}}function yi(t,e,n,i,o){var a=o.length;switch(a){case 0:return new i;case 1:return new i(gi(t,e,n,o[0]));case 2:return new i(gi(t,e,n,o[0]),gi(t,e,n,o[1]));case 3:return new i(gi(t,e,n,o[0]),gi(t,e,n,o[1]),gi(t,e,n,o[2]));default:for(var s=new Array(a),u=0;u<a;u++)s[u]=gi(t,e,n,o[u]);return new(i.bind.apply(i,Object(r.__spread)([void 0],s)))}}var mi={};function gi(t,e,n,r,i){if(void 0===i&&(i=Ft.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;a===ri&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case Xr:return Gr(vi(s,e,n));case $r:return vi(s,e,n).renderer;case ti:return new rn(Vn(s,e.nodeIndex).renderElement);case ei:return Vn(s,e.nodeIndex).viewContainer;case ni:if(e.element.template)return Vn(s,e.nodeIndex).template;break;case ri:return Br(vi(s,e,n));case ii:case oi:return Hr(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var l=jn(s,u.nodeIndex);return l||(l={instance:di(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=sr(s),e=or(s),s=s.parent,4&r.flags&&(s=null)}var c=o.root.injector.get(r.token,mi);return c!==mi||i===mi?c:o.root.ngModule.injector.get(r.token,i)}function vi(t,e,n){var r;if(n)r=Vn(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!sr(r);)r=r.parent;return r}function bi(t,e,n,r,i,o){if(32768&n.flags){var a=Vn(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=Be.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new We(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function wi(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&Si(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=_i(t,a,e,r)),a=a.parent}}function _i(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Si(t,i,o.flags&n,r++),i+=o.childCount}return r}function Si(t,e,n,r){var i=jn(t,e);if(i){var o=i.instance;o&&(zn.setCurrentNode(t,e),1048576&n&&Fn(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Fn(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}var Ei=new Ot("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return te}}),Ci=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Object(r.__extends)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var s=t.prototype.subscribe.call(this,i,o,a);return e instanceof l&&e.add(s),s},e}(x),Ti=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Ci,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[Ue()]=function(){return this._results[Ue()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),Ii=function(){return function(){}}(),ki=ft("Input",function(t){return{bindingPropertyName:t}}),xi=ft("HostBinding",function(t){return{hostPropertyName:t}}),Di=new Ot("Application Initializer"),Ai=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Me(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),Ni=new Ot("AppId");function Oi(){return""+Pi()+Pi()+Pi()}function Pi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Ri=new Ot("Platform Initializer"),Mi=new Ot("Platform ID"),Li=new Ot("appBootstrapListener"),Fi=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function Ui(){throw new Error("Runtime compiler is not loaded")}var Vi,ji,Bi=Ui,qi=Ui,zi=Ui,Wi=Ui,Hi=function(){function t(){this.compileModuleSync=Bi,this.compileModuleAsync=qi,this.compileModuleAndAllComponentsSync=zi,this.compileModuleAndAllComponentsAsync=Wi}return t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),Qi=function(){return function(){}}();function Ki(){var t=xt.wtf;return!(!t||!(Vi=t.trace)||(ji=Vi.events,0))}var Gi=Ki();function Yi(t,e){return null}var Zi=Gi?function(t,e){return void 0===e&&(e=null),ji.createScope(t,e)}:function(t,e){return Yi},Ji=Gi?function(t,e){return Vi.leaveScope(t,e),e}:function(t,e){return e},Xi=function(){return Promise.resolve(0)}();function $i(t){"undefined"==typeof Zone?Xi.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var to=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ci(!1),this.onMicrotaskEmpty=new Ci(!1),this.onStable=new Ci(!1),this.onError=new Ci(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,a){try{return io(e),t.invokeTask(r,i,o,a)}finally{oo(e)}},onInvoke:function(t,n,r,i,o,a,s){try{return io(e),t.invoke(r,i,o,a,s)}finally{oo(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,ro(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,no,eo,eo);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function eo(){}var no={};function ro(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function io(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function oo(t){t._nesting--,ro(t)}var ao,so=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ci,this.onMicrotaskEmpty=new Ci,this.onStable=new Ci,this.onError=new Ci}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),uo=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){e.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){to.assertNotInAngularZone(),$i(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())$i(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]},t.prototype.addCallback=function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),lo=function(){function t(){this._applications=new Map,co.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),co.findTestabilityInTree(this,t,e)},Object(r.__decorate)([Object(r.__metadata)("design:paramtypes",[])],t)}(),co=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),ho=new Ot("AllowMultipleToken"),fo=function(){return function(t,e){this.name=t,this.token=e}}();function po(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new Ot(r);return function(e){void 0===e&&(e=[]);var o=yo();if(!o||o.injector.get(ho,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(ao&&!ao.destroyed&&!ao.injector.get(ho,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ao=t.get(mo);var e=t.get(Ri,null);e&&e.forEach(function(t){return t()})}(Ft.create({providers:a,name:r}))}return function(t){var e=yo();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function yo(){return ao&&!ao.destroyed?ao:null}var mo=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new so:("zone.js"===n?void 0:n)||new to({enableLongStackTrace:se()}),o=[{provide:to,useValue:i}];return i.run(function(){var e=Ft.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(ie,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return bo(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,i){try{var o=((a=n.injector.get(Ai)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return Me(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(s){throw e.runOutsideAngular(function(){return t.handleError(s)}),s}var a}(a,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=go({},e);return function(t,e,n){return t.get(Qi).createCompiler([e]).compileModuleAsync(n)}(this.injector,r,t).then(function(t){return n.bootstrapModuleFactory(t,r)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(vo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+St(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function go(t,e){return Array.isArray(e)?e.reduce(go,t):Object(r.__assign)({},t,e)}var vo=function(){function t(t,e,n,r,i,o){var a=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=se(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new S(function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){t.next(a._stable),t.complete()})}),u=new S(function(t){var e;a._zone.runOutsideAngular(function(){e=a._zone.onStable.subscribe(function(){to.assertNotInAngularZone(),$i(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){to.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=$(s,u.pipe(st()))}var e;return e=t,t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Ke?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof $e?null:this._injector.get(tn),o=n.create(Ft.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(uo,null);return a&&o.injector.get(lo).registerApplication(o.location.nativeElement,a),this._loadComponent(o),se()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var t,n,i,o,a=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var s=e._tickScope();try{this._runningTick=!0;try{for(var u=Object(r.__values)(this._views),l=u.next();!l.done;l=u.next())l.value.detectChanges()}catch(f){t={error:f}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}if(this._enforceNoNewChanges)try{for(var c=Object(r.__values)(this._views),h=c.next();!h.done;h=c.next())h.value.checkNoChanges()}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}catch(d){this._zone.runOutsideAngular(function(){return a._exceptionHandler.handleError(d)})}finally{this._runningTick=!1,Ji(s)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;bo(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Li,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),bo(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Zi("ApplicationRef#tick()"),t}();function bo(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var wo=function(){return function(){}}(),_o={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},So=function(){function t(t,e){this._compiler=t,this._config=e||_o}return t.prototype.load=function(t){return this._compiler instanceof Hi?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,i=Object(r.__read)(t.split("#"),2),o=i[0],a=i[1];return void 0===a&&(a="default"),n("zn8P")(o).then(function(t){return t[a]}).then(function(t){return Eo(t,o,a)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=Object(r.__read)(t.split("#"),2),i=e[0],o=e[1],a="NgFactory";return void 0===o&&(o="default",a=""),n("zn8P")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(t){return t[o+a]}).then(function(t){return Eo(t,i,o)})},t}();function Eo(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var Co=function(){return function(t,e){this.name=t,this.callback=e}}(),To=function(){function t(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof Io&&e.addChild(this)}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),Io=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return Object(r.__extends)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,i=this,o=this.childNodes.indexOf(t);-1!==o&&((n=this.childNodes).splice.apply(n,Object(r.__spread)([o+1,0],e)),e.forEach(function(e){e.parent&&e.parent.removeChild(e),t.parent=i}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,r){e.childNodes.forEach(function(e){e instanceof Io&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,r){e instanceof Io&&e.childNodes.forEach(function(e){n(e)&&r.push(e),e instanceof Io&&t(e,n,r)})}(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(To),ko=new Map,xo=function(t){return ko.get(t)||null};function Do(t){ko.set(t.nativeNode,t)}var Ao=po(null,"core",[{provide:Mi,useValue:"unknown"},{provide:mo,deps:[Ft]},{provide:lo,deps:[]},{provide:Fi,deps:[]}]),No=new Ot("LocaleId");function Oo(){return kn}function Po(){return xn}function Ro(t){return t||"en-US"}function Mo(t){var e=[];return t.onStable.subscribe(function(){for(;e.length;)e.pop()()}),function(t){e.push(t)}}var Lo=function(){return function(t){}}();function Fo(t,e,n,r,i,o){t|=1;var a=cr(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?dr(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Wn},provider:null,text:null,query:null,ngContent:null}}function Uo(t,e,n,i,o,a,s,u,l,c,h,f){var p;void 0===s&&(s=[]),c||(c=Wn);var d=cr(n),y=d.matchedQueries,m=d.references,g=d.matchedQueryIds,v=null,b=null;a&&(v=(p=Object(r.__read)(_r(a),2))[0],b=p[1]),u=u||[];for(var w=new Array(u.length),_=0;_<u.length;_++){var S=Object(r.__read)(u[_],3),E=S[0],C=S[1],T=S[2],I=Object(r.__read)(_r(C),2),k=I[0],x=I[1],D=void 0,A=void 0;switch(15&E){case 4:A=T;break;case 1:case 8:D=T}w[_]={flags:E,ns:k,name:x,nonMinifiedName:x,securityContext:D,suffix:A}}l=l||[];var N=new Array(l.length);for(_=0;_<l.length;_++){var O=Object(r.__read)(l[_],2);N[_]={type:0,target:O[0],eventName:O[1],propName:null}}var P=(s=s||[]).map(function(t){var e=Object(r.__read)(t,2),n=e[0],i=e[1],o=Object(r.__read)(_r(n),2);return[o[0],o[1],i]});return f=function(t){if(t&&t.id===Gn){var e=null!=t.encapsulation&&t.encapsulation!==$t.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Jn++:Yn}return t&&t.id===Yn&&(t=null),t||null}(f),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:y,matchedQueryIds:g,references:m,ngContentIndex:i,childCount:o,bindings:w,bindingFlags:Sr(w),outputs:N,element:{ns:v,name:b,attrs:P,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:c||Wn},provider:null,text:null,query:null,ngContent:null}}function Vo(t,e,n){var i,o=n.element,a=t.root.selectorOrNode,s=t.renderer;if(t.parent||!a){i=o.name?s.createElement(o.name,o.ns):s.createComment("");var u=fr(t,e,n);u&&s.appendChild(u,i)}else i=s.selectRootElement(a,!!o.componentRendererType&&o.componentRendererType.encapsulation===$t.ShadowDom);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var c=Object(r.__read)(o.attrs[l],3);s.setAttribute(i,c[1],c[2],c[0])}return i}function jo(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=Bo(t,n.nodeIndex,(h=o.eventName,(c=o.target)?c+":"+h:h)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var l=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=l}var c,h}function Bo(t,e,n){return function(r){return rr(t,e,n,r)}}function qo(t,e,n,r){if(!$n(t,e,n,r))return!1;var i=e.bindings[n],o=Vn(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(De.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}function zo(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:lr(e),bindings:r},ngContent:null}}function Wo(t){for(var e=t.def.nodeMatchedQueries;t.parent&&ur(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&qn(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&qn(t,i).setDirty(),i+=o.childCount}}function Ho(t,e){var n=qn(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=Qo(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=jn(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=Qo(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function Qo(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(Ko(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Vn(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(Qo(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],f=ir(h);f&&f===u&&Qo(h,0,h.def.nodes.length-1,r,i)}var p=u.template._projectedViews;if(p)for(c=0;c<p.length;c++){var d=p[c];Qo(d,0,d.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function Ko(t,e,n){if(null!=n)switch(n){case 1:return Vn(t,e.nodeIndex).renderElement;case 0:return new rn(Vn(t,e.nodeIndex).renderElement);case 2:return Vn(t,e.nodeIndex).template;case 3:return Vn(t,e.nodeIndex).viewContainer;case 4:return jn(t,e.nodeIndex).instance}}function Go(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function Yo(t,e,n){var r=fr(t,e,n);r&&gr(t,n.ngContent.index,1,r,null,void 0)}function Zo(t,e){return Xo(32,t,new Array(e))}function Jo(t,e){for(var n=Object.keys(e),r=n.length,i=new Array(r),o=0;o<r;o++){var a=n[o];i[e[a]]=a}return Xo(64,t,i)}function Xo(t,e,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var o=n[i];r[i]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Sr(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function $o(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function ta(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=fr(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function ea(t,e){return(null!=t?t.toString():"")+e.suffix}function na(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,l=null,c=null,h=!1,f=!1,p=null,d=0;d<e.length;d++){var y=e[d];if(y.nodeIndex=d,y.parent=l,y.bindingIndex=i,y.outputIndex=o,y.renderParent=c,a|=y.flags,u|=y.matchedQueryIds,y.element){var m=y.element;m.publicProviders=l?l.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,h=!1,f=!1,y.element.template&&(u|=y.element.template.nodeMatchedQueries)}if(ia(l,y,e.length),i+=y.bindings.length,o+=y.outputs.length,!c&&3&y.flags&&(p=y),20224&y.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var g=0!=(32768&y.flags);0==(8192&y.flags)||g?l.element.publicProviders[Qn(y.provider.token)]=y:(f||(f=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Qn(y.provider.token)]=y),g&&(l.element.componentProvider=y)}if(l?(l.childFlags|=y.flags,l.directChildFlags|=y.flags,l.childMatchedQueries|=y.matchedQueryIds,y.element&&y.element.template&&(l.childMatchedQueries|=y.element.template.nodeMatchedQueries)):s|=y.flags,y.childCount>0)l=y,ra(y)||(c=y);else for(;l&&d===l.nodeIndex+l.childCount;){var v=l.parent;v&&(v.childFlags|=l.childFlags,v.childMatchedQueries|=l.childMatchedQueries),c=(l=v)&&ra(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Wn,updateRenderer:r||Wn,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:p}}function ra(t){return 0!=(1&t.flags)&&null===t.element.name}function ia(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function oa(t,e,n,r){var i=ua(t.root,t.renderer,t,e,n);return la(i,t.component,r),ca(i),i}function aa(t,e,n){var r=ua(t,t.renderer,null,null,e);return la(r,n,n),ca(r),r}function sa(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,ua(t.root,i,t,e.element.componentProvider,n)}function ua(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function la(t,e,n){t.component=e,t.context=n}function ca(t){var e;sr(t)&&(e=Vn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];zn.setCurrentNode(t,i);var a=void 0;switch(201347067&o.flags){case 1:var s=Vo(t,e,o),u=void 0;if(33554432&o.flags){var l=dr(o.element.componentView);u=zn.createComponentView(t,o,l,s)}jo(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?zr(t,o):void 0},16777216&o.flags&&(a.viewContainer=Vr(t,o,a));break;case 2:a=ta(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:ci(t,o)});break;case 16:a={instance:hi(t,o)};break;case 16384:(a=r[i])||(a={instance:fi(t,o)}),32768&o.flags&&la(Vn(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Ti;break;case 8:Yo(t,e,o),a=void 0}r[i]=a}ba(t,va.CreateViewNodes),Ea(t,201326592,268435456,0)}function ha(t){da(t),zn.updateDirectives(t,1),wa(t,va.CheckNoChanges),zn.updateRenderer(t,1),ba(t,va.CheckNoChanges),t.state&=-97}function fa(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Ln(t,0,256),da(t),zn.updateDirectives(t,0),wa(t,va.CheckAndUpdate),Ea(t,67108864,536870912,0);var e=Ln(t,256,512);wi(t,2097152|(e?1048576:0)),zn.updateRenderer(t,0),ba(t,va.CheckAndUpdate),Ea(t,134217728,536870912,0),wi(t,8388608|((e=Ln(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Ln(t,768,1024)}function pa(t,e,n,i,o,a,s,u,l,c,h,f,p){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,l,c,h){var f=e.bindings.length,p=!1;return f>0&&qo(t,e,0,n)&&(p=!0),f>1&&qo(t,e,1,r)&&(p=!0),f>2&&qo(t,e,2,i)&&(p=!0),f>3&&qo(t,e,3,o)&&(p=!0),f>4&&qo(t,e,4,a)&&(p=!0),f>5&&qo(t,e,5,s)&&(p=!0),f>6&&qo(t,e,6,u)&&(p=!0),f>7&&qo(t,e,7,l)&&(p=!0),f>8&&qo(t,e,8,c)&&(p=!0),f>9&&qo(t,e,9,h)&&(p=!0),p}(t,e,n,r,i,o,a,s,u,l,c,h);case 2:return function(t,e,n,r,i,o,a,s,u,l,c,h){var f=!1,p=e.bindings,d=p.length;if(d>0&&$n(t,e,0,n)&&(f=!0),d>1&&$n(t,e,1,r)&&(f=!0),d>2&&$n(t,e,2,i)&&(f=!0),d>3&&$n(t,e,3,o)&&(f=!0),d>4&&$n(t,e,4,a)&&(f=!0),d>5&&$n(t,e,5,s)&&(f=!0),d>6&&$n(t,e,6,u)&&(f=!0),d>7&&$n(t,e,7,l)&&(f=!0),d>8&&$n(t,e,8,c)&&(f=!0),d>9&&$n(t,e,9,h)&&(f=!0),f){var y=e.text.prefix;d>0&&(y+=ea(n,p[0])),d>1&&(y+=ea(r,p[1])),d>2&&(y+=ea(i,p[2])),d>3&&(y+=ea(o,p[3])),d>4&&(y+=ea(a,p[4])),d>5&&(y+=ea(s,p[5])),d>6&&(y+=ea(u,p[6])),d>7&&(y+=ea(l,p[7])),d>8&&(y+=ea(c,p[8])),d>9&&(y+=ea(h,p[9]));var m=Un(t,e.nodeIndex).renderText;t.renderer.setValue(m,y)}return f}(t,e,n,r,i,o,a,s,u,l,c,h);case 16384:return function(t,e,n,r,i,o,a,s,u,l,c,h){var f=jn(t,e.nodeIndex),p=f.instance,d=!1,y=void 0,m=e.bindings.length;return m>0&&Xn(t,e,0,n)&&(d=!0,y=bi(t,f,e,0,n,y)),m>1&&Xn(t,e,1,r)&&(d=!0,y=bi(t,f,e,1,r,y)),m>2&&Xn(t,e,2,i)&&(d=!0,y=bi(t,f,e,2,i,y)),m>3&&Xn(t,e,3,o)&&(d=!0,y=bi(t,f,e,3,o,y)),m>4&&Xn(t,e,4,a)&&(d=!0,y=bi(t,f,e,4,a,y)),m>5&&Xn(t,e,5,s)&&(d=!0,y=bi(t,f,e,5,s,y)),m>6&&Xn(t,e,6,u)&&(d=!0,y=bi(t,f,e,6,u,y)),m>7&&Xn(t,e,7,l)&&(d=!0,y=bi(t,f,e,7,l,y)),m>8&&Xn(t,e,8,c)&&(d=!0,y=bi(t,f,e,8,c,y)),m>9&&Xn(t,e,9,h)&&(d=!0,y=bi(t,f,e,9,h,y)),y&&p.ngOnChanges(y),65536&e.flags&&Fn(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),d}(t,e,n,r,i,o,a,s,u,l,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,l,c,h){var f=e.bindings,p=!1,d=f.length;if(d>0&&$n(t,e,0,n)&&(p=!0),d>1&&$n(t,e,1,r)&&(p=!0),d>2&&$n(t,e,2,i)&&(p=!0),d>3&&$n(t,e,3,o)&&(p=!0),d>4&&$n(t,e,4,a)&&(p=!0),d>5&&$n(t,e,5,s)&&(p=!0),d>6&&$n(t,e,6,u)&&(p=!0),d>7&&$n(t,e,7,l)&&(p=!0),d>8&&$n(t,e,8,c)&&(p=!0),d>9&&$n(t,e,9,h)&&(p=!0),p){var y=Bn(t,e.nodeIndex),m=void 0;switch(201347067&e.flags){case 32:m=new Array(f.length),d>0&&(m[0]=n),d>1&&(m[1]=r),d>2&&(m[2]=i),d>3&&(m[3]=o),d>4&&(m[4]=a),d>5&&(m[5]=s),d>6&&(m[6]=u),d>7&&(m[7]=l),d>8&&(m[8]=c),d>9&&(m[9]=h);break;case 64:m={},d>0&&(m[f[0].name]=n),d>1&&(m[f[1].name]=r),d>2&&(m[f[2].name]=i),d>3&&(m[f[3].name]=o),d>4&&(m[f[4].name]=a),d>5&&(m[f[5].name]=s),d>6&&(m[f[6].name]=u),d>7&&(m[f[7].name]=l),d>8&&(m[f[8].name]=c),d>9&&(m[f[9].name]=h);break;case 128:var g=n;switch(d){case 1:m=g.transform(n);break;case 2:m=g.transform(r);break;case 3:m=g.transform(r,i);break;case 4:m=g.transform(r,i,o);break;case 5:m=g.transform(r,i,o,a);break;case 6:m=g.transform(r,i,o,a,s);break;case 7:m=g.transform(r,i,o,a,s,u);break;case 8:m=g.transform(r,i,o,a,s,u,l);break;case 9:m=g.transform(r,i,o,a,s,u,l,c);break;case 10:m=g.transform(r,i,o,a,s,u,l,c,h)}}y.value=m}return p}(t,e,n,r,i,o,a,s,u,l,c,h);default:throw"unreachable"}}(t,e,i,o,a,s,u,l,c,h,f,p):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)qo(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)$n(t,e,o,n[o])&&(i=!0);if(i){var a="";for(o=0;o<n.length;o++)a+=ea(n[o],r[o]);a=e.text.prefix+a;var s=Un(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=jn(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)Xn(t,e,s,n[s])&&(o=!0,a=bi(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&Fn(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,o=!1,a=0;a<n.length;a++)$n(t,e,a,n[a])&&(o=!0);if(o){var s=Bn(t,e.nodeIndex),u=void 0;switch(201347067&e.flags){case 32:u=n;break;case 64:for(u={},a=0;a<n.length;a++)u[i[a].name]=n[a];break;case 128:var l=n[0],c=n.slice(1);u=l.transform.apply(l,Object(r.__spread)(c))}s.value=u}return o}(t,e,n);default:throw"unreachable"}}(t,e,i)}function da(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Vn(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,nr(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function ya(t,e,n,r,i,o,a,s,u,l,c,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){var f=e.bindings.length;f>0&&tr(t,e,0,n),f>1&&tr(t,e,1,r),f>2&&tr(t,e,2,i),f>3&&tr(t,e,3,o),f>4&&tr(t,e,4,a),f>5&&tr(t,e,5,s),f>6&&tr(t,e,6,u),f>7&&tr(t,e,7,l),f>8&&tr(t,e,8,c),f>9&&tr(t,e,9,h)}(t,e,r,i,o,a,s,u,l,c,h,f):function(t,e,n){for(var r=0;r<n.length;r++)tr(t,e,r,n[r])}(t,e,r),!1}function ma(t,e){if(qn(t,e.nodeIndex).dirty)throw Pn(zn.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function ga(t){if(!(128&t.state)){if(wa(t,va.Destroy),ba(t,va.Destroy),wi(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=ir(t);if(e){var n=e.template._projectedViews;n&&(Rr(n,n.indexOf(t)),zn.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Vn(t,n).renderElement):2&r.flags?t.renderer.destroyNode(Un(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&qn(t,n).destroy()}}(t),sr(t)&&t.renderer.destroy(),t.state|=128}}var va=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function ba(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?_a(Vn(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function wa(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Vn(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)_a(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function _a(t,e){var n=t.state;switch(e){case va.CheckNoChanges:0==(128&n)&&(12==(12&n)?ha(t):64&n&&Sa(t,va.CheckNoChangesProjectedViews));break;case va.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?ha(t):64&n&&Sa(t,e));break;case va.CheckAndUpdate:0==(128&n)&&(12==(12&n)?fa(t):64&n&&Sa(t,va.CheckAndUpdateProjectedViews));break;case va.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?fa(t):64&n&&Sa(t,e));break;case va.Destroy:ga(t);break;case va.CreateViewNodes:ca(t)}}function Sa(t,e){wa(t,e),ba(t,e)}function Ea(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(zn.setCurrentNode(t,a.nodeIndex),r){case 0:Ho(t,a);break;case 1:ma(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var Ca=!1;function Ta(t,e,n,r,i,o){var a=i.injector.get(sn);return aa(ka(t,i,a,e,n),r,o)}function Ia(t,e,n,r,i,o){var a=i.injector.get(sn),s=ka(t,i,new os(a),e,n),u=Fa(r);return rs(Qa.create,aa,null,[s,u,o])}function ka(t,e,n,r,i){var o=e.injector.get(Ae),a=e.injector.get(ie),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function xa(t,e,n,r){var i=Fa(n);return rs(Qa.create,oa,null,[t,e,i,r])}function Da(t,e,n,r){return n=Pa.get(e.element.componentProvider.provider.token)||Fa(n),rs(Qa.create,sa,null,[t,e,n,r])}function Aa(t,e,n,r){return Zr(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===Na.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=Na.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){Oa.forEach(function(r,i){wt(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=Na.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=hr(i.deps),r.value=i.value)}if(Oa.size>0){var o=new Set(t.modules);Oa.forEach(function(e,r){if(o.has(wt(r).providedIn)){var i={token:r,flags:e.flags|(n?4096:0),deps:hr(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[Qn(r)]=i}})}}(t=t.factory(function(){return Wn})),t):t}(r))}var Na=new Map,Oa=new Map,Pa=new Map;function Ra(t){var e;Na.set(t.token,t),"function"==typeof t.token&&(e=wt(t.token))&&"function"==typeof e.providedIn&&Oa.set(t.token,t)}function Ma(t,e){var n=dr(e.viewDefFactory),r=dr(n.nodes[0].element.componentView);Pa.set(t,r)}function La(){Na.clear(),Oa.clear(),Pa.clear()}function Fa(t){if(0===Na.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Na.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Wn});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Na.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=hr(o.deps),i.value=o.value)}}}}function Ua(t,e,n,r,i,o,a,s,u,l,c,h,f){var p=t.def.nodes[e];return pa(t,p,n,r,i,o,a,s,u,l,c,h,f),224&p.flags?Bn(t,e).value:void 0}function Va(t,e,n,r,i,o,a,s,u,l,c,h,f){var p=t.def.nodes[e];return ya(t,p,n,r,i,o,a,s,u,l,c,h,f),224&p.flags?Bn(t,e).value:void 0}function ja(t){return rs(Qa.detectChanges,fa,null,[t])}function Ba(t){return rs(Qa.checkNoChanges,ha,null,[t])}function qa(t){return rs(Qa.destroy,ga,null,[t])}var za,Wa,Ha,Qa=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function Ka(t,e){Wa=t,Ha=e}function Ga(t,e,n,r){return Ka(t,e),rs(Qa.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Ya(t,e){if(128&t.state)throw Mn(Qa[za]);return Ka(t,$a(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Ja(t,a,r,i):Xa(t,a,r,i),16384&a.flags&&Ka(t,$a(t,n)),224&a.flags?Bn(t,a.nodeIndex).value:void 0},t)}function Za(t,e){if(128&t.state)throw Mn(Qa[za]);return Ka(t,ts(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Ja(t,a,r,i):Xa(t,a,r,i),3&a.flags&&Ka(t,ts(t,n)),224&a.flags?Bn(t,a.nodeIndex).value:void 0},t)}function Ja(t,e,n,i){if(pa.apply(void 0,Object(r.__spread)([t,e,n],i))){var o=1===n?i[0]:i;if(16384&e.flags){for(var a={},s=0;s<e.bindings.length;s++){var u=e.bindings[s],l=o[s];8&u.flags&&(a[(p=u.nonMinifiedName,"ng-reflect-"+p.replace(/[$@]/g,"_").replace(Pe,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()}))]=Re(l))}var c=e.parent,h=Vn(t,c.nodeIndex).renderElement;if(c.element.name)for(var f in a)null!=(l=a[f])?t.renderer.setAttribute(h,f,l):t.renderer.removeAttribute(h,f);else t.renderer.setValue(h,"bindings="+JSON.stringify(a,null,2))}}var p}function Xa(t,e,n,i){ya.apply(void 0,Object(r.__spread)([t,e,n],i))}function $a(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function ts(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var es=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=or(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Vn(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Hr(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){ns(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&ns(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!sr(t);)t=t.parent;return t.parent?Vn(t.parent,or(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?ar(this.view,this.nodeDef):ar(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var a=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),s=-1;e.factory(function(){var e;return++s===a?(e=t.error).bind.apply(e,Object(r.__spread)([t],i)):Wn}),s<a&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,Object(r.__spread)(i)))},t}();function ns(t,e,n){for(var r in e.references)n[r]=Ko(t,e,e.references[r])}function rs(t,e,n,r){var i=za,o=Wa,a=Ha;try{za=t;var s=e.apply(n,r);return Wa=o,Ha=a,za=i,s}catch(u){if(ee(u)||!Wa)throw u;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Rn(t,e),t}(u,is())}}function is(){return Wa?new es(Wa,Ha):null}var os=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new as(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),as=function(){function t(t){this.delegate=t,this.debugContextFactory=is,this.data=this.delegate.data}return t.prototype.createDebugContext=function(t){return this.debugContextFactory(t)},t.prototype.destroyNode=function(t){!function(t){ko.delete(t.nativeNode)}(xo(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){var i=new Io(n,null,r);i.name=t,Do(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Do(new To(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Do(new To(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=xo(t),r=xo(e);n&&r&&n instanceof Io&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=xo(t),i=xo(e),o=xo(n);r&&i&&r instanceof Io&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=xo(t),r=xo(e);n&&r&&n instanceof Io&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t,e){var n=this.delegate.selectRootElement(t,e),r=is();return r&&Do(new Io(n,null,r)),n},t.prototype.setAttribute=function(t,e,n,r){var i=xo(t);i&&i instanceof Io&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=xo(t);r&&r instanceof Io&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=xo(t);n&&n instanceof Io&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=xo(t);n&&n instanceof Io&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=xo(t);i&&i instanceof Io&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=xo(t);r&&r instanceof Io&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=xo(t);r&&r instanceof Io&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=xo(t);r&&r.listeners.push(new Co(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function ss(t,e,n){return new us(t,e,n)}var us=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.__extends)(e,t),e.prototype.create=function(t){!function(){if(!Ca){Ca=!0;var t=se()?{setCurrentNode:Ka,createRootView:Ia,createEmbeddedView:xa,createComponentView:Da,createNgModuleRef:Aa,overrideProvider:Ra,overrideComponentView:Ma,clearOverrides:La,checkAndUpdateView:ja,checkNoChangesView:Ba,destroyView:qa,createDebugContext:function(t,e){return new es(t,e)},handleEvent:Ga,updateDirectives:Ya,updateRenderer:Za}:{setCurrentNode:function(){},createRootView:Ta,createEmbeddedView:oa,createComponentView:sa,createNgModuleRef:Zr,overrideProvider:Wn,overrideComponentView:Wn,clearOverrides:Wn,checkAndUpdateView:fa,checkNoChangesView:ha,destroyView:ga,createDebugContext:function(t,e){return new es(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Ua:Va,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Ua:Va,t)}};zn.setCurrentNode=t.setCurrentNode,zn.createRootView=t.createRootView,zn.createEmbeddedView=t.createEmbeddedView,zn.createComponentView=t.createComponentView,zn.createNgModuleRef=t.createNgModuleRef,zn.overrideProvider=t.overrideProvider,zn.overrideComponentView=t.overrideComponentView,zn.clearOverrides=t.clearOverrides,zn.checkAndUpdateView=t.checkAndUpdateView,zn.checkNoChangesView=t.checkNoChangesView,zn.destroyView=t.destroyView,zn.resolveDep=gi,zn.createDebugContext=t.createDebugContext,zn.handleEvent=t.handleEvent,zn.updateDirectives=t.updateDirectives,zn.updateRenderer=t.updateRenderer,zn.dirtyParentQueries=Wo}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(dr(this._ngModuleDefFactory));return zn.createNgModuleRef(this.moduleType,t||Ft.NULL,this._bootstrapComponents,e)},e}(en),ls=function(){return function(){}}(),cs=function(){return function(){this.title="kiosk"}}(),hs=function(){return function(){}}(),fs=new Ot("Location Initialized"),ps=function(){return function(){}}(),ds=new Ot("appBaseHref"),ys=function(){function t(t,n){var r=this;this._subject=new Ci,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=e.stripTrailingSlash(ms(i)),this._platformStrategy.onPopState(function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})})}var e;return e=t,t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.getState=function(){return this._platformLocation.getState()},t.prototype.isCurrentPathEqualTo=function(t,n){return void 0===n&&(n=""),this.path()==this.normalize(t+e.normalizeQueryParams(n))},t.prototype.normalize=function(t){return e.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,ms(t)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,n,r){void 0===n&&(n=""),void 0===r&&(r=null),this._platformStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)},t.prototype.replaceState=function(t,n,r){void 0===n&&(n=""),void 0===r&&(r=null),this._platformStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.onUrlChange=function(t){var e=this;this._urlChangeListeners.push(t),this.subscribe(function(t){e._notifyUrlChangeListeners(t.url,t.state)})},t.prototype._notifyUrlChangeListeners=function(t,e){void 0===t&&(t=""),this._urlChangeListeners.forEach(function(n){return n(t,e)})},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function ms(t){return t.replace(/\/index.html$/,"")}var gs=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return Object(r.__extends)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=ys.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+ys.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+ys.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(ps),vs=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return Object(r.__extends)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return ys.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+ys.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+ys.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+ys.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(ps),bs=void 0,ws=["en",[["a","p"],["AM","PM"],bs],[["AM","PM"],bs,bs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bs,"{1} 'at' {0}",bs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],_s={},Ss=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),Es=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),Cs=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),Ts=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),Is=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function ks(t,e){return Os(Rs(t)[10],e)}function xs(t,e){return Os(Rs(t)[11],e)}function Ds(t,e){return Os(Rs(t)[12],e)}function As(t,e){var n=Rs(t),r=n[13][e];if(void 0===r){if(e===Is.CurrencyDecimal)return n[13][Is.Decimal];if(e===Is.CurrencyGroup)return n[13][Is.Group]}return r}function Ns(t){if(!t[19])throw new Error('Missing extra locale data for the locale "'+t[0]+'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.')}function Os(t,e){for(var n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function Ps(t){var e=Object(r.__read)(t.split(":"),2);return{hours:+e[0],minutes:+e[1]}}function Rs(t){var e=t.toLowerCase().replace(/_/g,"-"),n=_s[e];if(n)return n;var r=e.split("-")[0];if(n=_s[r])return n;if("en"===r)return ws;throw new Error('Missing locale data for the locale "'+t+'".')}var Ms=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ls={},Fs=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Us=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),Vs=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),js=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function Bs(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function qs(t,e,n,r,i){void 0===n&&(n="-");var o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));for(var a=String(t);a.length<e;)a="0"+a;return r&&(a=a.substr(a.length-e)),o+a}function zs(t,e,n,r,i){return void 0===n&&(n=0),void 0===r&&(r=!1),void 0===i&&(i=!1),function(o,a){var s,u=function(t,e){switch(t){case Vs.FullYear:return e.getFullYear();case Vs.Month:return e.getMonth();case Vs.Date:return e.getDate();case Vs.Hours:return e.getHours();case Vs.Minutes:return e.getMinutes();case Vs.Seconds:return e.getSeconds();case Vs.FractionalSeconds:return e.getMilliseconds();case Vs.Day:return e.getDay();default:throw new Error('Unknown DateType value "'+t+'".')}}(t,o);if((n>0||u>-n)&&(u+=n),t===Vs.Hours)0===u&&-12===n&&(u=12);else if(t===Vs.FractionalSeconds)return s=e,qs(u,3).substr(0,s);var l=As(a,Is.MinusSign);return qs(u,e,l,r,i)}}function Ws(t,e,n,r){return void 0===n&&(n=Es.Format),void 0===r&&(r=!1),function(i,o){return function(t,e,n,r,i,o){switch(n){case js.Months:return function(t,e,n){var r=Rs(t),i=Os([r[5],r[6]],e);return Os(i,n)}(e,i,r)[t.getMonth()];case js.Days:return function(t,e,n){var r=Rs(t),i=Os([r[3],r[4]],e);return Os(i,n)}(e,i,r)[t.getDay()];case js.DayPeriods:var a=t.getHours(),s=t.getMinutes();if(o){var u,l=function(t){var e=Rs(t);return Ns(e),(e[19][2]||[]).map(function(t){return"string"==typeof t?Ps(t):[Ps(t[0]),Ps(t[1])]})}(e),c=function(t,e,n){var r=Rs(t);Ns(r);var i=Os([r[19][0],r[19][1]],e)||[];return Os(i,n)||[]}(e,i,r);if(l.forEach(function(t,e){if(Array.isArray(t)){var n=t[0],r=t[1],i=r.hours;a>=n.hours&&s>=n.minutes&&(a<i||a===i&&s<r.minutes)&&(u=c[e])}else t.hours===a&&t.minutes===s&&(u=c[e])}),u)return u}return function(t,e,n){var r=Rs(t),i=Os([r[1],r[2]],e);return Os(i,n)}(e,i,r)[a<12?0:1];case js.Eras:return function(t,e){return Os(Rs(t)[7],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(i,o,t,e,n,r)}}function Hs(t){return function(e,n,r){var i=-1*r,o=As(n,Is.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Us.Short:return(i>=0?"+":"")+qs(a,2,o)+qs(Math.abs(i%60),2,o);case Us.ShortGMT:return"GMT"+(i>=0?"+":"")+qs(a,1,o);case Us.Long:return"GMT"+(i>=0?"+":"")+qs(a,2,o)+":"+qs(Math.abs(i%60),2,o);case Us.Extended:return 0===r?"Z":(i>=0?"+":"")+qs(a,2,o)+":"+qs(Math.abs(i%60),2,o);default:throw new Error('Unknown zone width "'+t+'"')}}}var Qs=0,Ks=4;function Gs(t,e){return void 0===e&&(e=!1),function(n,r){var i,o,a,s;if(e){var u=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,l=n.getDate();i=1+Math.floor((l+u)/7)}else{var c=(a=n.getFullYear(),s=new Date(a,Qs,1).getDay(),new Date(a,0,1+(s<=Ks?Ks:Ks+7)-s)),h=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(Ks-o.getDay()))).getTime()-c.getTime();i=1+Math.round(h/6048e5)}return qs(i,t,As(r,Is.MinusSign))}}var Ys={};function Zs(t,e){t=t.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Js(t){return t instanceof Date&&!isNaN(t.valueOf())}var Xs=new Ot("UseV4Plurals"),$s=function(){return function(){}}(),tu=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return Object(r.__extends)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return Rs(t)[18]}(e||this.locale)(t)){case Ss.Zero:return"zero";case Ss.One:return"one";case Ss.Two:return"two";case Ss.Few:return"few";case Ss.Many:return"many";default:return"other"}},e}($s);function eu(t,e){var n,i;e=encodeURIComponent(e);try{for(var o=Object(r.__values)(t.split(";")),a=o.next();!a.done;a=o.next()){var s=a.value,u=s.indexOf("="),l=Object(r.__read)(-1==u?[s,""]:[s.slice(0,u),s.slice(u+1)],2),c=l[1];if(l[0].trim()===e)return decodeURIComponent(c)}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return null}var nu=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),ru=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(t.prototype,"ngForOf",{set:function(t){this._ngForOf=t,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){se()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new nu(null,e._ngForOf,-1,-1),i),a=new iu(t,o);n.push(a)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),a=new iu(t,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t.ngTemplateContextGuard=function(t,e){return!0},t}(),iu=function(){return function(t,e){this.record=t,this.view=e}}(),ou=function(){function t(t,e){this._viewContainer=t,this._context=new au,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){su("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){su("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t.ngTemplateGuard_ngIf=function(t,e){return!0},t}(),au=function(){return function(){this.$implicit=null,this.ngIf=null}}();function su(t,e){if(e&&!e.createEmbeddedView)throw new Error(t+" must be a TemplateRef, but received '"+St(e)+"'.")}var uu=function(){function t(t){this.locale=t}var e;return e=t,t.prototype.transform=function(t,n,i,o){if(void 0===n&&(n="mediumDate"),null==t||""===t||t!=t)return null;try{return function(t,e,n,i){var o=function(t){if(Js(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();var e,n=parseFloat(t);if(!isNaN(t-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){var i=Object(r.__read)(t.split("-").map(function(t){return+t}),3);return new Date(i[0],i[1]-1,i[2])}if(e=t.match(Ms))return function(t){var e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));var a=Number(t[4]||0)-n,s=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,a,s,u,l),e}(e)}var o=new Date(t);if(!Js(o))throw new Error('Unable to convert "'+t+'" into a date');return o}(t);e=function t(e,n){var r=function(t){return Rs(t)[0]}(e);if(Ls[r]=Ls[r]||{},Ls[r][n])return Ls[r][n];var i="";switch(n){case"shortDate":i=ks(e,Ts.Short);break;case"mediumDate":i=ks(e,Ts.Medium);break;case"longDate":i=ks(e,Ts.Long);break;case"fullDate":i=ks(e,Ts.Full);break;case"shortTime":i=xs(e,Ts.Short);break;case"mediumTime":i=xs(e,Ts.Medium);break;case"longTime":i=xs(e,Ts.Long);break;case"fullTime":i=xs(e,Ts.Full);break;case"short":var o=t(e,"shortTime"),a=t(e,"shortDate");i=Bs(Ds(e,Ts.Short),[o,a]);break;case"medium":var s=t(e,"mediumTime"),u=t(e,"mediumDate");i=Bs(Ds(e,Ts.Medium),[s,u]);break;case"long":var l=t(e,"longTime"),c=t(e,"longDate");i=Bs(Ds(e,Ts.Long),[l,c]);break;case"full":var h=t(e,"fullTime"),f=t(e,"fullDate");i=Bs(Ds(e,Ts.Full),[h,f])}return i&&(Ls[r][n]=i),i}(n,e)||e;for(var a,s=[];e;){if(!(a=Fs.exec(e))){s.push(e);break}var u=(s=s.concat(a.slice(1))).pop();if(!u)break;e=u}var l=o.getTimezoneOffset();i&&(l=Zs(i,l),o=function(t,e,n){var r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Zs(e,r)-r))}(o,i));var c="";return s.forEach(function(t){var e=function(t){if(Ys[t])return Ys[t];var e;switch(t){case"G":case"GG":case"GGG":e=Ws(js.Eras,Cs.Abbreviated);break;case"GGGG":e=Ws(js.Eras,Cs.Wide);break;case"GGGGG":e=Ws(js.Eras,Cs.Narrow);break;case"y":e=zs(Vs.FullYear,1,0,!1,!0);break;case"yy":e=zs(Vs.FullYear,2,0,!0,!0);break;case"yyy":e=zs(Vs.FullYear,3,0,!1,!0);break;case"yyyy":e=zs(Vs.FullYear,4,0,!1,!0);break;case"M":case"L":e=zs(Vs.Month,1,1);break;case"MM":case"LL":e=zs(Vs.Month,2,1);break;case"MMM":e=Ws(js.Months,Cs.Abbreviated);break;case"MMMM":e=Ws(js.Months,Cs.Wide);break;case"MMMMM":e=Ws(js.Months,Cs.Narrow);break;case"LLL":e=Ws(js.Months,Cs.Abbreviated,Es.Standalone);break;case"LLLL":e=Ws(js.Months,Cs.Wide,Es.Standalone);break;case"LLLLL":e=Ws(js.Months,Cs.Narrow,Es.Standalone);break;case"w":e=Gs(1);break;case"ww":e=Gs(2);break;case"W":e=Gs(1,!0);break;case"d":e=zs(Vs.Date,1);break;case"dd":e=zs(Vs.Date,2);break;case"E":case"EE":case"EEE":e=Ws(js.Days,Cs.Abbreviated);break;case"EEEE":e=Ws(js.Days,Cs.Wide);break;case"EEEEE":e=Ws(js.Days,Cs.Narrow);break;case"EEEEEE":e=Ws(js.Days,Cs.Short);break;case"a":case"aa":case"aaa":e=Ws(js.DayPeriods,Cs.Abbreviated);break;case"aaaa":e=Ws(js.DayPeriods,Cs.Wide);break;case"aaaaa":e=Ws(js.DayPeriods,Cs.Narrow);break;case"b":case"bb":case"bbb":e=Ws(js.DayPeriods,Cs.Abbreviated,Es.Standalone,!0);break;case"bbbb":e=Ws(js.DayPeriods,Cs.Wide,Es.Standalone,!0);break;case"bbbbb":e=Ws(js.DayPeriods,Cs.Narrow,Es.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ws(js.DayPeriods,Cs.Abbreviated,Es.Format,!0);break;case"BBBB":e=Ws(js.DayPeriods,Cs.Wide,Es.Format,!0);break;case"BBBBB":e=Ws(js.DayPeriods,Cs.Narrow,Es.Format,!0);break;case"h":e=zs(Vs.Hours,1,-12);break;case"hh":e=zs(Vs.Hours,2,-12);break;case"H":e=zs(Vs.Hours,1);break;case"HH":e=zs(Vs.Hours,2);break;case"m":e=zs(Vs.Minutes,1);break;case"mm":e=zs(Vs.Minutes,2);break;case"s":e=zs(Vs.Seconds,1);break;case"ss":e=zs(Vs.Seconds,2);break;case"S":e=zs(Vs.FractionalSeconds,1);break;case"SS":e=zs(Vs.FractionalSeconds,2);break;case"SSS":e=zs(Vs.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Hs(Us.Short);break;case"ZZZZZ":e=Hs(Us.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Hs(Us.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Hs(Us.Long);break;default:return null}return Ys[t]=e,e}(t);c+=e?e(o,n,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}(t,n,o||this.locale,i)}catch(a){throw Error("InvalidPipeArgument: '"+a.message+"' for pipe '"+St(e)+"'")}},t}(),lu=function(){return function(){}}(),cu=new Ot("DocumentToken"),hu="server";function fu(t){return t===hu}var pu=function(){function t(){}return t.ngInjectableDef=bt({providedIn:"root",factory:function(){return new du(Nt(cu),window,Nt(ie))}}),t}(),du=function(){function t(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=function(){return[0,0]}}return t.prototype.setOffset=function(t){this.offset=Array.isArray(t)?function(){return t}:t},t.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},t.prototype.scrollToPosition=function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])},t.prototype.scrollToAnchor=function(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='"+t+"']");if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}},t.prototype.setHistoryScrollRestoration=function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}},t.prototype.scrollToElement=function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])},t.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}},t}(),yu=new S(function(t){return t.complete()});function mu(t){return t?function(t){return new S(function(e){return t.schedule(function(){return e.complete()})})}(t):yu}function gu(t){var e=new S(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function vu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(A(n)?t.pop():n=void 0,t.length){case 0:return mu(n);case 1:return n?Q(t,n):gu(t[0]);default:return Q(t,n)}}var bu=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r.__extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new T;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(x);function wu(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}wu.prototype=Object.create(Error.prototype);var _u=wu,Su={};function Eu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return A(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&i(t[0])&&(t=t[0]),Q(t,r).lift(new Cu(n))}var Cu=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Tu(t,this.resultSelector))},t}(),Tu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.__extends(e,t),e.prototype._next=function(t){this.values.push(Su),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(B(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,a=this.toRespond?o[n]===Su?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(q);function Iu(t){return new S(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?K(n):mu()).subscribe(e)})}function ku(){return X(1)}function xu(t,e){return function(n){return n.lift(new Du(t,e))}}var Du=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Au(t,this.predicate,this.thisArg))},t}(),Au=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.__extends(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(m);function Nu(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Nu.prototype=Object.create(Error.prototype);var Ou=Nu;function Pu(t){return function(e){return 0===t?mu():e.lift(new Ru(t))}}var Ru=function(){function t(t){if(this.total=t,this.total<0)throw new Ou}return t.prototype.call=function(t,e){return e.subscribe(new Mu(t,this.total))},t}(),Mu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.__extends(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(m);function Lu(t,e,n){return function(r){return r.lift(new Fu(t,e,n))}}var Fu=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Uu(t,this.nextOrObserver,this.error,this.complete))},t}(),Uu=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=b,o._tapError=b,o._tapComplete=b,o._tapError=r||b,o._tapComplete=i||b,a(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||b,o._tapError=n.error||b,o._tapComplete=n.complete||b),o}return r.__extends(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(m),Vu=function(t){return void 0===t&&(t=ju),Lu({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})};function ju(){return new _u}function Bu(t){return void 0===t&&(t=null),function(e){return e.lift(new qu(t))}}var qu=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new zu(t,this.defaultValue))},t}(),zu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.__extends(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(m);function Wu(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?xu(function(e,n){return t(e,n,r)}):J,Pu(1),n?Bu(e):Vu(function(){return new _u}))}}function Hu(t){return function(e){var n=new Qu(t),r=e.lift(n);return n.caught=r}}var Qu=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new Ku(t,this.selector,this.caught))},t}(),Ku=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return r.__extends(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(i){return void t.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new N(this,void 0,void 0);this.add(r),B(this,n,void 0,void 0,r)}},e}(q);function Gu(t){return function(e){return 0===t?mu():e.lift(new Yu(t))}}var Yu=function(){function t(t){if(this.total=t,this.total<0)throw new Ou}return t.prototype.call=function(t,e){return e.subscribe(new Zu(t,this.total))},t}(),Zu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.__extends(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(m);function Ju(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?xu(function(e,n){return t(e,n,r)}):J,Gu(1),n?Bu(e):Vu(function(){return new _u}))}}var Xu=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new $u(t,this.predicate,this.thisArg,this.source))},t}(),$u=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r.__extends(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(m);function tl(t,e){return"function"==typeof e?function(n){return n.pipe(tl(function(n,r){return K(t(n,r)).pipe(z(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new el(t))}}var el=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new nl(t,this.project))},t}(),nl=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.__extends(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new N(this,void 0,void 0);this.destination.add(i),this.innerSubscription=B(this,t,e,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(q);function rl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];A(n)?t.pop():n=null;var r=t.length;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ku()(vu.apply(void 0,t))}(1!==r||n?r>0?Q(t,n):mu(n):gu(t[0]),e)}}function il(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ol(t,e,n))}}var ol=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new al(t,this.accumulator,this.seed,this.hasSeed))},t}(),al=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r.__extends(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(m);function sl(t,e){return G(t,e,1)}var ul=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new ll(t,this.callback))},t}(),ll=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new l(n)),r}return r.__extends(e,t),e}(m),cl=null;function hl(){return cl}var fl,pl=function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(a){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(r.__extends)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}()),dl={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},yl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ml={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gl=function(){if(xt.Node)return xt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}}(),vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,cl||(cl=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var i;(i=t)[e].apply(i,Object(r.__spread)(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return dl},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return gl.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ml.hasOwnProperty(e)&&(e=ml[e]))}return yl[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=bl||(bl=document.querySelector("base"))?bl.getAttribute("href"):null;return null==n?null:(e=n,fl||(fl=document.createElement("a")),fl.setAttribute("href",e),"/"===fl.pathname.charAt(0)?fl.pathname:"/"+fl.pathname)},e.prototype.resetBaseElement=function(){bl=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return eu(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(pl),bl=null;function wl(){return!!window.history.pushState}var _l=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return Object(r.__extends)(e,t),e.prototype._init=function(){this.location=hl().getLocation(),this._history=hl().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return hl().getBaseHref(this._doc)},e.prototype.onPopState=function(t){hl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){hl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"href",{get:function(){return this.location.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this.location.protocol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostname",{get:function(){return this.location.hostname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"port",{get:function(){return this.location.port},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){wl()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){wl()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.prototype.getState=function(){return this._history.state},Object(r.__decorate)([Object(r.__param)(0,pt(cu)),Object(r.__metadata)("design:paramtypes",[Object])],e)}(hs),Sl=new Ot("TRANSITION_ID"),El=[{provide:Di,useFactory:function(t,e,n){return function(){n.get(Ai).donePromise.then(function(){var n=hl();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[Sl,cu,Ft],multi:!0}],Cl=function(){function t(){}return t.init=function(){var e;e=new t,co=e},t.prototype.addToWindow=function(t){xt.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},xt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},xt.getAllAngularRootElements=function(){return t.getAllRootElements()},xt.frameworkStabilizers||(xt.frameworkStabilizers=[]),xt.frameworkStabilizers.push(function(t){var e=xt.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?hl().isShadowRoot(e)?this.findTestabilityInTree(t,hl().getHost(e),!0):this.findTestabilityInTree(t,hl().parentElement(e),!0):null},t}();function Tl(t,e){"undefined"!=typeof COMPILED&&COMPILED||((xt.ng=xt.ng||{})[t]=e)}var Il=function(){return{ApplicationRef:vo,NgZone:to}}();function kl(t){return xo(t)}var xl=new Ot("EventManagerPlugins"),Dl=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},t}(),Al=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=hl().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),Nl=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),Ol=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return Object(r.__extends)(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return hl().remove(t)})},e}(Nl),Pl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Rl=/%COMP%/g,Ml="_nghost-%COMP%",Ll="_ngcontent-%COMP%";function Fl(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Fl(t,i,n):(i=i.replace(Rl,t),n.push(i))}return n}function Ul(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Vl=function(){function t(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new jl(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case $t.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new zl(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case $t.Native:case $t.ShadowDom:return new Wl(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=Fl(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),jl=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Pl[e]||e,t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'+t+'" did not match any elements');return e||(n.textContent=""),n},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=Pl[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=Pl[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&un.DashCase?t.style.setProperty(e,n,r&un.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&un.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){ql(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return ql(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ul(n)):this.eventManager.addEventListener(t,e,Ul(n))},t}(),Bl=function(){return"@".charCodeAt(0)}();function ql(t,e){if(t.charCodeAt(0)===Bl)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var zl=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.component=r;var a=Fl(i+"-"+r.id,r.styles,[]);return n.addStyles(a),o.contentAttr=Ll.replace(Rl,i+"-"+r.id),o.hostAttr=Ml.replace(Rl,i+"-"+r.id),o}return Object(r.__extends)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(jl),Wl=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=i.encapsulation===$t.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=Fl(i.id,i.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],o.shadowRoot.appendChild(u)}return o}return Object(r.__extends)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(jl),Hl=function(){return"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t}}(),Ql=Hl("addEventListener"),Kl=Hl("removeEventListener"),Gl={},Yl="__zone_symbol__propagationStopped",Zl=function(){var t="undefined"!=typeof Zone&&Zone[Hl("BLACK_LISTED_EVENTS")];if(t){var e={};return t.forEach(function(t){e[t]=t}),e}}(),Jl=function(t){return!!Zl&&Zl.hasOwnProperty(t)},Xl=function(t){var e=Gl[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[Yl];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},$l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.ngZone=n,r&&fu(r)||i.patchEvent(),i}return Object(r.__extends)(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Yl]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=n;if(!t[Ql]||to.isInAngularZone()&&!Jl(e))t.addEventListener(e,i,!1);else{var o=Gl[e];o||(o=Gl[e]=Hl("ANGULAR"+e+"FALSE"));var a=t[o],s=a&&a.length>0;a||(a=t[o]=[]);var u=Jl(e)?Zone.root:Zone.current;if(0===a.length)a.push({zone:u,handler:i});else{for(var l=!1,c=0;c<a.length;c++)if(a[c].handler===i){l=!0;break}l||a.push({zone:u,handler:i})}s||t[Ql](e,Xl,!1)}return function(){return r.removeEventListener(t,e,i)}},e.prototype.removeEventListener=function(t,e,n){var r=t[Kl];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=Gl[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,Xl,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(Al),tc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ec=new Ot("HammerGestureConfig"),nc=new Ot("HammerLoader"),rc=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),ic=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._config=n,o.console=r,o.loader=i,o}return Object(r.__extends)(e,t),e.prototype.supports=function(t){return!(!tc.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(t,e,n))}).catch(function(){r.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){o.off(e,a),"function"==typeof o.destroy&&o.destroy()}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(Al),oc=["alt","control","meta","shift"],ac={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},sc=function(t){function e(e){return t.call(this,e)||this}var n;return Object(r.__extends)(e,t),n=e,e.prototype.supports=function(t){return null!=n.parseEventName(t)},e.prototype.addEventListener=function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return hl().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(oc.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},e.getEventFullKey=function(t){var e="",n=hl().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),oc.forEach(function(r){r!=n&&(0,ac[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(Al),uc=function(){return function(){}}(),lc=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return Object(r.__extends)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case De.NONE:return e;case De.HTML:return e instanceof hc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{de=de||new ue(t);var r=e?String(e):"";n=de.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=de.getInertBodyElement(r)}while(r!==o);var a=new Ce,s=a.sanitizeChildren(xe(n)||n);return se()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=xe(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(e)));case De.STYLE:return e instanceof fc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(Oe);return e&&he(e[1])===e[1]||t.match(Ne)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(se()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case De.SCRIPT:if(e instanceof pc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case De.URL:return e instanceof yc||e instanceof dc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),he(String(e)));case De.RESOURCE_URL:if(e instanceof yc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof cc)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new hc(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new fc(t)},e.prototype.bypassSecurityTrustScript=function(t){return new pc(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new dc(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new yc(t)},e}(uc),cc=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),hc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(cc),fc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"Style"},e}(cc),pc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"Script"},e}(cc),dc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"URL"},e}(cc),yc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(cc),mc=po(Ao,"browser",[{provide:Mi,useValue:"browser"},{provide:Ri,useValue:function(){vl.makeCurrent(),Cl.init()},multi:!0},{provide:hs,useClass:_l,deps:[cu]},{provide:cu,useFactory:function(){return document},deps:[]}]);function gc(){return new ie}var vc=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var e;return e=t,t.withServerTransition=function(t){return{ngModule:e,providers:[{provide:Ni,useValue:t.appId},{provide:Sl,useExisting:Ni},El]}},t}();"undefined"!=typeof window&&window;var bc=function(){return function(t,e){this.id=t,this.url=e}}(),wc=function(t){function e(e,n,r,i){void 0===r&&(r="imperative"),void 0===i&&(i=null);var o=t.call(this,e,n)||this;return o.navigationTrigger=r,o.restoredState=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},e}(bc),_c=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},e}(bc),Sc=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.reason=r,i}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},e}(bc),Ec=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.error=r,i}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},e}(bc),Cc=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(bc),Tc=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(bc),Ic=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.urlAfterRedirects=r,a.state=i,a.shouldActivate=o,a}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},e}(bc),kc=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(bc),xc=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(bc),Dc=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},t}(),Ac=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},t}(),Nc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Oc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Pc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Rc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Mc=function(){function t(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}return t.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},t}(),Lc=function(){return function(){}}(),Fc="primary",Uc=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function Vc(t){return new Uc(t)}var jc="ngNavigationCancelingError";function Bc(t){var e=Error("NavigationCancelingError: "+t);return e[jc]=!0,e}function qc(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var zc=function(){return function(t,e){this.routes=t,this.module=e}}();function Wc(t,e){void 0===e&&(e="");for(var n=0;n<t.length;n++){var r=t[n];Hc(r,Qc(e,r))}}function Hc(t,e){if(!t)throw new Error("\n      Invalid configuration of route '"+e+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(t))throw new Error("Invalid configuration of route '"+e+"': Array cannot be specified");if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Fc)throw new Error("Invalid configuration of route '"+e+"': a componentless route without children or loadChildren cannot have a named outlet set");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+e+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+e+"': redirectTo and component cannot be used together");if(t.path&&t.matcher)throw new Error("Invalid configuration of route '"+e+"': path and matcher cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+e+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '"+e+"': routes must have either a path or a matcher specified");if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '"+e+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \""+e+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+e+"': pathMatch can only be set to 'prefix' or 'full'");t.children&&Wc(t.children,e)}function Qc(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:t+"/"+e.path:"":t}function Kc(t){var e=t.children&&t.children.map(Kc),n=e?Object(r.__assign)({},t,{children:e}):Object(r.__assign)({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Fc&&(n.component=Lc),n}function Gc(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0}function Yc(t){return Array.prototype.concat.apply([],t)}function Zc(t){return t.length>0?t[t.length-1]:null}function Jc(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Xc(t){return Le(t)?t:Me(t)?K(Promise.resolve(t)):vu(t)}function $c(t,e,n){return n?function(t,e){return Gc(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!rh(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!rh(a=n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!rh(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!rh(n.segments,a)&&!!n.children[Fc]&&e(n.children[Fc],r,s)}(e,n,n.segments)}(t.root,e.root)}var th=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Vc(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return sh.serialize(this)},t}(),eh=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,Jc(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return uh(this)},t}(),nh=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=Vc(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return dh(this)},t}();function rh(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function ih(t,e){var n=[];return Jc(t.children,function(t,r){r===Fc&&(n=n.concat(e(t,r)))}),Jc(t.children,function(t,r){r!==Fc&&(n=n.concat(e(t,r)))}),n}var oh=function(){return function(){}}(),ah=function(){function t(){}return t.prototype.parse=function(t){var e=new bh(t);return new th(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return"/"+function t(e,n){if(!e.hasChildren())return uh(e);if(n){var r=e.children[Fc]?t(e.children[Fc],!1):"",i=[];return Jc(e.children,function(e,n){n!==Fc&&i.push(n+":"+t(e,!1))}),i.length>0?r+"("+i.join("//")+")":r}var o=ih(e,function(n,r){return r===Fc?[t(e.children[Fc],!1)]:[r+":"+t(n,!1)]});return uh(e)+"/("+o.join("//")+")"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return ch(t)+"="+ch(e)}).join("&"):ch(t)+"="+ch(n)})).length?"?"+n.join("&"):"")+("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"")},t}(),sh=new ah;function uh(t){return t.segments.map(function(t){return dh(t)}).join("/")}function lh(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ch(t){return lh(t).replace(/%3B/gi,";")}function hh(t){return lh(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fh(t){return decodeURIComponent(t)}function ph(t){return fh(t.replace(/\+/g,"%20"))}function dh(t){return""+hh(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return";"+hh(t)+"="+hh(e[t])}).join(""));var e}var yh=/^[^\/()?;=#]+/;function mh(t){var e=t.match(yh);return e?e[0]:""}var gh=/^[^=?&#]+/,vh=/^[^?&#]+/,bh=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new eh([],{}):new eh([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t},t.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Fc]=new eh(t,e)),n},t.prototype.parseSegment=function(){var t=mh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(t),new nh(fh(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=mh(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=mh(this.remaining);r&&this.capture(n=r)}t[fh(e)]=fh(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(gh))?e[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var i=function(t){var e=t.match(vh);return e?e[0]:""}(this.remaining);i&&this.capture(r=i)}var o=ph(n),a=ph(r);if(t.hasOwnProperty(o)){var s=t[o];Array.isArray(s)||(t[o]=s=[s]),s.push(a)}else t[o]=a}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=mh(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Fc);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[Fc]:new eh([],o),this.consumeOptional("//")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected "'+t+'".')},t}(),wh=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=_h(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=_h(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=Sh(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return Sh(t,this._root).map(function(t){return t.value})},t}();function _h(t,e){var n,i;if(t===e.value)return e;try{for(var o=Object(r.__values)(e.children),a=o.next();!a.done;a=o.next()){var s=_h(t,a.value);if(s)return s}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return null}function Sh(t,e){var n,i;if(t===e.value)return[e];try{for(var o=Object(r.__values)(e.children),a=o.next();!a.done;a=o.next()){var s=Sh(t,a.value);if(s.length)return s.unshift(e),s}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return[]}var Eh=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}();function Ch(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var Th=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,Nh(r,e),r}return Object(r.__extends)(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(wh);function Ih(t,e){var n=function(t,e){var n=new Dh([],{},{},"",{},Fc,e,null,t.root,-1,{});return new Ah("",new Eh(n,[]))}(t,e),r=new bu([new nh("",{})]),i=new bu({}),o=new bu({}),a=new bu({}),s=new bu(""),u=new kh(r,i,a,s,o,Fc,e,n.root);return u.snapshot=n.root,new Th(new Eh(u,[]),n)}var kh=function(){function t(t,e,n,r,i,o,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(z(function(t){return Vc(t)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(z(function(t){return Vc(t)}))),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}();function xh(t,e){void 0===e&&(e="emptyOnly");var n=t.pathFromRoot,i=0;if("always"!==e)for(i=n.length-1;i>=1;){var o=n[i],a=n[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(a.component)break;i--}}return function(t){return t.reduce(function(t,e){return{params:Object(r.__assign)({},t.params,e.params),data:Object(r.__assign)({},t.data,e.data),resolve:Object(r.__assign)({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(i))}var Dh=function(){function t(t,e,n,r,i,o,a,s,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this.routeConfig=s,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}return Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=Vc(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Vc(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Route(url:'"+this.url.map(function(t){return t.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},t}(),Ah=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,Nh(r,n),r}return Object(r.__extends)(e,t),e.prototype.toString=function(){return Oh(this._root)},e}(wh);function Nh(t,e){e.value._routerState=t,e.children.forEach(function(e){return Nh(t,e)})}function Oh(t){var e=t.children.length>0?" { "+t.children.map(Oh).join(", ")+" } ":"";return""+t.value+e}function Ph(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Gc(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Gc(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Gc(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Gc(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Rh(t,e){var n,r;return Gc(t.params,e.params)&&rh(n=t.url,r=e.url)&&n.every(function(t,e){return Gc(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||Rh(t.parent,e.parent))}function Mh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Lh(t,e,n,r,i){var o={};return r&&Jc(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),new th(n.root===t?e:function t(e,n,r){var i={};return Jc(e.children,function(e,o){i[o]=e===n?r:t(e,n,r)}),new eh(e.segments,i)}(n.root,t,e),o,i)}var Fh=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Mh(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find(function(t){return"object"==typeof t&&null!=t&&t.outlets});if(r&&r!==Zc(n))throw new Error("{outlets:{}} has to be the last command")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},t}(),Uh=function(){return function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}();function Vh(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[Fc]:""+t}function jh(t,e,n){if(t||(t=new eh([],{})),0===t.segments.length&&t.hasChildren())return Bh(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=Vh(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Hh(s,u,a))return o;r+=2}else{if(!Hh(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new eh(t.segments.slice(0,r.pathIndex),{});return o.children[Fc]=new eh(t.segments.slice(r.pathIndex),t.children),Bh(o,0,i)}return r.match&&0===i.length?new eh(t.segments,{}):r.match&&!t.hasChildren()?qh(t,e,n):r.match?Bh(t,0,i):qh(t,e,n)}function Bh(t,e,n){if(0===n.length)return new eh(t.segments,{});var r=function(t){var e,n;return"object"!=typeof t[0]?((e={})[Fc]=t,e):void 0===t[0].outlets?((n={})[Fc]=t,n):t[0].outlets}(n),i={};return Jc(r,function(n,r){null!==n&&(i[r]=jh(t.children[r],e,n))}),Jc(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new eh(t.segments,i)}function qh(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=zh(n[i].outlets);return new eh(r,o)}if(0===i&&Mh(n[0]))r.push(new nh(t.segments[e].path,n[0])),i++;else{var a=Vh(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&Mh(s)?(r.push(new nh(a,Wh(s))),i+=2):(r.push(new nh(a,{})),i++)}}return new eh(r,{})}function zh(t){var e={};return Jc(t,function(t,n){null!==t&&(e[n]=qh(new eh([],{}),0,t))}),e}function Wh(t){var e={};return Jc(t,function(t,n){return e[n]=""+t}),e}function Hh(t,e,n){return t==n.path&&Gc(e,n.parameters)}var Qh=function(){function t(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ph(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,i=Ch(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),Jc(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=Ch(t),o=t.value.component?r.children:e;Jc(i,function(t,e){return n.deactivateRouteAndItsChildren(t,o)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,i=Ch(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Rc(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Oc(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(Ph(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component)if(o=n.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Kh(a.route)}else{var s=function(t){for(var e=r.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),u=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=u,o.outlet&&o.outlet.activateWith(r,u),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)},t}();function Kh(t){Ph(t.value),t.children.forEach(Kh)}function Gh(t){return"function"==typeof t}function Yh(t){return t instanceof th}var Zh=function(){return function(t){this.segmentGroup=t||null}}(),Jh=function(){return function(t){this.urlTree=t}}();function Xh(t){return new S(function(e){return e.error(new Zh(t))})}function $h(t){return new S(function(e){return e.error(new Jh(t))})}function tf(t){return new S(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+t+"'"))})}var ef=function(){function t(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(tn)}return t.prototype.apply=function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Fc).pipe(z(function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)})).pipe(Hu(function(e){if(e instanceof Jh)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Zh)throw t.noMatchError(e);throw e}))},t.prototype.match=function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,Fc).pipe(z(function(n){return e.createUrlTree(n,t.queryParams,t.fragment)})).pipe(Hu(function(t){if(t instanceof Zh)throw e.noMatchError(t);throw t}))},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes. URL Segment: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t,e,n){var r,i=t.segments.length>0?new eh([],((r={})[Fc]=t,r)):t;return new th(i,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(z(function(t){return new eh([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return vu({});var o=[],a=[],s={};return Jc(n,function(n,i){var u,l,c=(u=i,l=n,r.expandSegmentGroup(t,e,l,u)).pipe(z(function(t){return s[i]=t}));i===Fc?o.push(c):a.push(c)}),vu.apply(null,o.concat(a)).pipe(ku(),Wu(),z(function(){return s}))}(n.children)},t.prototype.expandSegment=function(t,e,n,i,o,a){var s=this;return vu.apply(void 0,Object(r.__spread)(n)).pipe(z(function(r){return s.expandSegmentAgainstRoute(t,e,n,r,i,o,a).pipe(Hu(function(t){if(t instanceof Zh)return vu(null);throw t}))}),ku(),Ju(function(t){return!!t}),Hu(function(t,n){if(t instanceof _u||"EmptyError"===t.name){if(s.noLeftoversInUrl(e,i,o))return vu(new eh([],{}));throw new Zh(e)}throw t}))},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,i,o,a){return af(r)!==o?Xh(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Xh(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?$h(o):this.lineralizeSegments(n,o).pipe(G(function(n){var o=new eh(n,{});return i.expandSegment(t,o,e,n,r,!1)}))},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){var a=this,s=nf(e,r,i),u=s.consumedSegments,l=s.lastChild,c=s.positionalParamSegments;if(!s.matched)return Xh(e);var h=this.applyRedirectCommands(u,r.redirectTo,c);return r.redirectTo.startsWith("/")?$h(h):this.lineralizeSegments(r,h).pipe(G(function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)}))},t.prototype.matchSegmentAgainstRoute=function(t,e,n,i){var o=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(z(function(t){return n._loadedConfig=t,new eh(i,{})})):vu(new eh(i,{}));var a=nf(e,n,i),s=a.consumedSegments,u=a.lastChild;if(!a.matched)return Xh(e);var l=i.slice(u);return this.getChildConfig(t,n,i).pipe(G(function(t){var n=t.module,i=t.routes,a=function(t,e,n,i){return n.length>0&&function(t,e,n){return i.some(function(n){return of(t,e,n)&&af(n)!==Fc})}(t,n)?{segmentGroup:rf(new eh(e,function(t,e){var n,i,o={};o[Fc]=e;try{for(var a=Object(r.__values)(t),s=a.next();!s.done;s=a.next()){var u=s.value;""===u.path&&af(u)!==Fc&&(o[af(u)]=new eh([],{}))}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o}(i,new eh(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return i.some(function(n){return of(t,e,n)})}(t,n)?{segmentGroup:rf(new eh(t.segments,function(t,e,n,i){var o,a,s={};try{for(var u=Object(r.__values)(n),l=u.next();!l.done;l=u.next()){var c=l.value;of(t,e,c)&&!i[af(c)]&&(s[af(c)]=new eh([],{}))}}catch(h){o={error:h}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return Object(r.__assign)({},i,s)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,l,i),u=a.segmentGroup,c=a.slicedSegments;return 0===c.length&&u.hasChildren()?o.expandChildren(n,i,u).pipe(z(function(t){return new eh(s,t)})):0===i.length&&0===c.length?vu(new eh(s,{})):o.expandSegment(n,u,i,c,Fc,!0).pipe(z(function(t){return new eh(s.concat(t.segments),t.children)}))}))},t.prototype.getChildConfig=function(t,e,n){var r=this;return e.children?vu(new zc(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?vu(e._loadedConfig):function(t,e,n){var r,i=e.canLoad;return i&&0!==i.length?K(i).pipe(z(function(r){var i,o=t.get(r);if(function(t){return t&&Gh(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!Gh(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return Xc(i)})).pipe(ku(),(r=function(t){return!0===t},function(t){return t.lift(new Xu(r,void 0,t))})):vu(!0)}(t.injector,e,n).pipe(G(function(n){return n?r.configLoader.load(t.injector,e).pipe(z(function(t){return e._loadedConfig=t,t})):function(t){return new S(function(e){return e.error(Bc("Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false"))})}(e)})):vu(new zc([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return vu(n);if(r.numberOfChildren>1||!r.children[Fc])return tf(t.redirectTo);r=r.children[Fc]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new th(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return Jc(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return Jc(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new eh(o,a)},t.prototype.createSegments=function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+t+"'. Cannot find '"+e.path+"'.");return r},t.prototype.findOrReturn=function(t,e){var n,i,o=0;try{for(var a=Object(r.__values)(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.path===t.path)return e.splice(o),u;o++}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return t},t}();function nf(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||qc)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function rf(t){if(1===t.numberOfChildren&&t.children[Fc]){var e=t.children[Fc];return new eh(t.segments.concat(e.segments),e.children)}return t}function of(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function af(t){return t.outlet||Fc}var sf=function(){return function(t){this.path=t,this.route=this.path[this.path.length-1]}}(),uf=function(){return function(t,e){this.component=t,this.route=e}}();function lf(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function cf(t,e,n,r,i){void 0===i&&(i={canDeactivateChecks:[],canActivateChecks:[]});var o=Ch(e);return t.children.forEach(function(t){!function(t,e,n,r,i){void 0===i&&(i={canDeactivateChecks:[],canActivateChecks:[]});var o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!rh(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rh(t.url,e.url)||!Gc(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rh(t,e)||!Gc(t.queryParams,e.queryParams);case"paramsChange":default:return!Rh(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new sf(r)):(o.data=a.data,o._resolvedData=a._resolvedData),cf(t,e,o.component?s?s.children:null:n,r,i),u&&i.canDeactivateChecks.push(new uf(s&&s.outlet&&s.outlet.component||null,a))}else a&&hf(e,s,i),i.canActivateChecks.push(new sf(r)),cf(t,null,o.component?s?s.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Jc(o,function(t,e){return hf(t,n.getContext(e),i)}),i}function hf(t,e,n){var r=Ch(t),i=t.value;Jc(r,function(t,r){hf(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new uf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var ff=Symbol("INITIAL_VALUE");function pf(){return tl(function(t){return Eu.apply(void 0,Object(r.__spread)(t.map(function(t){return t.pipe(Gu(1),rl(ff))}))).pipe(il(function(t,e){var n=!1;return e.reduce(function(t,r,i){if(t!==ff)return t;if(r===ff&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Yh(r))return r}return t},t)},ff),xu(function(t){return t!==ff}),z(function(t){return Yh(t)?t:!0===t}),Gu(1))})}function df(t,e){return null!==t&&e&&e(new Pc(t)),vu(!0)}function yf(t,e){return null!==t&&e&&e(new Nc(t)),vu(!0)}function mf(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?vu(r.map(function(r){return Iu(function(){var i,o=lf(r,e,n);if(function(t){return t&&Gh(t.canActivate)}(o))i=Xc(o.canActivate(e,t));else{if(!Gh(o))throw new Error("Invalid CanActivate guard");i=Xc(o(e,t))}return i.pipe(Ju())})})).pipe(pf()):vu(!0)}function gf(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)}).filter(function(t){return null!==t}).map(function(e){return Iu(function(){return vu(e.guards.map(function(i){var o,a=lf(i,e.node,n);if(function(t){return t&&Gh(t.canActivateChild)}(a))o=Xc(a.canActivateChild(r,t));else{if(!Gh(a))throw new Error("Invalid CanActivateChild guard");o=Xc(a(r,t))}return o.pipe(Ju())})).pipe(pf())})});return vu(i).pipe(pf())}var vf=function(){return function(){}}(),bf=function(){function t(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}return t.prototype.recognize=function(){try{var t=Sf(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Fc),n=new Dh([],Object.freeze({}),Object.freeze(Object(r.__assign)({},this.urlTree.queryParams)),this.urlTree.fragment,{},Fc,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Eh(n,e),o=new Ah(this.url,i);return this.inheritParamsAndData(o._root),vu(o)}catch(a){return new S(function(t){return t.error(a)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=xh(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,r=this,i=ih(e,function(e,n){return r.processSegmentGroup(t,e,n)});return n={},i.forEach(function(t){var e=n[t.value.outlet];if(e){var r=e.url.map(function(t){return t.toString()}).join("/"),i=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+i+"'.")}n[t.value.outlet]=t.value}),i.sort(function(t,e){return t.value.outlet===Fc?-1:e.value.outlet===Fc?1:t.value.outlet.localeCompare(e.value.outlet)}),i},t.prototype.processSegment=function(t,e,n,i){var o,a;try{for(var s=Object(r.__values)(t),u=s.next();!u.done;u=s.next()){var l=u.value;try{return this.processSegmentAgainstRoute(l,e,n,i)}catch(c){if(!(c instanceof vf))throw c}}}catch(h){o={error:h}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}if(this.noLeftoversInUrl(e,n,i))return[];throw new vf},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,i){if(t.redirectTo)throw new vf;if((t.outlet||Fc)!==i)throw new vf;var o,a=[],s=[];if("**"===t.path){var u=n.length>0?Zc(n).parameters:{};o=new Dh(n,u,Object.freeze(Object(r.__assign)({},this.urlTree.queryParams)),this.urlTree.fragment,Tf(t),i,t.component,t,wf(e),_f(e)+n.length,If(t))}else{var l=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new vf;return{consumedSegments:[],lastChild:0,parameters:{}}}var i=(e.matcher||qc)(n,t,e);if(!i)throw new vf;var o={};Jc(i.posParams,function(t,e){o[e]=t.path});var a=i.consumed.length>0?Object(r.__assign)({},o,i.consumed[i.consumed.length-1].parameters):o;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a}}(e,t,n);a=l.consumedSegments,s=n.slice(l.lastChild),o=new Dh(a,l.parameters,Object.freeze(Object(r.__assign)({},this.urlTree.queryParams)),this.urlTree.fragment,Tf(t),i,t.component,t,wf(e),_f(e)+a.length,If(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),h=Sf(e,a,s,c,this.relativeLinkResolution),f=h.segmentGroup,p=h.slicedSegments;if(0===p.length&&f.hasChildren()){var d=this.processChildren(c,f);return[new Eh(o,d)]}if(0===c.length&&0===p.length)return[new Eh(o,[])];var y=this.processSegment(c,f,p,Fc);return[new Eh(o,y)]},t}();function wf(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function _f(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Sf(t,e,n,i,o){if(n.length>0&&function(t,e,n){return i.some(function(n){return Ef(t,e,n)&&Cf(n)!==Fc})}(t,n)){var a=new eh(e,function(t,e,n,i){var o,a,s={};s[Fc]=i,i._sourceSegment=t,i._segmentIndexShift=e.length;try{for(var u=Object(r.__values)(n),l=u.next();!l.done;l=u.next()){var c=l.value;if(""===c.path&&Cf(c)!==Fc){var h=new eh([],{});h._sourceSegment=t,h._segmentIndexShift=e.length,s[Cf(c)]=h}}}catch(f){o={error:f}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return s}(t,e,i,new eh(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return i.some(function(n){return Ef(t,e,n)})}(t,n)){var s=new eh(t.segments,function(t,e,n,i,o,a){var s,u,l={};try{for(var c=Object(r.__values)(i),h=c.next();!h.done;h=c.next()){var f=h.value;if(Ef(t,n,f)&&!o[Cf(f)]){var p=new eh([],{});p._sourceSegment=t,p._segmentIndexShift="legacy"===a?t.segments.length:e.length,l[Cf(f)]=p}}}catch(d){s={error:d}}finally{try{h&&!h.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}return Object(r.__assign)({},o,l)}(t,e,n,i,t.children,o));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var u=new eh(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}function Ef(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Cf(t){return t.outlet||Fc}function Tf(t){return t.data||{}}function If(t){return t.resolve||{}}function kf(t,e,n,r){var i=lf(t,e,r);return Xc(i.resolve?i.resolve(e,n):i(e,n))}function xf(t){return function(e){return e.pipe(tl(function(e){var n=t(e);return n?K(n).pipe(z(function(){return e})):K([e])}))}}var Df=function(){return function(){}}(),Af=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),Nf=new Ot("ROUTES"),Of=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(z(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new zc(Yc(i.injector.get(Nf)).map(Kc),i)}))},t.prototype.loadModuleFactory=function(t){var e=this;return"string"==typeof t?K(this.loader.load(t)):Xc(t()).pipe(G(function(t){return t instanceof en?vu(t):K(e.compiler.compileModuleAsync(t))}))},t}(),Pf=function(){return function(){}}(),Rf=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function Mf(t){throw t}function Lf(t,e,n){return e.parse("/")}function Ff(t,e){return vu(null)}var Uf=function(){function t(t,e,n,r,i,o,a,s){var u=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=s,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new x,this.errorHandler=Mf,this.malformedUriErrorHandler=Lf,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ff,afterPreactivation:Ff},this.urlHandlingStrategy=new Rf,this.routeReuseStrategy=new Af,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(tn),this.console=i.get(Fi);var l=i.get(to);this.isNgZoneEnabled=l instanceof to,this.resetConfig(s),this.currentUrlTree=new th(new eh([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Of(o,a,function(t){return u.triggerEvent(new Dc(t))},function(t){return u.triggerEvent(new Ac(t))}),this.routerState=Ih(this.currentUrlTree,this.rootComponentType),this.transitions=new bu({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return t.prototype.setupNavigations=function(t){var e=this,n=this.events;return t.pipe(xu(function(t){return 0!==t.id}),z(function(t){return Object(r.__assign)({},t,{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})}),tl(function(t){var i,o,a,s,u=!1,l=!1;return vu(t).pipe(Lu(function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object(r.__assign)({},e.lastSuccessfulNavigation,{previousNavigation:null}):null}}),tl(function(t){var i,o,a,s,u=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||u)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return vu(t).pipe(tl(function(t){var r=e.transitions.getValue();return n.next(new wc(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?yu:[t]}),tl(function(t){return Promise.resolve(t)}),(i=e.ngModule.injector,o=e.configLoader,a=e.urlSerializer,s=e.config,function(t){return t.pipe(tl(function(t){return function(e,n,r,i,o){return new ef(e,n,r,t.extractedUrl,o).apply()}(i,o,a,0,s).pipe(z(function(e){return Object(r.__assign)({},t,{urlAfterRedirects:e})}))}))}),Lu(function(t){e.currentNavigation=Object(r.__assign)({},e.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,n,i,o,a){return function(i){return i.pipe(G(function(i){return function(t,e,n,r,i,o){return void 0===i&&(i="emptyOnly"),void 0===o&&(o="legacy"),new bf(t,e,n,r,i,o).recognize()}(t,n,i.urlAfterRedirects,(s=i.urlAfterRedirects,e.serializeUrl(s)),o,a).pipe(z(function(t){return Object(r.__assign)({},i,{targetSnapshot:t})}));var s}))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Lu(function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)}),Lu(function(t){var r=new Cc(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)}));if(u&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var l=t.extractedUrl,c=t.source,h=t.restoredState,f=t.extras,p=new wc(t.id,e.serializeUrl(l),c,h);n.next(p);var d=Ih(l,e.rootComponentType).snapshot;return vu(Object(r.__assign)({},t,{targetSnapshot:d,urlAfterRedirects:l,extras:Object(r.__assign)({},f,{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),yu}),xf(function(t){var n=t.extras;return e.hooks.beforePreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),Lu(function(t){var n=new Tc(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),z(function(t){return Object(r.__assign)({},t,{guards:(n=t.targetSnapshot,i=t.currentSnapshot,o=e.rootContexts,a=n._root,cf(a,i?i._root:null,o,[a.value]))});var n,i,o,a}),function(t,e){return function(n){return n.pipe(G(function(n){var i=n.targetSnapshot,o=n.currentSnapshot,a=n.guards,s=a.canActivateChecks,u=a.canDeactivateChecks;return 0===u.length&&0===s.length?vu(Object(r.__assign)({},n,{guardsResult:!0})):function(t,e,n,r){return K(u).pipe(G(function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?vu(o.map(function(o){var a,s=lf(o,e,i);if(function(t){return t&&Gh(t.canDeactivate)}(s))a=Xc(s.canDeactivate(t,e,n,r));else{if(!Gh(s))throw new Error("Invalid CanDeactivate guard");a=Xc(s(t,e,n,r))}return a.pipe(Ju())})).pipe(pf()):vu(!0)}(t.component,t.route,n,e,r)}),Ju(function(t){return!0!==t},!0))}(0,i,o,t).pipe(G(function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return K(s).pipe(sl(function(e){return K([yf(e.route.parent,r),df(e.route,r),gf(t,e.path,n),mf(t,e.route,n)]).pipe(ku(),Ju(function(t){return!0!==t},!0))}),Ju(function(t){return!0!==t},!0))}(i,0,t,e):vu(n)}),z(function(t){return Object(r.__assign)({},n,{guardsResult:t})}))}))}}(e.ngModule.injector,function(t){return e.triggerEvent(t)}),Lu(function(t){if(Yh(t.guardsResult)){var n=Bc('Redirecting to "'+e.serializeUrl(t.guardsResult)+'"');throw n.url=t.guardsResult,n}}),Lu(function(t){var n=new Ic(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)}),xu(function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new Sc(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0}),xf(function(t){if(t.guards.canActivateChecks.length)return vu(t).pipe(Lu(function(t){var n=new kc(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),(n=e.paramsInheritanceStrategy,i=e.ngModule.injector,function(t){return t.pipe(G(function(t){var e=t.targetSnapshot,o=t.guards.canActivateChecks;return o.length?K(o).pipe(sl(function(t){return function(t,n,i,o){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return vu({});if(1===i.length){var o=i[0];return kf(t[o],e,n,r).pipe(z(function(t){var e;return(e={})[o]=t,e}))}var a={};return K(i).pipe(G(function(i){return kf(t[i],e,n,r).pipe(z(function(t){return a[i]=t,t}))})).pipe(Wu(),z(function(){return a}))}(t._resolve,t,e,o).pipe(z(function(e){return t._resolvedData=e,t.data=Object(r.__assign)({},t.data,xh(t,i).resolve),null}))}(t.route,0,n,i)}),function(t,e){return arguments.length>=2?function(e){return w(il(t,void 0),Pu(1),Bu(void 0))(e)}:function(e){return w(il(function(e,n,r){return t(e)}),Pu(1))(e)}}(function(t,e){return t}),z(function(e){return t})):vu(t)}))}),Lu(function(t){var n=new xc(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}));var n,i}),xf(function(t){var n=t.extras;return e.hooks.afterPreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),z(function(t){var n,i,o,a=(o=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){(l=i.value)._futureSnapshot=n.value;var o=function(e,n,i){return n.children.map(function(n){var o,a;try{for(var s=Object(r.__values)(i.children),u=s.next();!u.done;u=s.next()){var l=u.value;if(e.shouldReuseRoute(l.value.snapshot,n.value))return t(e,n,l)}}catch(c){o={error:c}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return t(e,n)})}(e,n,i);return new Eh(l,o)}var a=e.retrieve(n.value);if(a){var s=a.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,s),s}var u,l=new kh(new bu((u=n.value).url),new bu(u.params),new bu(u.queryParams),new bu(u.fragment),new bu(u.data),u.outlet,u.component,u);return o=n.children.map(function(n){return t(e,n)}),new Eh(l,o)}(e.routeReuseStrategy,(n=t.targetSnapshot)._root,(i=t.currentRouterState)?i._root:void 0),new Th(o,n));return Object(r.__assign)({},t,{targetRouterState:a})}),Lu(function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)}),(o=e.rootContexts,a=e.routeReuseStrategy,s=function(t){return e.triggerEvent(t)},z(function(t){return new Qh(a,t.targetRouterState,t.currentRouterState,s).activate(o),t})),Lu({next:function(){u=!0},complete:function(){u=!0}}),(i=function(){if(!u&&!l){e.resetUrlToCurrentUrlTree();var r=new Sc(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID "+t.id+" is not equal to the current navigation id "+e.navigationId);n.next(r),t.resolve(!1)}e.currentNavigation=null},function(t){return t.lift(new ul(i))}),Hu(function(r){if(l=!0,(s=r)&&s[jc]){var i=Yh(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new Sc(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),t.resolve(!1),i&&e.navigateByUrl(r.url)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new Ec(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(u){t.reject(u)}}var s;return yu}))}))},t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.getTransition=function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t},t.prototype.setTransition=function(t){this.transitions.next(Object(r.__assign)({},this.getTransition(),t))},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?e.state:null;setTimeout(function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.getCurrentNavigation=function(){return this.currentNavigation},t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){Wc(t),this.config=t.map(Kc),this.navigated=!1,this.lastSuccessfulId=-1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,i=e.queryParams,o=e.fragment,a=e.preserveQueryParams,s=e.queryParamsHandling,u=e.preserveFragment;se()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var l=n||this.routerState.root,c=u?this.currentUrlTree.fragment:o,h=null;if(s)switch(s){case"merge":h=Object(r.__assign)({},this.currentUrlTree.queryParams,i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=a?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,i,o){if(0===n.length)return Lh(e.root,e.root,e,i,o);var a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Fh(!0,0,t);var e=0,n=!1,i=t.reduce(function(t,i,o){if("object"==typeof i&&null!=i){if(i.outlets){var a={};return Jc(i.outlets,function(t,e){a[e]="string"==typeof t?t.split("/"):t}),Object(r.__spread)(t,[{outlets:a}])}if(i.segmentPath)return Object(r.__spread)(t,[i.segmentPath])}return"string"!=typeof i?Object(r.__spread)(t,[i]):0===o?(i.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):Object(r.__spread)(t,[i])},[]);return new Fh(n,e,i)}(n);if(a.toRoot())return Lh(e.root,new eh([],{}),e,i,o);var s=function(t,n,r){if(t.isAbsolute)return new Uh(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new Uh(r.snapshot._urlSegment,!0,0);var i=Mh(t.commands[0])?0:1;return function(e,n,o){for(var a=r.snapshot._urlSegment,s=r.snapshot._lastPathIndex+i,u=t.numberOfDoubleDots;u>s;){if(u-=s,!(a=a.parent))throw new Error("Invalid number of '../'");s=a.segments.length}return new Uh(a,!1,s-u)}()}(a,0,t),u=s.processChildren?Bh(s.segmentGroup,s.index,a.commands):jh(s.segmentGroup,s.index,a.commands);return Lh(s.segmentGroup,u,e,i,o)}(l,this.currentUrlTree,t,h,c)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1}),se()&&this.isNgZoneEnabled&&!to.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Yh(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e},t.prototype.isActive=function(t,e){if(Yh(t))return $c(this.currentUrlTree,t,e);var n=this.parseUrl(t);return $c(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!=r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;this.navigations.subscribe(function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new _c(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)},function(e){t.console.warn("Unhandled Navigation Error: ")})},t.prototype.scheduleNavigation=function(t,e,n,r){var i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise(function(t,e){o=t,a=e}),u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch(function(t){return Promise.reject(t)})},t.prototype.setBrowserUrl=function(t,e,n,i){var o=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(o)||e?this.location.replaceState(o,"",Object(r.__assign)({},i,{navigationId:n})):this.location.go(o,"",Object(r.__assign)({},i,{navigationId:n}))},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},t}(),Vf=function(){function t(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveQueryParams",{set:function(t){se()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t},enumerable:!0,configurable:!0}),t.prototype.onClick=function(){var t={skipLocationChange:Bf(this.skipLocationChange),replaceUrl:Bf(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Bf(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Bf(this.preserveFragment)})},enumerable:!0,configurable:!0}),t}(),jf=function(){function t(t,e,n){var r=this;this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(function(t){t instanceof _c&&r.updateTargetUrlAndHref()})}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveQueryParams",{set:function(t){se()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.updateTargetUrlAndHref()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.onClick=function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:Bf(this.skipLocationChange),replaceUrl:Bf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1},t.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Bf(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Bf(this.preserveFragment)})},enumerable:!0,configurable:!0}),Object(r.__decorate)([xi("attr.target"),ki(),Object(r.__metadata)("design:type",String)],t.prototype,"target",void 0),t}();function Bf(t){return""===t||!!t}var qf=function(){function t(t,e,n,r,i){var o=this;this.router=t,this.element=e,this.renderer=n,this.link=r,this.linkWithHref=i,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(function(t){t instanceof _c&&o.update()})}return t.prototype.ngAfterContentInit=function(){var t=this;this.links.changes.subscribe(function(e){return t.update()}),this.linksWithHrefs.changes.subscribe(function(e){return t.update()}),this.update()},Object.defineProperty(t.prototype,"routerLinkActive",{set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(function(t){return!!t})},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.update()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.update=function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.classes.forEach(function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)}))})},t.prototype.isLinkActive=function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}},t.prototype.hasActiveLinks=function(){var t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)},t}(),zf=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wf,this.attachRef=null}}(),Wf=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new zf,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),Hf=function(){function t(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ci,this.deactivateEvents=new Ci,this.name=r||Fc,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Qf(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}(),Qf=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===kh?this.route:t===Wf?this.childContexts:this.parent.get(t,e)},t}(),Kf=function(){return function(){}}(),Gf=function(){function t(){}return t.prototype.preload=function(t,e){return e().pipe(Hu(function(){return vu(null)}))},t}(),Yf=function(){function t(){}return t.prototype.preload=function(t,e){return vu(null)},t}(),Zf=function(){function t(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Of(e,n,function(e){return t.triggerEvent(new Dc(e))},function(e){return t.triggerEvent(new Ac(e))})}return t.prototype.setUpPreloading=function(){var t=this;this.subscription=this.router.events.pipe(xu(function(t){return t instanceof _c}),sl(function(){return t.preload()})).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(tn);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){var n,i,o=[];try{for(var a=Object(r.__values)(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var l=u._loadedConfig;o.push(this.processRoutes(l.module,l.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return K(o).pipe(X(),z(function(t){}))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return n.loader.load(t.injector,e).pipe(G(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})},t}(),Jf=function(){function t(t,e,n){void 0===n&&(n={}),this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}return t.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},t.prototype.createScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof wc?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof _c&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})},t.prototype.consumeScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Mc&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})},t.prototype.scheduleScrollEvent=function(t,e){this.router.triggerEvent(new Mc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))},t.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},t}(),Xf=new Ot("ROUTER_CONFIGURATION"),$f=new Ot("ROUTER_FORROOT_GUARD"),tp=[ys,{provide:oh,useClass:ah},{provide:Uf,useFactory:sp,deps:[vo,oh,Wf,ys,Ft,Ii,Hi,Nf,Xf,[Pf,new dt],[Df,new dt]]},Wf,{provide:kh,useFactory:up,deps:[Uf]},{provide:Ii,useClass:So},Zf,Yf,Gf,{provide:Xf,useValue:{enableTracing:!1}}];function ep(){return new fo("Router",Uf)}var np=function(){function t(t,e){}var e;return e=t,t.forRoot=function(t,n){return{ngModule:e,providers:[tp,ap(t),{provide:$f,useFactory:op,deps:[[Uf,new dt,new mt]]},{provide:Xf,useValue:n||{}},{provide:ps,useFactory:ip,deps:[hs,[new pt(ds),new dt],Xf]},{provide:Jf,useFactory:rp,deps:[Uf,pu,Xf]},{provide:Kf,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Yf},{provide:fo,multi:!0,useFactory:ep},[lp,{provide:Di,multi:!0,useFactory:cp,deps:[lp]},{provide:fp,useFactory:hp,deps:[lp]},{provide:Li,multi:!0,useExisting:fp}]]}},t.forChild=function(t){return{ngModule:e,providers:[ap(t)]}},t}();function rp(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Jf(t,e,n)}function ip(t,e,n){return void 0===n&&(n={}),n.useHash?new gs(t,e):new vs(t,e)}function op(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ap(t){return[{provide:Xt,multi:!0,useValue:t},{provide:Nf,multi:!0,useValue:t}]}function sp(t,e,n,r,i,o,a,s,u,l,c){void 0===u&&(u={});var h=new Uf(null,e,n,r,i,o,a,Yc(s));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=hl();h.events.subscribe(function(t){f.logGroup("Router Event: "+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function up(t){return t.routerState.root}var lp=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new x}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(fs,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(Uf),i=t.injector.get(Xf);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '"+i.initialNavigation+"'");r.hooks.afterPreactivation=function(){return t.initNavigation?vu(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(Xf),n=this.injector.get(Zf),r=this.injector.get(Jf),i=this.injector.get(Uf),o=this.injector.get(vo);t===o.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation},t}();function cp(t){return t.appInitializer.bind(t)}function hp(t){return t.bootstrapListener.bind(t)}var fp=new Ot("Router Initializer"),pp=Zn({encapsulation:2,styles:[],data:{}});function dp(t){return na(0,[(t()(),Uo(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ai(1,212992,null,0,Hf,[Wf,Nn,Je,[8,null],Cn],null,null)],function(t,e){t(e,1,0)},null)}function yp(t){return na(0,[(t()(),Uo(0,0,null,null,1,"ng-component",[],null,null,null,dp,pp)),ai(1,49152,null,0,Lc,[],null,null)],null,null)}var mp=Lr("ng-component",Lc,yp,{},{},[]),gp=function(){function t(){this.change=new Ci,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}return t.prototype.defaultId=function(){return this.DEFAULT_ID},t.prototype.register=function(t){null==t.id&&(t.id=this.DEFAULT_ID),this.instances[t.id]?this.updateInstance(t)&&this.change.emit(t.id):(this.instances[t.id]=t,this.change.emit(t.id))},t.prototype.updateInstance=function(t){var e=!1;for(var n in this.instances[t.id])t[n]!==this.instances[t.id][n]&&(this.instances[t.id][n]=t[n],e=!0);return e},t.prototype.getCurrentPage=function(t){if(this.instances[t])return this.instances[t].currentPage},t.prototype.setCurrentPage=function(t,e){if(this.instances[t]){var n=this.instances[t];e<=Math.ceil(n.totalItems/n.itemsPerPage)&&1<=e&&(this.instances[t].currentPage=e,this.change.emit(t))}},t.prototype.setTotalItems=function(t,e){this.instances[t]&&0<=e&&(this.instances[t].totalItems=e,this.change.emit(t))},t.prototype.setItemsPerPage=function(t,e){this.instances[t]&&(this.instances[t].itemsPerPage=e,this.change.emit(t))},t.prototype.getInstance=function(t){return void 0===t&&(t=this.DEFAULT_ID),this.instances[t]?this.clone(this.instances[t]):{}},t.prototype.clone=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t}(),vp=Number.MAX_SAFE_INTEGER,bp=function(){function t(t){this.service=t,this.state={}}return t.prototype.transform=function(t,e){if(e instanceof Array&&(e=e[0]),!(t instanceof Array)){var n=e.id||this.service.defaultId;return this.state[n]?this.state[n].slice:t}var r,i,o=e.totalItems&&e.totalItems!==t.length,a=this.createInstance(t,e),s=a.id,u=a.itemsPerPage;if(this.service.register(a),!o&&t instanceof Array){if(this.stateIsIdentical(s,t,r=(a.currentPage-1)*(u=+u||vp),i=r+u))return this.state[s].slice;var l=t.slice(r,i);return this.saveState(s,t,l,r,i),this.service.change.emit(s),l}return this.saveState(s,t,t,r,i),t},t.prototype.createInstance=function(t,e){var n=e;return this.checkConfig(n),{id:null!=n.id?n.id:this.service.defaultId(),itemsPerPage:+n.itemsPerPage||0,currentPage:+n.currentPage||1,totalItems:+n.totalItems||t.length}},t.prototype.checkConfig=function(t){var e=["itemsPerPage","currentPage"].filter(function(e){return!(e in t)});if(0<e.length)throw new Error("PaginatePipe: Argument is missing the following required properties: "+e.join(", "))},t.prototype.saveState=function(t,e,n,r,i){this.state[t]={collection:e,size:e.length,slice:n,start:r,end:i}},t.prototype.stateIsIdentical=function(t,e,n,r){var i=this.state[t];return!!i&&!(i.size!==e.length||i.start!==n||i.end!==r)&&i.slice.every(function(t,r){return t===e[n+r]})},t}();function wp(t){return!!t&&"false"!==t}var _p=function(){function t(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new Ci,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}return Object.defineProperty(t.prototype,"directionLinks",{get:function(){return this._directionLinks},set:function(t){this._directionLinks=wp(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoHide",{get:function(){return this._autoHide},set:function(t){this._autoHide=wp(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"responsive",{get:function(){return this._responsive},set:function(t){this._responsive=wp(t)},enumerable:!0,configurable:!0}),t}(),Sp=function(){function t(t,e){var n=this;this.service=t,this.changeDetectorRef=e,this.maxSize=7,this.pageChange=new Ci,this.pages=[],this.changeSub=this.service.change.subscribe(function(t){n.id===t&&(n.updatePageLinks(),n.changeDetectorRef.markForCheck(),n.changeDetectorRef.detectChanges())})}return t.prototype.ngOnInit=function(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()},t.prototype.ngOnChanges=function(t){this.updatePageLinks()},t.prototype.ngOnDestroy=function(){this.changeSub.unsubscribe()},t.prototype.previous=function(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)},t.prototype.next=function(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)},t.prototype.isFirstPage=function(){return 1===this.getCurrent()},t.prototype.isLastPage=function(){return this.getLastPage()===this.getCurrent()},t.prototype.setCurrent=function(t){this.pageChange.emit(t)},t.prototype.getCurrent=function(){return this.service.getCurrentPage(this.id)},t.prototype.getLastPage=function(){var t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)},t.prototype.getTotalItems=function(){return this.service.getInstance(this.id).totalItems},t.prototype.checkValidId=function(){null==this.service.getInstance(this.id).id&&console.warn('PaginationControlsDirective: the specified id "'+this.id+'" does not match any registered PaginationInstance')},t.prototype.updatePageLinks=function(){var t=this,e=this.service.getInstance(this.id),n=this.outOfBoundCorrection(e);n!==e.currentPage?setTimeout(function(){t.setCurrent(n),t.pages=t.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,t.maxSize)}):this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)},t.prototype.outOfBoundCorrection=function(t){var e=Math.ceil(t.totalItems/t.itemsPerPage);return e<t.currentPage&&0<e?e:t.currentPage<1?1:t.currentPage},t.prototype.createPageArray=function(t,e,n,r){r=+r;for(var i=[],o=Math.ceil(n/e),a=Math.ceil(r/2),s=t<=a,u=o-a<t,l=!s&&!u,c=r<o,h=1;h<=o&&h<=r;){var f=this.calculatePageNumber(h,t,r,o);i.push({label:c&&(2===h&&(l||u)||h===r-1&&(l||s))?"...":f,value:f}),h++}return i},t.prototype.calculatePageNumber=function(t,e,n,r){var i=Math.ceil(n/2);return t===n?r:1===t?t:n<r?r-i<e?r-n+t:i<e?e-i+t:t:t},t}(),Ep=function(){return function(){}}(),Cp=Zn({encapsulation:2,styles:["\n.ngx-pagination {\n  margin-left: 0;\n  margin-bottom: 1rem; }\n  .ngx-pagination::before, .ngx-pagination::after {\n    content: ' ';\n    display: table; }\n  .ngx-pagination::after {\n    clear: both; }\n  .ngx-pagination li {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    margin-right: 0.0625rem;\n    border-radius: 0; }\n  .ngx-pagination li {\n    display: inline-block; }\n  .ngx-pagination a,\n  .ngx-pagination button {\n    color: #0a0a0a; \n    display: block;\n    padding: 0.1875rem 0.625rem;\n    border-radius: 0; }\n    .ngx-pagination a:hover,\n    .ngx-pagination button:hover {\n      background: #e6e6e6; }\n  .ngx-pagination .current {\n    padding: 0.1875rem 0.625rem;\n    background: #2199e8;\n    color: #fefefe;\n    cursor: default; }\n  .ngx-pagination .disabled {\n    padding: 0.1875rem 0.625rem;\n    color: #cacaca;\n    cursor: default; } \n    .ngx-pagination .disabled:hover {\n      background: transparent; }\n  .ngx-pagination a, .ngx-pagination button {\n    cursor: pointer; }\n\n.ngx-pagination .pagination-previous a::before,\n.ngx-pagination .pagination-previous.disabled::before { \n  content: '\xab';\n  display: inline-block;\n  margin-right: 0.5rem; }\n\n.ngx-pagination .pagination-next a::after,\n.ngx-pagination .pagination-next.disabled::after {\n  content: '\xbb';\n  display: inline-block;\n  margin-left: 0.5rem; }\n\n.ngx-pagination .show-for-sr {\n  position: absolute !important;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0); }\n.ngx-pagination .small-screen {\n  display: none; }\n@media screen and (max-width: 601px) {\n  .ngx-pagination.responsive .small-screen {\n    display: inline-block; } \n  .ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next) {\n    display: none; }\n}\n  "],data:{}});function Tp(t){return na(0,[(t()(),Uo(0,0,null,null,3,"a",[["tabindex","0"]],[[1,"aria-label",0]],[[null,"keyup.enter"],[null,"click"]],function(t,e,n){var r=!0;return"keyup.enter"===e&&(r=!1!==Kr(t.parent.parent.parent,1).previous()&&r),"click"===e&&(r=!1!==Kr(t.parent.parent.parent,1).previous()&&r),r},null,null)),(t()(),$o(1,null,[" "," "])),(t()(),Uo(2,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),$o(3,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n.previousLabel+" "+n.screenReaderPageLabel),t(e,1,0,n.previousLabel),t(e,3,0,n.screenReaderPageLabel)})}function Ip(t){return na(0,[(t()(),Uo(0,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),$o(1,null,[" "," "])),(t()(),Uo(2,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),$o(3,null,["",""]))],null,function(t,e){var n=e.component;t(e,1,0,n.previousLabel),t(e,3,0,n.screenReaderPageLabel)})}function kp(t){return na(0,[(t()(),Uo(0,0,null,null,4,"li",[["class","pagination-previous"]],[[2,"disabled",null]],null,null,null,null)),(t()(),Fo(16777216,null,null,1,null,Tp)),ai(2,16384,null,0,ou,[Nn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Fo(16777216,null,null,1,null,Ip)),ai(4,16384,null,0,ou,[Nn,Dn],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,1<Kr(e.parent.parent,1).getCurrent()),t(e,4,0,Kr(e.parent.parent,1).isFirstPage())},function(t,e){t(e,0,0,Kr(e.parent.parent,1).isFirstPage())})}function xp(t){return na(0,[(t()(),Uo(0,0,null,null,4,"a",[["tabindex","0"]],null,[[null,"keyup.enter"],[null,"click"]],function(t,e,n){var r=!0;return"keyup.enter"===e&&(r=!1!==Kr(t.parent.parent.parent,1).setCurrent(t.parent.context.$implicit.value)&&r),"click"===e&&(r=!1!==Kr(t.parent.parent.parent,1).setCurrent(t.parent.context.$implicit.value)&&r),r},null,null)),(t()(),Uo(1,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),$o(2,null,[""," "])),(t()(),Uo(3,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),$o(4,null,["",""]))],null,function(t,e){t(e,2,0,e.component.screenReaderPageLabel),t(e,4,0,e.parent.context.$implicit.label)})}function Dp(t){return na(0,[(t()(),Uo(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),Uo(1,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),$o(2,null,[""," "])),(t()(),Uo(3,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),$o(4,null,["",""]))],null,function(t,e){t(e,2,0,e.component.screenReaderCurrentLabel),t(e,4,0,e.parent.context.$implicit.label)})}function Ap(t){return na(0,[(t()(),Uo(0,0,null,null,4,"li",[],[[2,"current",null],[2,"ellipsis",null]],null,null,null,null)),(t()(),Fo(16777216,null,null,1,null,xp)),ai(2,16384,null,0,ou,[Nn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Fo(16777216,null,null,1,null,Dp)),ai(4,16384,null,0,ou,[Nn,Dn],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,Kr(e.parent.parent,1).getCurrent()!==e.context.$implicit.value),t(e,4,0,Kr(e.parent.parent,1).getCurrent()===e.context.$implicit.value)},function(t,e){t(e,0,0,Kr(e.parent.parent,1).getCurrent()===e.context.$implicit.value,"..."===e.context.$implicit.label)})}function Np(t){return na(0,[(t()(),Uo(0,0,null,null,3,"a",[["tabindex","0"]],[[1,"aria-label",0]],[[null,"keyup.enter"],[null,"click"]],function(t,e,n){var r=!0;return"keyup.enter"===e&&(r=!1!==Kr(t.parent.parent.parent,1).next()&&r),"click"===e&&(r=!1!==Kr(t.parent.parent.parent,1).next()&&r),r},null,null)),(t()(),$o(1,null,[" "," "])),(t()(),Uo(2,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),$o(3,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n.nextLabel+" "+n.screenReaderPageLabel),t(e,1,0,n.nextLabel),t(e,3,0,n.screenReaderPageLabel)})}function Op(t){return na(0,[(t()(),Uo(0,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),$o(1,null,[" "," "])),(t()(),Uo(2,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),$o(3,null,["",""]))],null,function(t,e){var n=e.component;t(e,1,0,n.nextLabel),t(e,3,0,n.screenReaderPageLabel)})}function Pp(t){return na(0,[(t()(),Uo(0,0,null,null,4,"li",[["class","pagination-next"]],[[2,"disabled",null]],null,null,null,null)),(t()(),Fo(16777216,null,null,1,null,Np)),ai(2,16384,null,0,ou,[Nn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Fo(16777216,null,null,1,null,Op)),ai(4,16384,null,0,ou,[Nn,Dn],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,!Kr(e.parent.parent,1).isLastPage()),t(e,4,0,Kr(e.parent.parent,1).isLastPage())},function(t,e){t(e,0,0,Kr(e.parent.parent,1).isLastPage())})}function Rp(t){return na(0,[(t()(),Uo(0,0,null,null,8,"ul",[["class","ngx-pagination"],["role","navigation"]],[[1,"aria-label",0],[2,"responsive",null]],null,null,null,null)),(t()(),Fo(16777216,null,null,1,null,kp)),ai(2,16384,null,0,ou,[Nn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Uo(3,0,null,null,1,"li",[["class","small-screen"]],null,null,null,null,null)),(t()(),$o(4,null,[" "," / "," "])),(t()(),Fo(16777216,null,null,1,null,Ap)),ai(6,278528,null,0,ru,[Nn,Dn,Sn],{ngForOf:[0,"ngForOf"]},null),(t()(),Fo(16777216,null,null,1,null,Pp)),ai(8,16384,null,0,ou,[Nn,Dn],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.directionLinks),t(e,6,0,Kr(e.parent,1).pages),t(e,8,0,n.directionLinks)},function(t,e){var n=e.component;t(e,0,0,n.screenReaderPaginationLabel,n.responsive),t(e,4,0,Kr(e.parent,1).getCurrent(),Kr(e.parent,1).getLastPage())})}function Mp(t){return na(2,[(t()(),Uo(0,0,null,null,3,"pagination-template",[],null,[[null,"pageChange"]],function(t,e,n){var r=!0;return"pageChange"===e&&(r=!1!==t.component.pageChange.emit(n)&&r),r},null,null)),ai(1,737280,[["p",4]],0,Sp,[gp,Cn],{id:[0,"id"],maxSize:[1,"maxSize"]},{pageChange:"pageChange"}),(t()(),Fo(16777216,null,null,1,null,Rp)),ai(3,16384,null,0,ou,[Nn,Dn],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.id,n.maxSize),t(e,3,0,!(n.autoHide&&Kr(e,1).pages.length<=1))},null)}var Lp=function(){function t(t){this.el=t,this.from=0,this.duration=4,this.e=this.el.nativeElement,this.refreshInterval=30,this.step=0}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){this.CountTo&&this.start()},t.prototype.calculate=function(){this.duration=1e3*this.duration,this.steps=Math.ceil(this.duration/this.refreshInterval),this.increment=(this.CountTo-this.from)/this.steps,this.num=this.from},t.prototype.tick=function(){var t=this;setTimeout(function(){t.num+=t.increment,t.step++,t.step>=t.steps?(t.num=t.CountTo,t.e.textContent=t.CountTo):(t.e.textContent=Math.round(t.num),t.tick())},this.refreshInterval)},t.prototype.start=function(){this.calculate(),this.tick()},t}(),Fp=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.forChild=function(){return{ngModule:t,providers:[]}},t}();function Up(t){return function(t){return new S(function(e){return{unsubscribe:t.onSnapshot(e)}})}(t).pipe(st())}function Vp(t){return Up(t).pipe(z(function(t){return{payload:t,type:"query"}}))}function jp(t){return Vp(t).pipe(z(function(t){return t.payload.docChanges().map(function(t){return{type:t.type,payload:t}})}))}function Bp(t,e){return Vp(t).pipe(z(function(t){return t.payload.docChanges()}),il(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e)},[]),z(function(t){return t.map(function(t){return{type:t.type,payload:t}})}))}var qp=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.__extends(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.__extends(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(l)),zp=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.__extends(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(qp),Wp=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),Hp=function(t){function e(n,r){void 0===r&&(r=Wp.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.__extends(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(Wp),Qp=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e}(Hp))(zp),Kp=function(){function t(t,e){this.zone=t,this.platformId=e}return t.prototype.schedule=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.zone.runGuarded(function(){return Qp.schedule.apply(Qp,t)})},t.prototype.keepUnstableUntilFirst=function(t){return fu(this.platformId)?new S(function(e){var n=function(){},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);t.subscribe(function(t){"scheduled"===r.state&&r.invoke(),e.next(t)},function(t){"scheduled"===r.state&&r.invoke(),e.error(t)},function(){"scheduled"===r.state&&r.invoke(),e.complete()})}):t},t.prototype.runOutsideAngular=function(t){var e=this;return new S(function(n){return e.zone.runOutsideAngular(function(){return t.subscribe(function(t){return e.zone.run(function(){return n.next(t)})},function(t){return e.zone.run(function(){return n.error(t)})},function(){return e.zone.run(function(){return n.complete()})})})})},t}(),Gp=function(t){return function(e){return new S(function(n){return e.subscribe(function(e){return t.run(function(){return n.next(e)})},function(e){return t.run(function(){return n.error(e)})},function(){return t.run(function(){return n.complete()})})})}},Yp=function(){return(Yp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Zp(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}var Jp=function(){function t(t,e,n){this.ref=t,this.query=e,this.afs=n}return t.prototype.stateChanges=function(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(jp(this.query))).pipe(z(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),xu(function(t){return t.length>0})):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(jp(this.query)))},t.prototype.auditTrail=function(t){return this.stateChanges(t).pipe(il(function(t,e){return t.concat(e)},[]))},t.prototype.snapshotChanges=function(t){var e=Zp(t),n=Bp(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)},t.prototype.valueChanges=function(t){void 0===t&&(t={});var e=Vp(this.query),n=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(n).pipe(z(function(e){return e.payload.docs.map(function(e){var n;return t.idField?Yp({},e.data(),((n={})[t.idField]=e.id,n)):e.data()})}))},t.prototype.get=function(t){return K(this.query.get(t)).pipe(Gp(this.afs.scheduler.zone))},t.prototype.add=function(t){return this.ref.add(t)},t.prototype.doc=function(t){return new Xp(this.ref.doc(t),this.afs)},t}(),Xp=function(){function t(t,e){this.ref=t,this.afs=e}return t.prototype.set=function(t,e){return this.ref.set(t,e)},t.prototype.update=function(t){return this.ref.update(t)},t.prototype.delete=function(){return this.ref.delete()},t.prototype.collection=function(t,e){var n=fd(this.ref.collection(t),e);return new Jp(n.ref,n.query,this.afs)},t.prototype.snapshotChanges=function(){var t=Up(this.ref).pipe(z(function(t){return{payload:t,type:"value"}})),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e)},t.prototype.valueChanges=function(){return this.snapshotChanges().pipe(z(function(t){return t.payload.data()}))},t.prototype.get=function(t){return K(this.ref.get(t)).pipe(Gp(this.afs.scheduler.zone))},t}(),$p=function(){function t(t,e){this.query=t,this.afs=e}return t.prototype.stateChanges=function(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(jp(this.query))).pipe(z(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),xu(function(t){return t.length>0})):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(jp(this.query)))},t.prototype.auditTrail=function(t){return this.stateChanges(t).pipe(il(function(t,e){return t.concat(e)},[]))},t.prototype.snapshotChanges=function(t){var e=Zp(t),n=Bp(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)},t.prototype.valueChanges=function(){var t=Vp(this.query),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e).pipe(z(function(t){return t.payload.docs.map(function(t){return t.data()})}))},t.prototype.get=function(t){return K(this.query.get(t)).pipe(Gp(this.afs.scheduler.zone))},t}(),td=n("Wcq6"),ed=n.n(td),nd=new Ot("angularfire2.app.options"),rd=new Ot("angularfire2.app.nameOrConfig"),id=function(){return function(){}}();function od(t,e){var n="object"==typeof e&&e||{};return n.name=n.name||"string"==typeof e&&e||"[DEFAULT]",ed.a.apps.filter(function(t){return t&&t.name===n.name})[0]||ed.a.initializeApp(t,n)}var ad=function(){function t(){}var e;return e=t,t.initializeApp=function(t,n){return{ngModule:e,providers:[{provide:nd,useValue:t},{provide:rd,useValue:n}]}},t}(),sd=new Ot("angularfire2.enableFirestorePersistence"),ud=new Ot("angularfire2.firestore.persistenceSettings"),ld=new Ot("angularfire2.firestore.settings"),cd=parseInt(ed.a.SDK_VERSION.split(".")[0]),hd=cd<5||5==cd&&parseInt(ed.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function fd(t,e){return void 0===e&&(e=function(t){return t}),{query:e(t),ref:t}}var pd=function(){function t(t,e,n,r,i,o,a){var s=this;this.scheduler=new Kp(o,i),this.firestore=o.runOutsideAngular(function(){var n=od(t,e).firestore();return n.settings(r||hd),n}),this.persistenceEnabled$=n&&!fu(i)?o.runOutsideAngular(function(){try{return K(s.firestore.enablePersistence(a||void 0).then(function(){return!0},function(){return!1}))}catch(t){return vu(!1)}}):vu(!1)}return t.prototype.collection=function(t,e){var n=fd("string"==typeof t?this.firestore.collection(t):t,e);return new Jp(n.ref,n.query,this)},t.prototype.collectionGroup=function(t,e){if(cd<6)throw"collection group queries require Firebase JS SDK >= 6.0";var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new $p(n(r),this)},t.prototype.doc=function(t){var e;return e="string"==typeof t?this.firestore.doc(t):t,new Xp(e,this)},t.prototype.createId=function(){return this.firestore.collection("_").doc().id},t}(),dd=function(){return function(){}}(),yd=function(){return function(){}}(),md=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var n=t.indexOf(":");if(n>0){var r=t.slice(0,n),i=r.toLowerCase(),o=t.slice(n+1).trim();e.maybeSetNormalizedName(r,i),e.headers.has(i)?e.headers.get(i).push(o):e.headers.set(i,[o])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(n){var r=t[n],i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(e.headers.set(i,r),e.maybeSetNormalizedName(n,i))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var i=("a"===t.op?this.headers.get(e):void 0)||[];i.push.apply(i,Object(r.__spread)(n)),this.headers.set(e,i);break;case"d":var o=t.value;if(o){var a=this.headers.get(e);if(!a)return;0===(a=a.filter(function(t){return-1===o.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})},t}(),gd=function(){function t(){}return t.prototype.encodeKey=function(t){return vd(t)},t.prototype.encodeValue=function(t){return vd(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function vd(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var bd=function(){function t(t){var e,n,i,o=this;if(void 0===t&&(t={}),this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new gd,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,n=this.encoder,i=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),o=Object(r.__read)(-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],2),a=o[0],s=o[1],u=i.get(a)||[];u.push(s),i.set(a,u)}),i)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var n=t.fromObject[e];o.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=this.updates=null)},t}();function wd(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function _d(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Sd(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Ed=function(){function t(t,e,n,r){var i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new md),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{var a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new bd,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:wd(this.body)||_d(this.body)||Sd(this.body)||"string"==typeof this.body?this.body:this.body instanceof bd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:Sd(this.body)?null:_d(this.body)?this.body.type||null:wd(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof bd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},u)),e.setParams&&(l=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},l)),new t(n,r,o,{params:l,headers:u,reportProgress:s,responseType:i,withCredentials:a})},t}(),Cd=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),Td=function(){return function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new md,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),Id=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Cd.ResponseHeader,n}return Object(r.__extends)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(Td),kd=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Cd.Response,n.body=void 0!==e.body?e.body:null,n}return Object(r.__extends)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(Td),xd=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,n.error=e.error||null,n}return Object(r.__extends)(e,t),e}(Td);function Dd(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Ad=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var r,i=this;if(void 0===n&&(n={}),t instanceof Ed)r=t;else{var o;o=n.headers instanceof md?n.headers:new md(n.headers);var a=void 0;n.params&&(a=n.params instanceof bd?n.params:new bd({fromObject:n.params})),r=new Ed(t,e,void 0!==n.body?n.body:null,{headers:o,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var s=vu(r).pipe(sl(function(t){return i.handler.handle(t)}));if(t instanceof Ed||"events"===n.observe)return s;var u=s.pipe(xu(function(t){return t instanceof kd}));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return u.pipe(z(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return u.pipe(z(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return u.pipe(z(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return u.pipe(z(function(t){return t.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new bd).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,Dd(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,Dd(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,Dd(n,e))},t}(),Nd=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),Od=new Ot("HTTP_INTERCEPTORS"),Pd=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),Rd=/^\)\]\}',?\n/,Md=function(){return function(){}}(),Ld=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),Fd=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new S(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new md(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new Id({headers:i,status:e,statusText:n,url:o})},l=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,l=null;204!==o&&(l=void 0===r.response?r.responseText:r.response),0===o&&(o=l?200:0);var c=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof l){var h=l;l=l.replace(Rd,"");try{l=""!==l?JSON.parse(l):null}catch(f){l=h,c&&(c=!1,l={error:f,text:l})}}c?(n.next(new kd({body:l,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new xd({error:l,headers:i,status:o,statusText:a,url:s||void 0}))},c=function(t){var e=u().url,i=new xd({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},h=!1,f=function(e){h||(n.next(u()),h=!0);var i={type:Cd.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},p=function(t){var e={type:Cd.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",l),r.addEventListener("error",c),t.reportProgress&&(r.addEventListener("progress",f),null!==a&&r.upload&&r.upload.addEventListener("progress",p)),r.send(a),n.next({type:Cd.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),t.reportProgress&&(r.removeEventListener("progress",f),null!==a&&r.upload&&r.upload.removeEventListener("progress",p)),r.abort()}})},t}(),Ud=new Ot("XSRF_COOKIE_NAME"),Vd=new Ot("XSRF_HEADER_NAME"),jd=function(){return function(){}}(),Bd=function(){function t(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=eu(t,this.cookieName),this.lastCookieString=t),this.lastToken},t}(),qd=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)},t}(),zd=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(Od,[]);this.chain=e.reduceRight(function(t,e){return new Nd(t,e)},this.backend)}return this.chain.handle(t)},t}(),Wd=function(){function t(){}var e;return e=t,t.disable=function(){return{ngModule:e,providers:[{provide:qd,useClass:Pd}]}},t.withOptions=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.cookieName?{provide:Ud,useValue:t.cookieName}:[],t.headerName?{provide:Vd,useValue:t.headerName}:[]]}},t}(),Hd=function(){return function(){}}(),Qd=function(){function t(t,e){this.firestore=t,this.httpClient=e}return t.prototype.collectionInitialization=function(){var t=this;this.CasesCollection=this.firestore.collection("cases",function(t){return t.orderBy("datetime","desc")}),this.feedItem=this.CasesCollection.snapshotChanges().pipe(z(function(e){return e.map(function(e){var n=e.payload.doc.data();t.id=e.payload.doc.id,t.firestore.collection("cases");var r=n.kiosk_id,i=n.datetime,o=t.id;return t.firestore.doc("kiosk/"+r).valueChanges().pipe(z(function(t){return Object.assign({Address:t.Address,case_id:o,name:t.name,kiosk_id:r,datetime:i})}))})}),G(function(t){return Eu(t)}))},t.prototype.sellectAllNews=function(){return this.collectionInitialization(),this.feedItem},t.prototype.collectionInitialization1=function(t){this.CasesCollection=this.firestore.collection("cases"),console.log(this.CasesCollection)},t.prototype.sellectAllNews1=function(t){return this.firestore.collection("cases").doc(t).valueChanges()},t.prototype.sellectAllNews2=function(t){return this.firestore.collection("kiosk").doc(t).valueChanges()},t.prototype.getObjectById=function(t){return this.firestore.collection("cases").doc(t).valueChanges()},t.prototype.hospital_list=function(t,e){return this.httpClient.get("http://kodwell.co.uk/KIOSK_API/KIOSK_SUPPORT/kiosk/getListWithDataHospital?lat="+t+"&lng="+e+"&count=5&case_type=2&pagetoken=")},t.prototype.police_list=function(t,e){return this.httpClient.get("http://kodwell.co.uk/KIOSK_API/KIOSK_SUPPORT/kiosk/getListWithDataPolice?lat="+t+"&lng="+e+"&count=5&case_type=2&pagetoken=")},t.ngInjectableDef=bt({factory:function(){return new t(Nt(pd),Nt(Ad))},token:t,providedIn:"root"}),t}(),Kd=function(){function t(t,e,n){this.firebaseService=t,this.datePipe=e,this.router=n,this.p=1,this.count={countTo:this.case_count,from:0,duration:1}}return t.prototype.ngOnInit=function(){var t=this;this.datePipe.transform(new Date,"dd-MM-yyyy"),this.datePipe.transform(new Date,"MM-dd-yyyy"),this.datePipe.transform(new Date,"M/d/yy"),this.datePipe.transform(new Date,"MMM d, y, h:mm:ss a"),this.firebaseService.sellectAllNews().subscribe(function(e){t.case_list=e,t.case_count=e.length,console.log(e)})},t.prototype.goToProductDetails=function(t){this.router.navigate(["/product-details",t])},t}(),Gd=Zn({encapsulation:0,styles:[[""]],data:{}});function Yd(t){return na(0,[(t()(),Uo(0,0,null,null,17,"li",[["class","collection-item avatar avatar1 "]],null,null,null,null,null)),(t()(),Uo(1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),$o(2,null,["kiosk Id : "," "])),(t()(),Uo(3,0,null,null,0,"img",[["alt",""],["class"," circle"],["src","http://www.divdat.com/wp-content/uploads/2018/01/kiosks.png"]],null,null,null,null,null)),(t()(),Uo(4,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(t()(),$o(5,null,["Location : ",""])),(t()(),Uo(6,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),$o(7,null,[" Address : "," "])),(t()(),Uo(8,0,null,null,4,"p",[["class","text-grey"],["style","font-size:12px;"]],null,null,null,null,null)),(t()(),Uo(9,0,null,null,1,"i",[["class","material-icons tiny"]],null,null,null,null,null)),(t()(),$o(-1,null,["access_time"])),(t()(),$o(11,null,[" "," "])),Xo(128,12,new Array(3)),(t()(),Uo(13,0,null,null,4,"a",[["class","secondary-content "]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Kr(t,14).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),ai(14,671744,null,0,jf,[Uf,kh,ps],{routerLink:[0,"routerLink"]},null),Zo(15,2),(t()(),Uo(16,0,null,null,1,"i",[["class","material-icons green-text pulse "]],null,null,null,null,null)),(t()(),$o(-1,null,["send"]))],function(t,e){var n=t(e,15,0,"/case-details",e.context.$implicit.case_id);t(e,14,0,n)},function(t,e){t(e,2,0,e.context.$implicit.kiosk_id),t(e,5,0,e.context.$implicit.name),t(e,7,0,e.context.$implicit.Address);var n=Kn(e,11,0,t(e,12,0,Kr(e.parent,0),e.context.$implicit.datetime.toDate(),"medium"));t(e,11,0,n),t(e,13,0,Kr(e,14).target,Kr(e,14).href)})}function Zd(t){return na(0,[si(0,uu,[No]),(t()(),Uo(1,0,null,null,8,"div",[["class","container"]],null,null,null,null,null)),(t()(),Uo(2,0,null,null,7,"nav",[["class","navbar-fixed"],["style","background: transparent;"]],null,null,null,null,null)),(t()(),Uo(3,0,null,null,6,"div",[["class","nav-wrapper"]],null,null,null,null,null)),(t()(),Uo(4,0,null,null,5,"a",[["class","brand-logo left"],["routerLink","/"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Kr(t,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),ai(5,671744,[[2,4]],0,jf,[Uf,kh,ps],{routerLink:[0,"routerLink"]},null),ai(6,1720320,null,2,qf,[Uf,rn,ln,[2,Vf],[2,jf]],{routerLinkActive:[0,"routerLinkActive"]},null),zo(603979776,1,{links:1}),zo(603979776,2,{linksWithHrefs:1}),(t()(),$o(-1,null,["KIOSK"])),(t()(),Uo(10,0,null,null,22,"div",[["class",""]],null,null,null,null,null)),(t()(),Uo(11,0,null,null,21,"div",[["class","row"]],null,null,null,null,null)),(t()(),Uo(12,0,null,null,11,"div",[["class","col m8 s12"]],null,null,null,null,null)),(t()(),Uo(13,0,null,null,7,"ul",[["class","collection with-header blue card"]],null,null,null,null,null)),(t()(),Uo(14,0,null,null,2,"li",[["class","collection-header blue-text text-lighten-1"]],null,null,null,null,null)),(t()(),Uo(15,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),$o(-1,null,["\xa0\xa0\xa0\xa0Case Tray"])),(t()(),Fo(16777216,null,null,3,null,Yd)),ai(18,278528,null,0,ru,[Nn,Dn,Sn],{ngForOf:[0,"ngForOf"]},null),Jo(19,{itemsPerPage:0,currentPage:1}),si(0,bp,[gp]),(t()(),Uo(21,0,null,null,2,"ul",[["class","pagination"]],null,null,null,null,null)),(t()(),Uo(22,0,null,null,1,"pagination-controls",[],null,[[null,"pageChange"]],function(t,e,n){var r=!0;return"pageChange"===e&&(r=!1!==(t.component.p=n)&&r),r},Mp,Cp)),ai(23,49152,null,0,_p,[],null,{pageChange:"pageChange"}),(t()(),Uo(24,0,null,null,8,"div",[["class","col m4 s12"]],null,null,null,null,null)),(t()(),Uo(25,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(t()(),Uo(26,0,null,null,6,"div",[["class","col s12 "]],null,null,null,null,null)),(t()(),Uo(27,0,null,null,5,"div",[["class","card-panel white ighten-3 center"]],null,null,null,null,null)),(t()(),Uo(28,0,null,null,4,"div",[["class","employees"]],null,null,null,null,null)),(t()(),Uo(29,0,null,null,1,"h2",[["class","timer count-title count-number counter-count counter-value z-depth-3 cyan pulse"]],null,null,null,null,null)),ai(30,606208,null,0,Lp,[rn],{CountTo:[0,"CountTo"],from:[1,"from"],duration:[2,"duration"]},null),(t()(),Uo(31,0,null,null,1,"p",[["class","employee-p"]],null,null,null,null,null)),(t()(),$o(-1,null,["Case Count"])),(t()(),Uo(33,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(34,0,null,null,0,"br",[],null,null,null,null,null))],function(t,e){var n=e.component;t(e,5,0,"/"),t(e,6,0,"active");var r=Kn(e,18,0,Kr(e,20).transform(n.case_list,t(e,19,0,4,n.p)));t(e,18,0,r),t(e,30,0,n.case_count,0,2)},function(t,e){t(e,4,0,Kr(e,5).target,Kr(e,5).href)})}function Jd(t){return na(0,[(t()(),Uo(0,0,null,null,1,"app-home",[],null,null,null,Zd,Gd)),ai(1,114688,null,0,Kd,[Qd,uu,Uf],null,null)],function(t,e){t(e,1,0)},null)}var Xd=Lr("app-home",Kd,Jd,{},{},[]),$d=function(){return function(){}}(),ty=function(){function t(t,e){var n=this;this._loader=t,this._zone=e,this._map=new Promise(function(t){n._mapResolver=t})}return t.prototype.createMap=function(t,e){var n=this;return this._zone.runOutsideAngular(function(){return n._loader.load().then(function(){var r=new google.maps.Map(t,e);n._mapResolver(r)})})},t.prototype.setMapOptions=function(t){this._map.then(function(e){e.setOptions(t)})},t.prototype.createMarker=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=!0),this._map.then(function(n){return e&&(t.map=n),new google.maps.Marker(t)})},t.prototype.createInfoWindow=function(t){return this._map.then(function(){return new google.maps.InfoWindow(t)})},t.prototype.createCircle=function(t){return this._map.then(function(e){return t.map=e,new google.maps.Circle(t)})},t.prototype.createRectangle=function(t){return this._map.then(function(e){return t.map=e,new google.maps.Rectangle(t)})},t.prototype.createPolyline=function(t){return this.getNativeMap().then(function(e){var n=new google.maps.Polyline(t);return n.setMap(e),n})},t.prototype.createPolygon=function(t){return this.getNativeMap().then(function(e){var n=new google.maps.Polygon(t);return n.setMap(e),n})},t.prototype.createDataLayer=function(t){return this._map.then(function(e){var n=new google.maps.Data(t);return n.setMap(e),n})},t.prototype.containsLocation=function(t,e){return google.maps.geometry.poly.containsLocation(t,e)},t.prototype.subscribeToMapEvent=function(t){var e=this;return new S(function(n){e._map.then(function(r){r.addListener(t,function(t){e._zone.run(function(){return n.next(t)})})})})},t.prototype.clearInstanceListeners=function(){this._map.then(function(t){google.maps.event.clearInstanceListeners(t)})},t.prototype.setCenter=function(t){return this._map.then(function(e){return e.setCenter(t)})},t.prototype.getZoom=function(){return this._map.then(function(t){return t.getZoom()})},t.prototype.getBounds=function(){return this._map.then(function(t){return t.getBounds()})},t.prototype.getMapTypeId=function(){return this._map.then(function(t){return t.getMapTypeId()})},t.prototype.setZoom=function(t){return this._map.then(function(e){return e.setZoom(t)})},t.prototype.getCenter=function(){return this._map.then(function(t){return t.getCenter()})},t.prototype.panTo=function(t){return this._map.then(function(e){return e.panTo(t)})},t.prototype.panBy=function(t,e){return this._map.then(function(n){return n.panBy(t,e)})},t.prototype.fitBounds=function(t){return this._map.then(function(e){return e.fitBounds(t)})},t.prototype.panToBounds=function(t){return this._map.then(function(e){return e.panToBounds(t)})},t.prototype.getNativeMap=function(){return this._map},t.prototype.triggerMapEvent=function(t){return this._map.then(function(e){return google.maps.event.trigger(e,t)})},t}(),ey=function(){function t(t,e){this._mapsWrapper=t,this._zone=e,this._markers=new Map}return t.prototype.deleteMarker=function(t){var e=this,n=this._markers.get(t);return null==n?Promise.resolve():n.then(function(n){return e._zone.run(function(){n.setMap(null),e._markers.delete(t)})})},t.prototype.updateMarkerPosition=function(t){return this._markers.get(t).then(function(e){return e.setPosition({lat:t.latitude,lng:t.longitude})})},t.prototype.updateTitle=function(t){return this._markers.get(t).then(function(e){return e.setTitle(t.title)})},t.prototype.updateLabel=function(t){return this._markers.get(t).then(function(e){e.setLabel(t.label)})},t.prototype.updateDraggable=function(t){return this._markers.get(t).then(function(e){return e.setDraggable(t.draggable)})},t.prototype.updateIcon=function(t){return this._markers.get(t).then(function(e){return e.setIcon(t.iconUrl)})},t.prototype.updateOpacity=function(t){return this._markers.get(t).then(function(e){return e.setOpacity(t.opacity)})},t.prototype.updateVisible=function(t){return this._markers.get(t).then(function(e){return e.setVisible(t.visible)})},t.prototype.updateZIndex=function(t){return this._markers.get(t).then(function(e){return e.setZIndex(t.zIndex)})},t.prototype.updateClickable=function(t){return this._markers.get(t).then(function(e){return e.setClickable(t.clickable)})},t.prototype.updateAnimation=function(t){return this._markers.get(t).then(function(e){e.setAnimation("string"==typeof t.animation?google.maps.Animation[t.animation]:t.animation)})},t.prototype.addMarker=function(t){var e=this._mapsWrapper.createMarker({position:{lat:t.latitude,lng:t.longitude},label:t.label,draggable:t.draggable,icon:t.iconUrl,opacity:t.opacity,visible:t.visible,zIndex:t.zIndex,title:t.title,clickable:t.clickable,animation:"string"==typeof t.animation?google.maps.Animation[t.animation]:t.animation});this._markers.set(t,e)},t.prototype.getNativeMarker=function(t){return this._markers.get(t)},t.prototype.createEventObservable=function(t,e){var n=this;return new S(function(r){n._markers.get(e).then(function(e){e.addListener(t,function(t){return n._zone.run(function(){return r.next(t)})})})})},t}(),ny=function(){function t(t,e,n){this._mapsWrapper=t,this._zone=e,this._markerManager=n,this._infoWindows=new Map}return t.prototype.deleteInfoWindow=function(t){var e=this,n=this._infoWindows.get(t);return null==n?Promise.resolve():n.then(function(n){return e._zone.run(function(){n.close(),e._infoWindows.delete(t)})})},t.prototype.setPosition=function(t){return this._infoWindows.get(t).then(function(e){return e.setPosition({lat:t.latitude,lng:t.longitude})})},t.prototype.setZIndex=function(t){return this._infoWindows.get(t).then(function(e){return e.setZIndex(t.zIndex)})},t.prototype.open=function(t){var e=this;return this._infoWindows.get(t).then(function(n){return null!=t.hostMarker?e._markerManager.getNativeMarker(t.hostMarker).then(function(t){return e._mapsWrapper.getNativeMap().then(function(e){return n.open(e,t)})}):e._mapsWrapper.getNativeMap().then(function(t){return n.open(t)})})},t.prototype.close=function(t){return this._infoWindows.get(t).then(function(t){return t.close()})},t.prototype.setOptions=function(t,e){return this._infoWindows.get(t).then(function(t){return t.setOptions(e)})},t.prototype.addInfoWindow=function(t){var e={content:t.content,maxWidth:t.maxWidth,zIndex:t.zIndex,disableAutoPan:t.disableAutoPan};"number"==typeof t.latitude&&"number"==typeof t.longitude&&(e.position={lat:t.latitude,lng:t.longitude});var n=this._mapsWrapper.createInfoWindow(e);this._infoWindows.set(t,n)},t.prototype.createEventObservable=function(t,e){var n=this;return new S(function(r){n._infoWindows.get(e).then(function(e){e.addListener(t,function(t){return n._zone.run(function(){return r.next(t)})})})})},t}(),ry=function(){function t(t,e){this._apiWrapper=t,this._zone=e,this._circles=new Map}return t.prototype.addCircle=function(t){this._circles.set(t,this._apiWrapper.createCircle({center:{lat:t.latitude,lng:t.longitude},clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,radius:t.radius,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokePosition:t.strokePosition,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex}))},t.prototype.removeCircle=function(t){var e=this;return this._circles.get(t).then(function(n){n.setMap(null),e._circles.delete(t)})},t.prototype.setOptions=function(t,e){return this._circles.get(t).then(function(t){return t.setOptions(e)})},t.prototype.getBounds=function(t){return this._circles.get(t).then(function(t){return t.getBounds()})},t.prototype.getCenter=function(t){return this._circles.get(t).then(function(t){return t.getCenter()})},t.prototype.getRadius=function(t){return this._circles.get(t).then(function(t){return t.getRadius()})},t.prototype.setCenter=function(t){return this._circles.get(t).then(function(e){return e.setCenter({lat:t.latitude,lng:t.longitude})})},t.prototype.setEditable=function(t){return this._circles.get(t).then(function(e){return e.setEditable(t.editable)})},t.prototype.setDraggable=function(t){return this._circles.get(t).then(function(e){return e.setDraggable(t.draggable)})},t.prototype.setVisible=function(t){return this._circles.get(t).then(function(e){return e.setVisible(t.visible)})},t.prototype.setRadius=function(t){return this._circles.get(t).then(function(e){return e.setRadius(t.radius)})},t.prototype.createEventObservable=function(t,e){var n=this;return new S(function(r){var i=null;return n._circles.get(e).then(function(e){i=e.addListener(t,function(t){return n._zone.run(function(){return r.next(t)})})}),function(){null!==i&&i.remove()}})},t}(),iy=function(){function t(t,e){this._apiWrapper=t,this._zone=e,this._rectangles=new Map}return t.prototype.addRectangle=function(t){this._rectangles.set(t,this._apiWrapper.createRectangle({bounds:{north:t.north,east:t.east,south:t.south,west:t.west},clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokePosition:t.strokePosition,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex}))},t.prototype.removeRectangle=function(t){var e=this;return this._rectangles.get(t).then(function(n){n.setMap(null),e._rectangles.delete(t)})},t.prototype.setOptions=function(t,e){return this._rectangles.get(t).then(function(t){return t.setOptions(e)})},t.prototype.getBounds=function(t){return this._rectangles.get(t).then(function(t){return t.getBounds()})},t.prototype.setBounds=function(t){return this._rectangles.get(t).then(function(e){return e.setBounds({north:t.north,east:t.east,south:t.south,west:t.west})})},t.prototype.setEditable=function(t){return this._rectangles.get(t).then(function(e){return e.setEditable(t.editable)})},t.prototype.setDraggable=function(t){return this._rectangles.get(t).then(function(e){return e.setDraggable(t.draggable)})},t.prototype.setVisible=function(t){return this._rectangles.get(t).then(function(e){return e.setVisible(t.visible)})},t.prototype.createEventObservable=function(t,e){var n=this;return S.create(function(r){var i=null;return n._rectangles.get(e).then(function(e){i=e.addListener(t,function(t){return n._zone.run(function(){return r.next(t)})})}),function(){null!==i&&i.remove()}})},t}();function oy(t){var e=["insert_at","remove_at","set_at"];return function t(e,n,r){return r?t(e,n).pipe(z(function(t){return i(t)?r.apply(void 0,t):r(t)})):new S(function(t){var r,i=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.next(1===e.length?e[0]:e)};try{r=e(i)}catch(o){return void t.error(o)}if(a(n))return function(){return n(i,r)}})}(function(n){return e.map(function(e){return t.addListener(e,function(r,i){return n.apply(t,[{newArr:t.getArray(),evName:e,index:r,previous:i}])})})},function(t,e){return e.forEach(function(t){return t.remove()})})}var ay=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},sy=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},uy=function(){function t(t,e){this._mapsWrapper=t,this._zone=e,this._polylines=new Map}var e;return e=t,t._convertPoints=function(t){return t._getPoints().map(function(t){return{lat:t.latitude,lng:t.longitude}})},t.prototype.addPolyline=function(t){var n=e._convertPoints(t),r=this._mapsWrapper.createPolyline({clickable:t.clickable,draggable:t.draggable,editable:t.editable,geodesic:t.geodesic,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex,path:n});this._polylines.set(t,r)},t.prototype.updatePolylinePoints=function(t){var n=this,r=e._convertPoints(t),i=this._polylines.get(t);return null==i?Promise.resolve():i.then(function(t){return n._zone.run(function(){t.setPath(r)})})},t.prototype.setPolylineOptions=function(t,e){return this._polylines.get(t).then(function(t){t.setOptions(e)})},t.prototype.deletePolyline=function(t){var e=this,n=this._polylines.get(t);return null==n?Promise.resolve():n.then(function(n){return e._zone.run(function(){n.setMap(null),e._polylines.delete(t)})})},t.prototype.getMVCPath=function(t){return ay(this,void 0,void 0,function(){return sy(this,function(e){switch(e.label){case 0:return[4,this._polylines.get(t)];case 1:return[2,e.sent().getPath()]}})})},t.prototype.getPath=function(t){return ay(this,void 0,void 0,function(){return sy(this,function(e){switch(e.label){case 0:return[4,this.getMVCPath(t)];case 1:return[2,e.sent().getArray()]}})})},t.prototype.createEventObservable=function(t,e){var n=this;return new S(function(r){n._polylines.get(e).then(function(e){e.addListener(t,function(t){return n._zone.run(function(){return r.next(t)})})})})},t.prototype.createPathEventObservable=function(t){return ay(this,void 0,void 0,function(){return sy(this,function(e){switch(e.label){case 0:return[4,this.getMVCPath(t)];case 1:return[2,oy(e.sent())]}})})},t}(),ly=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new cy(t,this.total))},t}(),cy=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.__extends(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(m),hy=function(){function t(t,e){this._mapsWrapper=t,this._zone=e,this._polygons=new Map}return t.prototype.addPolygon=function(t){var e=this._mapsWrapper.createPolygon({clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,geodesic:t.geodesic,paths:t.paths,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex});this._polygons.set(t,e)},t.prototype.updatePolygon=function(t){var e=this,n=this._polygons.get(t);return null==n?Promise.resolve():n.then(function(n){return e._zone.run(function(){n.setPaths(t.paths)})})},t.prototype.setPolygonOptions=function(t,e){return this._polygons.get(t).then(function(t){t.setOptions(e)})},t.prototype.deletePolygon=function(t){var e=this,n=this._polygons.get(t);return null==n?Promise.resolve():n.then(function(n){return e._zone.run(function(){n.setMap(null),e._polygons.delete(t)})})},t.prototype.getPath=function(t){return this._polygons.get(t).then(function(t){return t.getPath().getArray()})},t.prototype.getPaths=function(t){return this._polygons.get(t).then(function(t){return t.getPaths().getArray().map(function(t){return t.getArray()})})},t.prototype.createEventObservable=function(t,e){var n=this;return new S(function(r){n._polygons.get(e).then(function(e){e.addListener(t,function(t){return n._zone.run(function(){return r.next(t)})})})})},t.prototype.createPathEventObservable=function(t){return e=this,void 0,r=function(){var e,n;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,function(r){switch(r.label){case 0:return[4,this._polygons.get(t)];case 1:return e=r.sent(),[2,oy(n=e.getPaths()).pipe(rl({newArr:n.getArray()}),tl(function(t){return $.apply(void 0,t.newArr.map(function(e,n){return oy(e).pipe(z(function(e){return{parentMVEvent:t,chMVCEvent:e,pathIndex:n}}))})).pipe(rl({parentMVEvent:t,chMVCEvent:null,pathIndex:null}))}),function(t){return t.lift(new ly(1))},z(function(t){var e,n=t.parentMVEvent,r=t.chMVCEvent,i=t.pathIndex;return r?(e={newArr:n.newArr.map(function(t){return t.getArray().map(function(t){return t.toJSON()})}),pathIndex:i,eventName:r.evName,index:r.index},r.previous&&(e.previous=r.previous)):(e={newArr:n.newArr.map(function(t){return t.getArray().map(function(t){return t.toJSON()})}),eventName:n.evName,index:n.index},n.previous&&(e.previous=n.previous.getArray())),e}))]}})},new((n=void 0)||(n=Promise))(function(t,i){function o(t){try{s(r.next(t))}catch(e){i(e)}}function a(t){try{s(r.throw(t))}catch(e){i(e)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(o,a)}s((r=r.apply(e,[])).next())});var e,n,r},t}(),fy=function(){function t(t,e){this._wrapper=t,this._zone=e,this._layers=new Map}return t.prototype.addKmlLayer=function(t){var e=this._wrapper.getNativeMap().then(function(e){return new google.maps.KmlLayer({clickable:t.clickable,map:e,preserveViewport:t.preserveViewport,screenOverlays:t.screenOverlays,suppressInfoWindows:t.suppressInfoWindows,url:t.url,zIndex:t.zIndex})});this._layers.set(t,e)},t.prototype.setOptions=function(t,e){this._layers.get(t).then(function(t){return t.setOptions(e)})},t.prototype.deleteKmlLayer=function(t){var e=this;this._layers.get(t).then(function(n){n.setMap(null),e._layers.delete(t)})},t.prototype.createEventObservable=function(t,e){var n=this;return new S(function(r){n._layers.get(e).then(function(e){e.addListener(t,function(t){return n._zone.run(function(){return r.next(t)})})})})},t}(),py=function(){function t(t,e){this._wrapper=t,this._zone=e,this._layers=new Map}return t.prototype.addDataLayer=function(t){var e=this,n=this._wrapper.createDataLayer({style:t.style}).then(function(n){return t.geoJson&&e.getDataFeatures(n,t.geoJson).then(function(t){return n.features=t}),n});this._layers.set(t,n)},t.prototype.deleteDataLayer=function(t){var e=this;this._layers.get(t).then(function(n){n.setMap(null),e._layers.delete(t)})},t.prototype.updateGeoJson=function(t,e){var n=this;this._layers.get(t).then(function(t){t.forEach(function(e){t.remove(e);var n=t.features.indexOf(e,0);n>-1&&t.features.splice(n,1)}),n.getDataFeatures(t,e).then(function(e){return t.features=e})})},t.prototype.setDataOptions=function(t,e){this._layers.get(t).then(function(t){t.setControlPosition(e.controlPosition),t.setControls(e.controls),t.setDrawingMode(e.drawingMode),t.setStyle(e.style)})},t.prototype.createEventObservable=function(t,e){var n=this;return new S(function(r){n._layers.get(e).then(function(e){e.addListener(t,function(t){return n._zone.run(function(){return r.next(t)})})})})},t.prototype.getDataFeatures=function(t,e){return new Promise(function(n,r){if("object"==typeof e)try{n(t.addGeoJson(e))}catch(i){r(i)}else"string"==typeof e?t.loadGeoJson(e,null,n):r("Impossible to extract features from geoJson: wrong argument type")})},t}(),dy=new Hp(qp);function yy(t){return!i(t)&&t-parseFloat(t)+1>=0}function my(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var gy,vy=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new by(t),r=e.subscribe(n);return r.add(B(n,this.notifier)),r},t}(),by=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return r.__extends(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(q);gy||(gy={});var wy=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){var t;switch(this.kind){case"N":return vu(this.value);case"E":return t=this.error,new S(function(e){return e.error(t)});case"C":return mu()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),_y=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r.__extends(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new Sy(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(wy.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(wy.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(wy.createComplete()),this.unsubscribe()},e}(m),Sy=function(){return function(t,e){this.notification=t,this.destination=e}}(),Ey=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.__extends(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new Cy(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new T;if(this.isStopped||this.hasError?e=l.EMPTY:(this.observers.push(t),e=new I(this,t)),i&&t.add(t=new _y(t,i)),n)for(var a=0;a<o&&!t.closed;a++)t.next(r[a]);else for(a=0;a<o&&!t.closed;a++)t.next(r[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||Qp).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(x),Cy=function(){return function(t,e){this.time=t,this.value=e}}(),Ty=function(){return function(){}}(),Iy=function(){function t(t){var e,n,r=this;this._boundsChangeSampleTime$=new bu(200),this._includeInBounds$=new bu(new Map),this.bounds$=K(t.load()).pipe(G(function(){return r._includeInBounds$}),(e=this._boundsChangeSampleTime$.pipe(tl(function(t){return function(t,e,n){void 0===t&&(t=0);var r=-1;return yy(e)?r=Number(e)<1?1:Number(e):A(e)&&(n=e),A(n)||(n=dy),new S(function(e){var i=yy(t)?t:+t-n.now();return n.schedule(my,i,{index:0,period:r,subscriber:e})})}(0,t)})),function(t){return t.lift(new vy(e))}),z(function(t){return r._generateBounds(t)}),(1,n={bufferSize:1,windowTime:void 0,refCount:!1,scheduler:void 0},function(t){return t.lift((a=void 0===(o=(e=n).bufferSize)?Number.POSITIVE_INFINITY:o,u=void 0===(s=e.windowTime)?Number.POSITIVE_INFINITY:s,l=e.refCount,c=e.scheduler,h=0,f=!1,p=!1,function(t){h++,r&&!f||(f=!1,r=new Ey(a,u,c),i=t.subscribe({next:function(t){r.next(t)},error:function(t){f=!0,r.error(t)},complete:function(){p=!0,r.complete()}}));var e=r.subscribe(this);this.add(function(){h--,e.unsubscribe(),i&&!p&&l&&0===h&&(i.unsubscribe(),i=void 0,r=void 0)})}));var e,r,i,o,a,s,u,l,c,h,f,p}))}return t.prototype._generateBounds=function(t){var e=new google.maps.LatLngBounds;return t.forEach(function(t){return e.extend(t)}),e},t.prototype.addToBounds=function(t){var e=this._createIdentifier(t);if(!this._includeInBounds$.value.has(e)){var n=this._includeInBounds$.value;n.set(e,t),this._includeInBounds$.next(n)}},t.prototype.removeFromBounds=function(t){var e=this._includeInBounds$.value;e.delete(this._createIdentifier(t)),this._includeInBounds$.next(e)},t.prototype.changeFitBoundsChangeSampleTime=function(t){this._boundsChangeSampleTime$.next(t)},t.prototype.getBounds$=function(){return this.bounds$},t.prototype._createIdentifier=function(t){return t.lat+"+"+t.lng},t}(),ky=function(){function t(t,e,n){this._elem=t,this._mapsWrapper=e,this._fitBoundsService=n,this.longitude=0,this.latitude=0,this.zoom=8,this.draggable=!0,this.disableDoubleClickZoom=!1,this.disableDefaultUI=!1,this.scrollwheel=!0,this.keyboardShortcuts=!0,this.zoomControl=!0,this.styles=[],this.usePanning=!1,this.streetViewControl=!0,this.fitBounds=!1,this.scaleControl=!1,this.mapTypeControl=!1,this.panControl=!1,this.rotateControl=!1,this.fullscreenControl=!1,this.mapTypeId="roadmap",this.clickableIcons=!0,this.gestureHandling="auto",this._observableSubscriptions=[],this.mapClick=new Ci,this.mapRightClick=new Ci,this.mapDblClick=new Ci,this.centerChange=new Ci,this.boundsChange=new Ci,this.mapTypeIdChange=new Ci,this.idle=new Ci,this.zoomChange=new Ci,this.mapReady=new Ci}var e;return e=t,t.prototype.ngOnInit=function(){var t=this._elem.nativeElement.querySelector(".agm-map-container-inner");this._initMapInstance(t)},t.prototype._initMapInstance=function(t){var e=this;this._mapsWrapper.createMap(t,{center:{lat:this.latitude||0,lng:this.longitude||0},zoom:this.zoom,minZoom:this.minZoom,maxZoom:this.maxZoom,disableDefaultUI:this.disableDefaultUI,disableDoubleClickZoom:this.disableDoubleClickZoom,scrollwheel:this.scrollwheel,backgroundColor:this.backgroundColor,draggable:this.draggable,draggableCursor:this.draggableCursor,draggingCursor:this.draggingCursor,keyboardShortcuts:this.keyboardShortcuts,styles:this.styles,zoomControl:this.zoomControl,zoomControlOptions:this.zoomControlOptions,streetViewControl:this.streetViewControl,streetViewControlOptions:this.streetViewControlOptions,scaleControl:this.scaleControl,scaleControlOptions:this.scaleControlOptions,mapTypeControl:this.mapTypeControl,mapTypeControlOptions:this.mapTypeControlOptions,panControl:this.panControl,panControlOptions:this.panControlOptions,rotateControl:this.rotateControl,rotateControlOptions:this.rotateControlOptions,fullscreenControl:this.fullscreenControl,fullscreenControlOptions:this.fullscreenControlOptions,mapTypeId:this.mapTypeId,clickableIcons:this.clickableIcons,gestureHandling:this.gestureHandling,restriction:this.restriction}).then(function(){return e._mapsWrapper.getNativeMap()}).then(function(t){return e.mapReady.emit(t)}),this._handleMapCenterChange(),this._handleMapZoomChange(),this._handleMapMouseEvents(),this._handleBoundsChange(),this._handleMapTypeIdChange(),this._handleIdleEvent()},t.prototype.ngOnDestroy=function(){this._observableSubscriptions.forEach(function(t){return t.unsubscribe()}),this._mapsWrapper.clearInstanceListeners(),this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe()},t.prototype.ngOnChanges=function(t){this._updateMapOptionsChanges(t),this._updatePosition(t)},t.prototype._updateMapOptionsChanges=function(t){var n={};Object.keys(t).filter(function(t){return-1!==e._mapOptionsAttributes.indexOf(t)}).forEach(function(e){n[e]=t[e].currentValue}),this._mapsWrapper.setMapOptions(n)},t.prototype.triggerResize=function(t){var e=this;return void 0===t&&(t=!0),new Promise(function(n){setTimeout(function(){return e._mapsWrapper.triggerMapEvent("resize").then(function(){t&&(null!=e.fitBounds?e._fitBounds():e._setCenter()),n()})})})},t.prototype._updatePosition=function(t){(null!=t.latitude||null!=t.longitude||t.fitBounds)&&("fitBounds"in t?this._fitBounds():"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._setCenter())},t.prototype._setCenter=function(){var t={lat:this.latitude,lng:this.longitude};this.usePanning?this._mapsWrapper.panTo(t):this._mapsWrapper.setCenter(t)},t.prototype._fitBounds=function(){switch(this.fitBounds){case!0:this._subscribeToFitBoundsUpdates();break;case!1:this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe();break;default:this._updateBounds(this.fitBounds)}},t.prototype._subscribeToFitBoundsUpdates=function(){var t=this;this._fitBoundsSubscription=this._fitBoundsService.getBounds$().subscribe(function(e){return t._updateBounds(e)})},t.prototype._updateBounds=function(t){if(this._isLatLngBoundsLiteral(t)&&google&&google.maps){var e=new google.maps.LatLngBounds;e.union(t),t=e}this.usePanning?this._mapsWrapper.panToBounds(t):this._mapsWrapper.fitBounds(t)},t.prototype._isLatLngBoundsLiteral=function(t){return null!=t&&void 0===t.extend},t.prototype._handleMapCenterChange=function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("center_changed").subscribe(function(){t._mapsWrapper.getCenter().then(function(e){t.latitude=e.lat(),t.longitude=e.lng(),t.centerChange.emit({lat:t.latitude,lng:t.longitude})})});this._observableSubscriptions.push(e)},t.prototype._handleBoundsChange=function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("bounds_changed").subscribe(function(){t._mapsWrapper.getBounds().then(function(e){t.boundsChange.emit(e)})});this._observableSubscriptions.push(e)},t.prototype._handleMapTypeIdChange=function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("maptypeid_changed").subscribe(function(){t._mapsWrapper.getMapTypeId().then(function(e){t.mapTypeIdChange.emit(e)})});this._observableSubscriptions.push(e)},t.prototype._handleMapZoomChange=function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("zoom_changed").subscribe(function(){t._mapsWrapper.getZoom().then(function(e){t.zoom=e,t.zoomChange.emit(e)})});this._observableSubscriptions.push(e)},t.prototype._handleIdleEvent=function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("idle").subscribe(function(){t.idle.emit(void 0)});this._observableSubscriptions.push(e)},t.prototype._handleMapMouseEvents=function(){var t=this;[{name:"click",emitter:this.mapClick},{name:"rightclick",emitter:this.mapRightClick},{name:"dblclick",emitter:this.mapDblClick}].forEach(function(e){var n=t._mapsWrapper.subscribeToMapEvent(e.name).subscribe(function(t){var n={coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}};e.emitter.emit(n)});t._observableSubscriptions.push(n)})},t._mapOptionsAttributes=["disableDoubleClickZoom","scrollwheel","draggable","draggableCursor","draggingCursor","keyboardShortcuts","zoomControl","zoomControlOptions","styles","streetViewControl","streetViewControlOptions","zoom","mapTypeControl","mapTypeControlOptions","minZoom","maxZoom","panControl","panControlOptions","rotateControl","rotateControlOptions","fullscreenControl","fullscreenControlOptions","scaleControl","scaleControlOptions","mapTypeId","clickableIcons","gestureHandling","restriction"],t}(),xy=Zn({encapsulation:0,styles:[".agm-map-container-inner[_ngcontent-%COMP%] {\n      width: inherit;\n      height: inherit;\n    }\n    .agm-map-content[_ngcontent-%COMP%] {\n      display:none;\n    }"],data:{}});function Dy(t){return na(0,[(t()(),Uo(0,0,null,null,0,"div",[["class","agm-map-container-inner sebm-google-map-container-inner"]],null,null,null,null,null)),(t()(),Uo(1,0,null,null,1,"div",[["class","agm-map-content"]],null,null,null,null,null)),Go(null,0)],null,null)}var Ay=0,Ny=function(){function t(t,e){this._infoWindowManager=t,this._el=e,this.isOpen=!1,this.infoWindowClose=new Ci,this._infoWindowAddedToManager=!1,this._id=(Ay++).toString()}var e;return e=t,t.prototype.ngOnInit=function(){this.content=this._el.nativeElement.querySelector(".agm-info-window-content"),this._infoWindowManager.addInfoWindow(this),this._infoWindowAddedToManager=!0,this._updateOpenState(),this._registerEventListeners()},t.prototype.ngOnChanges=function(t){this._infoWindowAddedToManager&&((t.latitude||t.longitude)&&"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._infoWindowManager.setPosition(this),t.zIndex&&this._infoWindowManager.setZIndex(this),t.isOpen&&this._updateOpenState(),this._setInfoWindowOptions(t))},t.prototype._registerEventListeners=function(){var t=this;this._infoWindowManager.createEventObservable("closeclick",this).subscribe(function(){t.isOpen=!1,t.infoWindowClose.emit()})},t.prototype._updateOpenState=function(){this.isOpen?this.open():this.close()},t.prototype._setInfoWindowOptions=function(t){var n={};Object.keys(t).filter(function(t){return-1!==e._infoWindowOptionsInputs.indexOf(t)}).forEach(function(e){n[e]=t[e].currentValue}),this._infoWindowManager.setOptions(this,n)},t.prototype.open=function(){return this._infoWindowManager.open(this)},t.prototype.close=function(){var t=this;return this._infoWindowManager.close(this).then(function(){t.infoWindowClose.emit()})},t.prototype.id=function(){return this._id},t.prototype.toString=function(){return"AgmInfoWindow-"+this._id.toString()},t.prototype.ngOnDestroy=function(){this._infoWindowManager.deleteInfoWindow(this)},t._infoWindowOptionsInputs=["disableAutoPan","maxWidth"],t}(),Oy=0,Py=function(){function t(t){this._markerManager=t,this.draggable=!1,this.visible=!0,this.openInfoWindow=!0,this.opacity=1,this.zIndex=1,this.clickable=!0,this.markerClick=new Ci,this.markerRightClick=new Ci,this.dragStart=new Ci,this.drag=new Ci,this.dragEnd=new Ci,this.mouseOver=new Ci,this.mouseOut=new Ci,this.infoWindow=new Ti,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._fitBoundsDetails$=new Ey(1),this._id=(Oy++).toString()}return t.prototype.ngAfterContentInit=function(){var t=this;this.handleInfoWindowUpdate(),this.infoWindow.changes.subscribe(function(){return t.handleInfoWindowUpdate()})},t.prototype.handleInfoWindowUpdate=function(){var t=this;if(this.infoWindow.length>1)throw new Error("Expected no more than one info window.");this.infoWindow.forEach(function(e){e.hostMarker=t})},t.prototype.ngOnChanges=function(t){if("string"==typeof this.latitude&&(this.latitude=Number(this.latitude)),"string"==typeof this.longitude&&(this.longitude=Number(this.longitude)),"number"==typeof this.latitude&&"number"==typeof this.longitude){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._updateFitBoundsDetails(),this._markerAddedToManger=!0,void this._addEventListeners();(t.latitude||t.longitude)&&(this._markerManager.updateMarkerPosition(this),this._updateFitBoundsDetails()),t.title&&this._markerManager.updateTitle(this),t.label&&this._markerManager.updateLabel(this),t.draggable&&this._markerManager.updateDraggable(this),t.iconUrl&&this._markerManager.updateIcon(this),t.opacity&&this._markerManager.updateOpacity(this),t.visible&&this._markerManager.updateVisible(this),t.zIndex&&this._markerManager.updateZIndex(this),t.clickable&&this._markerManager.updateClickable(this),t.animation&&this._markerManager.updateAnimation(this)}},t.prototype.getFitBoundsDetails$=function(){return this._fitBoundsDetails$.asObservable()},t.prototype._updateFitBoundsDetails=function(){this._fitBoundsDetails$.next({latLng:{lat:this.latitude,lng:this.longitude}})},t.prototype._addEventListeners=function(){var t=this,e=this._markerManager.createEventObservable("click",this).subscribe(function(){t.openInfoWindow&&t.infoWindow.forEach(function(t){return t.open()}),t.markerClick.emit(t)});this._observableSubscriptions.push(e);var n=this._markerManager.createEventObservable("rightclick",this).subscribe(function(){t.markerRightClick.emit(null)});this._observableSubscriptions.push(n);var r=this._markerManager.createEventObservable("dragstart",this).subscribe(function(e){t.dragStart.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(r);var i=this._markerManager.createEventObservable("drag",this).subscribe(function(e){t.drag.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(i);var o=this._markerManager.createEventObservable("dragend",this).subscribe(function(e){t.dragEnd.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(o);var a=this._markerManager.createEventObservable("mouseover",this).subscribe(function(e){t.mouseOver.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(a);var s=this._markerManager.createEventObservable("mouseout",this).subscribe(function(e){t.mouseOut.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(s)},t.prototype.id=function(){return this._id},t.prototype.toString=function(){return"AgmMarker-"+this._id.toString()},t.prototype.ngOnDestroy=function(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach(function(t){return t.unsubscribe()})},t}(),Ry=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new My(t,this.compare,this.keySelector))},t}(),My=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return r.__extends(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(m),Ly=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new Fy(t),r=B(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),Fy=function(t){function e(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return r.__extends(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(q),Uy=function(){function t(t,e){this._fitBoundsAccessor=t,this._fitBoundsService=e,this.agmFitBounds=!0,this._destroyed$=new x,this._latestFitBoundsDetails=null}return t.prototype.ngOnChanges=function(t){this._updateBounds()},t.prototype.ngOnInit=function(){var t,e,n=this;this._fitBoundsAccessor.getFitBoundsDetails$().pipe((e=function(t,e){return t.latLng.lat===e.latLng.lng},function(t){return t.lift(new Ry(e,void 0))}),(t=this._destroyed$,function(e){return e.lift(new Ly(t))})).subscribe(function(t){return n._updateBounds(t)})},t.prototype._updateBounds=function(t){t&&(this._latestFitBoundsDetails=t),this._latestFitBoundsDetails&&(this.agmFitBounds?this._fitBoundsService.addToBounds(this._latestFitBoundsDetails.latLng):this._fitBoundsService.removeFromBounds(this._latestFitBoundsDetails.latLng))},t.prototype.ngOnDestroy=function(){this._destroyed$.next(),this._destroyed$.complete(),null!==this._latestFitBoundsDetails&&this._fitBoundsService.removeFromBounds(this._latestFitBoundsDetails.latLng)},t}(),Vy=Zn({encapsulation:2,styles:[],data:{}});function jy(t){return na(0,[(t()(),Uo(0,0,null,null,1,"div",[["class","agm-info-window-content"]],null,null,null,null,null)),Go(null,0)],null,null)}var By=function(){function t(t,e,n,i){var o=this;this.sanitizer=t,this.firebaseService=e,this.route=n,this.firestore=i,this.sellectAllNews1=function(t){return o.firebaseService.sellectAllNews1(t).subscribe(function(t){o.case_details=t,console.log("case_id:",o.case_details.kiosk_id),o.firebaseService.sellectAllNews2(o.case_details.kiosk_id).subscribe(function(t){return r.__awaiter(o,void 0,void 0,function(){var e,n,i=this;return r.__generator(this,function(r){switch(r.label){case 0:return this.kiosk_details=t,(e=[]).push(this.case_details),e.push(this.kiosk_details),[4,Promise.all(e)];case 1:return n=r.sent(),console.log(n),this.datetime=n[0].datetime,this.name=n[1].name,this.address=n[1].Address,this.lat=n[1].lat,this.lng=n[1].long,this.link=this.sanitizer.bypassSecurityTrustResourceUrl(n[1].link),this.firebaseService.police_list(this.lat,this.lng).subscribe(function(t){console.log(t),i.police_list=t}),this.firebaseService.hospital_list(this.lat,this.lng).subscribe(function(t){console.log(t),i.hospital_list=t}),[2]}})})})})},this.getObjectById=function(){return o.firebaseService.getObjectById(o.id).subscribe(function(t){o.case_details=t,console.log(o.case_details)})}}return t.prototype.ngOnInit=function(){var t=this;this.sub=this.route.params.subscribe(function(e){t.id=e.id,t.sellectAllNews1(t.id)})},t}(),qy=Zn({encapsulation:0,styles:[["agm-map[_ngcontent-%COMP%]{height:400px}"]],data:{}});function zy(t){return na(0,[(t()(),Uo(0,0,null,null,20,"li",[["class","collection-item avatar"]],null,null,null,null,null)),(t()(),Uo(1,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Uo(2,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" security"])),(t()(),$o(4,null,["",""])),(t()(),Uo(5,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(6,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Uo(7,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" local_phone"])),(t()(),$o(9,null,["",""])),(t()(),Uo(10,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(11,0,null,null,5,"p",[],null,null,null,null,null)),(t()(),Uo(12,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" near_me"])),(t()(),Uo(14,0,null,null,1,"span",[["class","text-grey text-darken-2"]],null,null,null,null,null)),(t()(),$o(15,null,["",""])),(t()(),Uo(16,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(17,0,null,null,3,"a",[["class","secondary-content"],["href","#"],["style","color:grey"]],null,null,null,null,null)),(t()(),Uo(18,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),$o(-1,null,["room"])),(t()(),$o(20,null,["",""]))],null,function(t,e){t(e,4,0,e.context.$implicit.name),t(e,9,0,e.context.$implicit.phone_number),t(e,15,0,e.context.$implicit.address),t(e,20,0,e.context.$implicit.distance)})}function Wy(t){return na(0,[(t()(),Uo(0,0,null,null,20,"li",[["class","collection-item avatar"]],null,null,null,null,null)),(t()(),Uo(1,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Uo(2,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" local_hospital"])),(t()(),$o(4,null,["",""])),(t()(),Uo(5,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(6,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Uo(7,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" local_phone"])),(t()(),$o(9,null,["",""])),(t()(),Uo(10,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(11,0,null,null,5,"p",[],null,null,null,null,null)),(t()(),Uo(12,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" near_me"])),(t()(),Uo(14,0,null,null,1,"span",[["class","text-grey text-darken-2"]],null,null,null,null,null)),(t()(),$o(15,null,[" ",""])),(t()(),Uo(16,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(17,0,null,null,3,"a",[["class","secondary-content"],["href","#"],["style","color:grey"]],null,null,null,null,null)),(t()(),Uo(18,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),$o(-1,null,["room"])),(t()(),$o(20,null,["",""]))],null,function(t,e){t(e,4,0,e.context.$implicit.name),t(e,9,0,e.context.$implicit.phone_number),t(e,15,0,e.context.$implicit.address),t(e,20,0,e.context.$implicit.distance)})}function Hy(t){return na(0,[(t()(),Uo(0,0,null,null,8,"div",[["class","container"]],null,null,null,null,null)),(t()(),Uo(1,0,null,null,7,"nav",[["class","navbar-fixed"],["style","background: transparent;"]],null,null,null,null,null)),(t()(),Uo(2,0,null,null,6,"div",[["class","nav-wrapper"]],null,null,null,null,null)),(t()(),Uo(3,0,null,null,5,"a",[["class","brand-logo left"],["routerLink","/home"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Kr(t,4).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),ai(4,671744,[[2,4]],0,jf,[Uf,kh,ps],{routerLink:[0,"routerLink"]},null),ai(5,1720320,null,2,qf,[Uf,rn,ln,[2,Vf],[2,jf]],{routerLinkActive:[0,"routerLinkActive"]},null),zo(603979776,1,{links:1}),zo(603979776,2,{linksWithHrefs:1}),(t()(),$o(-1,null,["KIOSK"])),(t()(),Uo(9,0,null,null,112,"div",[["class","container-fluid"]],null,null,null,null,null)),(t()(),Uo(10,0,null,null,111,"div",[["class","row"]],null,null,null,null,null)),(t()(),Uo(11,0,null,null,44,"div",[["class","col l8 s12"]],null,null,null,null,null)),(t()(),Uo(12,0,null,null,17,"div",[["class","row"]],null,null,null,null,null)),(t()(),Uo(13,0,null,null,16,"div",[["class","col s12"]],null,null,null,null,null)),(t()(),Uo(14,0,null,null,15,"div",[["class","card z-depth-5"]],null,null,null,null,null)),(t()(),Uo(15,0,null,null,1,"div",[["class","video-container"]],null,null,null,null,null)),(t()(),Uo(16,0,null,null,0,"iframe",[["allow","accelerometer;  encrypted-media; gyroscope; picture-in-picture"],["allowfullscreen",""],["class","img1"],["frameborder","0"],["height","315"],["width","600"]],[[1,"src",5]],null,null,null,null)),(t()(),Uo(17,0,null,null,2,"span",[["class","badge"],["style","margin-top:31px;margin-right:12px;"]],null,null,null,null,null)),(t()(),Uo(18,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),$o(-1,null,["5 min ago"])),(t()(),Uo(20,0,null,null,9,"div",[["class","card-content"]],null,null,null,null,null)),(t()(),Uo(21,0,null,null,5,"p",[],null,null,null,null,null)),(t()(),Uo(22,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),$o(-1,null,["location_on"])),(t()(),Uo(24,0,null,null,2,"span",[["style","font-size:17px;"]],null,null,null,null,null)),(t()(),Uo(25,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),$o(26,null,["",""])),(t()(),Uo(27,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),Uo(28,0,null,null,1,"span",[["class","text-grey text-darken-2"]],null,null,null,null,null)),(t()(),$o(29,null,["",""])),(t()(),Uo(30,0,null,null,25,"div",[["class","row"]],null,null,null,null,null)),(t()(),Uo(31,0,null,null,24,"div",[["class","col s12"]],null,null,null,null,null)),(t()(),Uo(32,0,null,null,23,"div",[["class","card"]],null,null,null,null,null)),(t()(),Uo(33,0,null,null,22,"agm-map",[],[[2,"sebm-google-map-container",null]],null,null,Dy,xy)),ui(4608,null,ry,ry,[ty,to]),ui(4608,null,iy,iy,[ty,to]),ui(4608,null,uy,uy,[ty,to]),ui(4608,null,hy,hy,[ty,to]),ui(4608,null,fy,fy,[ty,to]),ui(4608,null,py,py,[ty,to]),ui(512,null,ty,ty,[$d,to]),ui(512,null,Iy,Iy,[$d]),ai(42,770048,null,0,ky,[rn,ty,Iy],{longitude:[0,"longitude"],latitude:[1,"latitude"],zoom:[2,"zoom"],disableDefaultUI:[3,"disableDefaultUI"],usePanning:[4,"usePanning"],fitBounds:[5,"fitBounds"],mapTypeControl:[6,"mapTypeControl"],fullscreenControl:[7,"fullscreenControl"]},null),ui(512,null,ey,ey,[ty,to]),ui(512,null,ny,ny,[ty,to,ey]),(t()(),Uo(45,0,null,0,10,"agm-marker",[],null,null,null,null,null)),ai(46,1720320,null,1,Py,[ey],{animation:[0,"animation"],latitude:[1,"latitude"],longitude:[2,"longitude"]},null),zo(603979776,3,{infoWindow:1}),ui(2048,null,Ty,null,[Py]),ai(49,737280,null,0,Uy,[[4,Ty],Iy],{agmFitBounds:[0,"agmFitBounds"]},null),(t()(),Uo(50,0,null,null,5,"agm-info-window",[],null,null,null,jy,Vy)),ai(51,770048,[[3,4]],0,Ny,[ny,rn],{disableAutoPan:[0,"disableAutoPan"]},null),(t()(),$o(52,0,[" "," "])),(t()(),Uo(53,0,null,0,2,"strong",[],null,null,null,null,null)),(t()(),Uo(54,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),$o(55,null,["",""])),(t()(),Uo(56,0,null,null,65,"div",[["class","row"]],null,null,null,null,null)),(t()(),Uo(57,0,null,null,64,"div",[["class","col l4 s12"]],null,null,null,null,null)),(t()(),Uo(58,0,null,null,7,"div",[["class","col l12 s12"]],null,null,null,null,null)),(t()(),Uo(59,0,null,null,6,"ul",[["class","collection with-header "]],null,null,null,null,null)),(t()(),Uo(60,0,null,null,3,"li",[["class","collection-header center orange lighten-1 white-text"]],null,null,null,null,null)),(t()(),Uo(61,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),Uo(62,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),$o(-1,null,["Near by Police Station"])),(t()(),Fo(16777216,null,null,1,null,zy)),ai(65,278528,null,0,ru,[Nn,Dn,Sn],{ngForOf:[0,"ngForOf"]},null),(t()(),Uo(66,0,null,null,7,"div",[["class","col l12 s12"]],null,null,null,null,null)),(t()(),Uo(67,0,null,null,6,"ul",[["class","collection with-header"]],null,null,null,null,null)),(t()(),Uo(68,0,null,null,3,"li",[["class","collection-header center blue lighten-1 white-text"]],null,null,null,null,null)),(t()(),Uo(69,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),Uo(70,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),$o(-1,null,["Near by Hospitals "])),(t()(),Fo(16777216,null,null,1,null,Wy)),ai(73,278528,null,0,ru,[Nn,Dn,Sn],{ngForOf:[0,"ngForOf"]},null),(t()(),Uo(74,0,null,null,47,"div",[["class","col l12 s12"]],null,null,null,null,null)),(t()(),Uo(75,0,null,null,46,"ul",[["class","collection with-header"]],null,null,null,null,null)),(t()(),Uo(76,0,null,null,3,"li",[["class","collection-header center red lighten-1 white-text"]],null,null,null,null,null)),(t()(),Uo(77,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),Uo(78,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),$o(-1,null,["Near by Volunteers "])),(t()(),Uo(80,0,null,null,20,"li",[["class","collection-item avatar"]],null,null,null,null,null)),(t()(),Uo(81,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Uo(82,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" account_circle"])),(t()(),$o(-1,null,[" Rohan Borse"])),(t()(),Uo(85,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(86,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Uo(87,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" local_phone"])),(t()(),$o(-1,null,[" +91-8055389747 "])),(t()(),Uo(90,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(91,0,null,null,5,"p",[],null,null,null,null,null)),(t()(),Uo(92,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" near_me"])),(t()(),Uo(94,0,null,null,1,"span",[["class","text-grey text-darken-2"]],null,null,null,null,null)),(t()(),$o(-1,null,["Bytco hospital,Nasik Mahanagar Pali, Jdc Bytco, Nasik Road, Nashik 422214"])),(t()(),Uo(96,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(97,0,null,null,3,"a",[["class","secondary-content"],["href","#!"],["style","color:grey"]],null,null,null,null,null)),(t()(),Uo(98,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),$o(-1,null,["room"])),(t()(),$o(-1,null,["150 m"])),(t()(),Uo(101,0,null,null,20,"li",[["class","collection-item avatar"]],null,null,null,null,null)),(t()(),Uo(102,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Uo(103,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" account_circle"])),(t()(),$o(-1,null,[" Rushikesh Patil"])),(t()(),Uo(106,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(107,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Uo(108,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" local_phone"])),(t()(),$o(-1,null,[" +91-7767057209 "])),(t()(),Uo(111,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(112,0,null,null,5,"p",[],null,null,null,null,null)),(t()(),Uo(113,0,null,null,1,"i",[["class","material-icons text-grey text-darken-3"]],null,null,null,null,null)),(t()(),$o(-1,null,[" near_me"])),(t()(),Uo(115,0,null,null,1,"span",[["class","text-grey text-darken-2"]],null,null,null,null,null)),(t()(),$o(-1,null,["Sahyadri hospital,Mumbai-Agra Road, Wadala Rd, Dwarka Circle, Near, Nashik, Maharashtra 422001"])),(t()(),Uo(117,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Uo(118,0,null,null,3,"a",[["class","secondary-content"],["href","#!"],["style","color:grey"]],null,null,null,null,null)),(t()(),Uo(119,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),$o(-1,null,["room"])),(t()(),$o(-1,null,["1 km"])),(t()(),Uo(122,0,null,null,0,"div",[["class","section"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,4,0,"/home"),t(e,5,0,"active"),t(e,42,0,n.lng,n.lat,12,!0,!1,!0,!0,!0),t(e,46,0,"BOUNCE",n.lat,n.lng),t(e,49,0,!0),t(e,51,0,!0),t(e,65,0,n.police_list),t(e,73,0,n.hospital_list)},function(t,e){var n=e.component;t(e,3,0,Kr(e,4).target,Kr(e,4).href),t(e,16,0,n.link),t(e,26,0,n.name),t(e,29,0,n.address),t(e,33,0,!0),t(e,52,0,n.name),t(e,55,0,n.address)})}function Qy(t){return na(0,[(t()(),Uo(0,0,null,null,1,"app-case-details",[],null,null,null,Hy,qy)),ai(1,114688,null,0,By,[uc,Qd,kh,pd],null,null)],function(t,e){t(e,1,0)},null)}var Ky=Lr("app-case-details",By,Qy,{},{},[]),Gy=Zn({encapsulation:0,styles:[[""]],data:{}});function Yy(t){return na(0,[(t()(),Uo(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ai(1,212992,null,0,Hf,[Wf,Nn,Je,[8,null],Cn],null,null)],function(t,e){t(e,1,0)},null)}function Zy(t){return na(0,[(t()(),Uo(0,0,null,null,1,"app-root",[],null,null,null,Yy,Gy)),ai(1,49152,null,0,cs,[],null,null)],null,null)}var Jy=Lr("app-root",cs,Zy,{},{},[]),Xy=(n("6Joi"),function(){function t(){}var e;return e=t,t.enablePersistence=function(t){return{ngModule:e,providers:[{provide:sd,useValue:!0},{provide:ud,useValue:t}]}},t}()),$y=function(){function t(){}return t.prototype.getNativeWindow=function(){return window},t}(),tm=function(){function t(){}return t.prototype.getNativeDocument=function(){return document},t}(),em=[$y,tm],nm=function(t){return t[t.HTTP=1]="HTTP",t[t.HTTPS=2]="HTTPS",t[t.AUTO=3]="AUTO",t}({}),rm=new Ot("angular-google-maps LAZY_MAPS_API_CONFIG"),im=function(t){function e(e,n,r){void 0===e&&(e=null);var i=t.call(this)||this;return i._SCRIPT_ID="agmGoogleMapsApiScript",i.callbackName="agmLazyMapsAPILoader",i._config=e||{},i._windowRef=n,i._documentRef=r,i}return Object(r.__extends)(e,t),e.prototype.load=function(){var t=this._windowRef.getNativeWindow();if(t.google&&t.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var e=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(e)return this._assignScriptLoadingPromise(e),this._scriptLoadingPromise;var n=this._documentRef.getNativeDocument().createElement("script");return n.type="text/javascript",n.async=!0,n.defer=!0,n.id=this._SCRIPT_ID,n.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(n),this._documentRef.getNativeDocument().body.appendChild(n),this._scriptLoadingPromise},e.prototype._assignScriptLoadingPromise=function(t){var e=this;this._scriptLoadingPromise=new Promise(function(n,r){e._windowRef.getNativeWindow()[e.callbackName]=function(){n()},t.onerror=function(t){r(t)}})},e.prototype._getScriptSrc=function(t){var e;switch(this._config&&this._config.protocol||nm.HTTPS){case nm.AUTO:e="";break;case nm.HTTP:e="http:";break;case nm.HTTPS:e="https:"}var n={v:this._config.apiVersion||"quarterly",callback:t,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language};return e+"//"+(this._config.hostAndPath||"maps.googleapis.com/maps/api/js")+"?"+Object.keys(n).filter(function(t){return null!=n[t]}).filter(function(t){return!Array.isArray(n[t])||Array.isArray(n[t])&&n[t].length>0}).map(function(t){var e=n[t];return Array.isArray(e)?{key:t,value:e.join(",")}:{key:t,value:n[t]}}).map(function(t){return t.key+"="+t.value}).join("&")},e}($d),om=function(){return function(){}}(),am=function(){return function(){}}(),sm=function(){return function(){}}(),um=function(){return function(){}}(),lm=function(){return function(){}}(),cm=function(){return function(){}}(),hm=function(){return function(){}}(),fm=function(){return function(){}}(),pm=function(){function t(){}var e;return e=t,t.forRoot=function(t){return{ngModule:e,providers:em.concat([{provide:$d,useClass:im},{provide:rm,useValue:t}])}},t}(),dm=function(){return function(){}}(),ym=ss(ls,[cs],function(t){return function(t){for(var e={},n=[],r=!1,i=0;i<t.length;i++){var o=t[i];o.token===He&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[Qn(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}([kr(512,Je,Xe,[[8,[mp,Xd,Ky,Jy]],[3,Je],tn]),kr(5120,No,Ro,[[3,No]]),kr(4608,$s,tu,[No,[2,Xs]]),kr(4608,gp,gp,[]),kr(5120,Ei,Mo,[to]),kr(5120,Ni,Oi,[]),kr(5120,Sn,Oo,[]),kr(5120,En,Po,[]),kr(4608,uc,lc,[cu]),kr(6144,Ae,null,[uc]),kr(4608,ec,rc,[]),kr(5120,xl,function(t,e,n,r,i,o,a,s){return[new $l(t,e,n),new sc(r),new ic(i,o,a,s)]},[cu,to,Mi,cu,cu,ec,Fi,[2,nc]]),kr(4608,Dl,Dl,[xl,to]),kr(135680,Ol,Ol,[cu]),kr(4608,Vl,Vl,[Dl,Ol,Ni]),kr(6144,sn,null,[Vl]),kr(6144,Nl,null,[Ol]),kr(4608,uo,uo,[to]),kr(5120,kh,up,[Uf]),kr(4608,Yf,Yf,[]),kr(6144,Kf,null,[Yf]),kr(135680,Zf,Zf,[Uf,Ii,Hi,Ft,Kf]),kr(4608,Gf,Gf,[]),kr(5120,Jf,rp,[Uf,pu,Xf]),kr(5120,fp,hp,[lp]),kr(5120,Li,function(t){return[t]},[fp]),kr(4608,jd,Bd,[cu,Mi,Ud]),kr(4608,qd,qd,[jd,Vd]),kr(5120,Od,function(t){return[t]},[qd]),kr(4608,Ld,Ld,[]),kr(6144,Md,null,[Ld]),kr(4608,Fd,Fd,[Md]),kr(6144,yd,null,[Fd]),kr(4608,dd,zd,[yd,Ft]),kr(4608,Ad,Ad,[dd]),kr(5120,id,od,[nd,[2,rd]]),kr(4608,pd,pd,[nd,[2,rd],[2,sd],[2,ld],Mi,to,[2,ud]]),kr(4608,$y,$y,[]),kr(4608,tm,tm,[]),kr(4608,$d,im,[[2,rm],$y,tm]),kr(4608,uu,uu,[No]),kr(1073742336,lu,lu,[]),kr(1073742336,Ep,Ep,[]),kr(1073742336,om,om,[]),kr(1073742336,sm,sm,[]),kr(1073742336,um,um,[]),kr(1073742336,lm,lm,[]),kr(1073742336,am,am,[]),kr(1073742336,cm,cm,[]),kr(1073742336,hm,hm,[]),kr(1024,ie,gc,[]),kr(1024,fo,function(){return[ep()]},[]),kr(512,lp,lp,[Ft]),kr(1024,Di,function(t,e){return[(n=t,Tl("probe",kl),Tl("coreTokens",Object(r.__assign)({},Il,(n||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return kl}),cp(e)];var n},[[2,fo],lp]),kr(512,Ai,Ai,[[2,Di]]),kr(131584,vo,vo,[to,Fi,Ft,ie,Je,Ai]),kr(1073742336,Lo,Lo,[vo]),kr(1073742336,vc,vc,[[3,vc]]),kr(1024,$f,op,[[3,Uf]]),kr(512,oh,ah,[]),kr(512,Wf,Wf,[]),kr(512,ps,gs,[hs,[2,ds]]),kr(512,ys,ys,[ps,hs]),kr(512,Hi,Hi,[]),kr(512,Ii,So,[Hi,[2,wo]]),kr(1024,Nf,function(){return[[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:Kd},{path:"case-details/:id",component:By}]]},[]),kr(256,Xf,{},[]),kr(1024,Uf,sp,[vo,oh,Wf,ys,Ft,Ii,Hi,Nf,Xf,[2,Pf],[2,Df]]),kr(1073742336,np,np,[[2,$f],[2,Uf]]),kr(1073742336,fm,fm,[]),kr(1073742336,Wd,Wd,[]),kr(1073742336,Hd,Hd,[]),kr(1073742336,ad,ad,[]),kr(1073742336,Xy,Xy,[]),kr(1073742336,Fp,Fp,[]),kr(1073742336,pm,pm,[]),kr(1073742336,dm,dm,[]),kr(1073742336,ls,ls,[]),kr(256,He,!0,[]),kr(256,Ud,"XSRF-TOKEN",[]),kr(256,Vd,"X-XSRF-TOKEN",[]),kr(256,nd,{apiKey:"AIzaSyD6RbV1qXP9CBwalR4vDhoJ6_FVQapF81Y",authDomain:"cases-a01f9.firebaseapp.com",databaseURL:"https://cases-a01f9.firebaseio.com",projectId:"cases-a01f9",storageBucket:"",messagingSenderId:"627332534503",appId:"1:627332534503:web:aa8435786d9e7774"},[]),kr(256,rd,void 0,[]),kr(256,rm,{apiKey:"AIzaSyCpMCI0p-Hm-AdUW66-wR9XaiGDyN4q0CU"},[])])});(function(){if(ae)throw new Error("Cannot enable prod mode after platform setup.");oe=!1})(),mc().bootstrapModuleFactory(ym).catch(function(t){return console.error(t)})},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=(15&s)<<2|l>>6,h=63&l;u||(h=64,a||(c=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[c],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!=s&&(r.push(a<<4&240|s>>2),64!=u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var p="FirebaseError",d=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=p,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,y.prototype.create),i}return r.__extends(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return t.replace(m,function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"})}(o,r):"Error",s=new d(i,this.serviceName+": "+a+" ("+i+")."),u=0,l=Object.keys(r);u<l.length;u++){var c=l[u];"_"!==c.slice(-1)&&(c in s&&console.warn('Overwriting FirebaseError base field "'+c+'" can cause unexpected behavior.'),s[c]=r[c])}return s},t}(),m=/\{\$([^}]+)}/g;function g(t){return JSON.parse(t)}var v=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=g(l(o[0])||""),n=g(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},b=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},w=function(t,e){return b(e,function(e,n){t[e]=n}),t},_=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},S=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^s&(u^l),o=1518500249):(i=s^u^l,o=1859775393):r<60?(i=s&u|l&(s|u),o=2400959708):(i=s^u^l,o=3395469782);var h=(a<<5|a>>>27)+i+c+o+n[r]&4294967295;c=l,l=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function C(){}function T(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=y,e.FirebaseError=d,e.Sha1=S,e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.base64=u,e.base64Decode=l,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.clone=function(t){return w({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new E(t,e);return n.subscribe.bind(n)},e.decode=v,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=T,e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=w,e.findKey=_,e.findValue=function(t,e,n){var r=_(t,e,n);return r&&t[r]},e.forEach=b,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getUA=f,e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isAdmin=function(t){var e=v(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=v(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=v(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},e.issuedAtTime=function(t){var e=v(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=g,e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.patchProperty=function(t,e,n){t[e]=n},e.querystring=function(t){var e=[];return b(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(T(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(T(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(T(t,e,r)+"must be a valid firebase namespace.")}},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);